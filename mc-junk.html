<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: blob:; connect-src 'self';">
  <meta name="robots" content="noindex, nofollow, noarchive">
  <title>McJunk QuickQuote</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: oklch(0.985 0 0);
      --surface: oklch(1 0 0);
      --surface-raised: oklch(0.97 0 0);
      --border: oklch(0.90 0 0);
      --border-light: oklch(0.94 0 0);
      --text: oklch(0.20 0 0);
      --text-muted: oklch(0.45 0 0);
      --text-light: oklch(0.60 0 0);
      --primary: oklch(0.52 0.15 145);
      --primary-hover: oklch(0.46 0.14 145);
      --primary-light: oklch(0.92 0.04 145);
      --accent: oklch(0.65 0.20 85);
      --accent-light: oklch(0.95 0.05 85);
      --success: oklch(0.55 0.14 160);
      --success-light: oklch(0.94 0.04 160);
      --warning: oklch(0.72 0.18 75);
      --warning-light: oklch(0.95 0.06 75);
      --danger: oklch(0.58 0.18 25);
      --danger-light: oklch(0.94 0.05 25);
      --radius-sm: 6px;
      --radius: 10px;
      --radius-lg: 16px;
      --shadow-sm: 0 1px 2px oklch(0 0 0 / 0.04);
      --shadow: 0 2px 4px oklch(0 0 0 / 0.04), 0 4px 12px oklch(0 0 0 / 0.06);
      --shadow-lg: 0 4px 8px oklch(0 0 0 / 0.04), 0 8px 24px oklch(0 0 0 / 0.08);
      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-display: 'Space Grotesk', var(--font-sans);
    }
    
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: var(--font-sans);
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      min-height: 100vh;
      font-size: 15px;
      -webkit-font-smoothing: antialiased;
    }
    
    /* Lock Screen */
    .lock-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, oklch(0.30 0.12 145) 0%, oklch(0.22 0.10 145) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 24px;
    }
    
    .lock-card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 40px 32px;
      max-width: 380px;
      width: 100%;
      box-shadow: var(--shadow-lg);
      text-align: center;
    }
    
    .lock-logo {
      width: 64px;
      height: 64px;
      background: var(--primary);
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }
    
    .lock-logo svg {
      width: 36px;
      height: 36px;
      color: white;
    }
    
    .lock-title {
      font-family: var(--font-display);
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
    }
    
    .lock-subtitle {
      color: var(--text-muted);
      font-size: 14px;
      margin-bottom: 28px;
    }
    
    .lock-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 16px;
      font-family: var(--font-sans);
      text-align: center;
      letter-spacing: 2px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    .lock-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }
    
    .lock-input.error {
      border-color: var(--danger);
      animation: shake 0.4s ease;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    
    .lock-btn {
      width: 100%;
      padding: 14px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 16px;
      transition: background 0.15s, transform 0.1s;
    }
    
    .lock-btn:hover {
      background: var(--primary-hover);
    }
    
    .lock-btn:active {
      transform: scale(0.98);
    }
    
    .lock-btn:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    /* Demo Banner */
    .demo-banner {
      background: var(--accent-light);
      border-bottom: 1px solid oklch(0.85 0.08 85);
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    
    .demo-banner-text {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: oklch(0.38 0.12 85);
      font-weight: 500;
    }
    
    .demo-banner-text svg {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }
    
    .demo-banner-close {
      background: none;
      border: none;
      padding: 4px;
      cursor: pointer;
      color: oklch(0.38 0.12 85);
      display: flex;
      border-radius: 4px;
      transition: background 0.15s;
    }
    
    .demo-banner-close:hover {
      background: oklch(0.85 0.08 85);
    }
    
    .demo-banner-close:focus-visible {
      outline: 2px solid oklch(0.50 0.12 85);
      outline-offset: 2px;
    }
    
    .demo-banner-close svg {
      width: 18px;
      height: 18px;
    }
    
    /* App Layout */
    .app {
      display: none;
      flex-direction: column;
      min-height: 100vh;
    }
    
    .app.visible {
      display: flex;
    }
    
    /* Header */
    .header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header-brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .header-logo {
      width: 36px;
      height: 36px;
      background: var(--primary);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .header-logo svg {
      width: 22px;
      height: 22px;
      color: white;
    }
    
    .header-title {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 700;
    }
    
    .header-actions {
      display: flex;
      gap: 8px;
    }
    
    .icon-btn {
      width: 40px;
      height: 40px;
      border: none;
      background: var(--surface-raised);
      border-radius: var(--radius);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      transition: background 0.15s, color 0.15s;
    }
    
    .icon-btn:hover {
      background: var(--border);
      color: var(--text);
    }
    
    .icon-btn:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .icon-btn svg {
      width: 20px;
      height: 20px;
    }
    
    /* Main Content */
    .main {
      flex: 1;
      padding: 16px;
      padding-bottom: 88px;
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
    }
    
    /* Tabs Content */
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Truck Visualizer */
    .truck-section {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
    }
    
    .truck-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    
    .truck-title {
      font-family: var(--font-display);
      font-size: 16px;
      font-weight: 600;
    }
    
    .truck-fill-badge {
      background: var(--primary-light);
      color: var(--primary);
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
    }
    
    .truck-visual {
      position: relative;
      height: 140px;
      background: var(--surface-raised);
      border-radius: var(--radius);
      border: 2px solid var(--border);
      overflow: hidden;
      margin-bottom: 16px;
    }
    
    .truck-bed {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, var(--primary) 0%, oklch(0.45 0.13 145) 100%);
      transition: height 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .truck-lines {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    
    .truck-line {
      position: absolute;
      left: 0;
      right: 0;
      border-top: 1px dashed var(--border);
    }
    
    .truck-line-label {
      position: absolute;
      right: 8px;
      transform: translateY(-50%);
      font-size: 11px;
      color: var(--text-light);
      background: var(--surface-raised);
      padding: 0 4px;
    }
    
    .truck-items-preview {
      position: absolute;
      inset: 0;
      display: flex;
      flex-wrap: wrap;
      align-content: flex-end;
      padding: 8px;
      gap: 4px;
    }
    
    .truck-item-icon {
      width: 28px;
      height: 28px;
      background: oklch(1 0 0 / 0.85);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      box-shadow: 0 1px 3px oklch(0 0 0 / 0.2);
    }
    
    /* Price Display */
    .price-display {
      text-align: center;
      padding: 16px;
      background: var(--success-light);
      border-radius: var(--radius);
    }
    
    .price-label {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }
    
    .price-amount {
      font-family: var(--font-display);
      font-size: 36px;
      font-weight: 700;
      color: var(--success);
    }
    
    .price-range {
      font-size: 13px;
      color: var(--text-light);
      margin-top: 4px;
    }
    
    /* Item Grid */
    .section-title {
      font-family: var(--font-display);
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .section-title svg {
      width: 18px;
      height: 18px;
      color: var(--primary);
    }
    
    .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .item-card {
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 12px;
      cursor: pointer;
      transition: border-color 0.15s, box-shadow 0.15s, transform 0.1s;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 8px;
    }
    
    .item-card:hover {
      border-color: var(--primary-light);
      box-shadow: var(--shadow);
    }
    
    .item-card:active {
      transform: scale(0.97);
    }
    
    .item-card:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .item-card.selected {
      border-color: var(--primary);
      background: var(--primary-light);
    }
    
    .item-icon-wrap {
      width: 44px;
      height: 44px;
      background: var(--surface-raised);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .item-card.selected .item-icon-wrap {
      background: var(--surface);
    }
    
    .item-icon-wrap svg {
      width: 24px;
      height: 24px;
      color: var(--text-muted);
    }
    
    .item-card.selected .item-icon-wrap svg {
      color: var(--primary);
    }
    
    .item-name {
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
    }
    
    .item-qty {
      font-size: 12px;
      color: var(--text-light);
    }
    
    /* Selected Items */
    .selected-items {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
    }
    
    .selected-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .clear-btn {
      font-size: 13px;
      color: var(--danger);
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background 0.15s;
    }
    
    .clear-btn:hover {
      background: var(--danger-light);
    }
    
    .clear-btn:focus-visible {
      outline: 2px solid var(--danger);
      outline-offset: 2px;
    }
    
    .selected-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .selected-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      background: var(--surface-raised);
      border-radius: var(--radius-sm);
    }
    
    .selected-item-icon {
      width: 32px;
      height: 32px;
      background: var(--surface);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .selected-item-icon svg {
      width: 18px;
      height: 18px;
      color: var(--primary);
    }
    
    .selected-item-info {
      flex: 1;
    }
    
    .selected-item-name {
      font-size: 14px;
      font-weight: 500;
    }
    
    .selected-item-size {
      font-size: 12px;
      color: var(--text-light);
    }
    
    .qty-controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .qty-btn {
      width: 28px;
      height: 28px;
      border: 1px solid var(--border);
      background: var(--surface);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      transition: border-color 0.15s, background 0.15s;
    }
    
    .qty-btn:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }
    
    .qty-btn:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .qty-btn svg {
      width: 16px;
      height: 16px;
    }
    
    .qty-value {
      min-width: 24px;
      text-align: center;
      font-weight: 600;
      font-size: 14px;
    }
    
    /* Photo Quote Section */
    .photo-section {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
    }
    
    .photo-upload-area {
      border: 2px dashed var(--border);
      border-radius: var(--radius);
      padding: 32px 20px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.15s, background 0.15s;
    }
    
    .photo-upload-area:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }
    
    .photo-upload-area:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .photo-upload-icon {
      width: 48px;
      height: 48px;
      background: var(--surface-raised);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 12px;
    }
    
    .photo-upload-icon svg {
      width: 24px;
      height: 24px;
      color: var(--primary);
    }
    
    .photo-upload-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .photo-upload-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }
    
    .photo-preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      margin-top: 16px;
    }
    
    .photo-preview {
      position: relative;
      aspect-ratio: 1;
      border-radius: var(--radius-sm);
      overflow: hidden;
      background: var(--surface-raised);
    }
    
    .photo-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .photo-remove {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 24px;
      height: 24px;
      background: oklch(0 0 0 / 0.6);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      transition: background 0.15s;
    }
    
    .photo-remove:hover {
      background: var(--danger);
    }
    
    .photo-remove:focus-visible {
      outline: 2px solid white;
      outline-offset: 2px;
    }
    
    .photo-remove svg {
      width: 14px;
      height: 14px;
    }
    
    /* Eco Impact */
    .eco-section {
      background: linear-gradient(135deg, var(--primary-light) 0%, oklch(0.94 0.03 160) 100%);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .eco-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }
    
    .eco-icon {
      width: 40px;
      height: 40px;
      background: var(--surface);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .eco-icon svg {
      width: 22px;
      height: 22px;
      color: var(--primary);
    }
    
    .eco-title {
      font-family: var(--font-display);
      font-weight: 600;
    }
    
    .eco-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }
    
    .eco-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    
    .eco-stat {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 14px 12px;
      text-align: center;
    }
    
    .eco-stat-value {
      font-family: var(--font-display);
      font-size: 22px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .eco-stat-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }
    
    /* Action Buttons */
    .action-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .btn {
      padding: 14px 24px;
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background 0.15s, transform 0.1s;
      border: none;
    }
    
    .btn:active {
      transform: scale(0.98);
    }
    
    .btn:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .btn svg {
      width: 18px;
      height: 18px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--primary-hover);
    }
    
    .btn-secondary {
      background: var(--surface);
      color: var(--text);
      border: 2px solid var(--border);
    }
    
    .btn-secondary:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }
    
    /* Jobs List */
    .jobs-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .job-card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 16px;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: box-shadow 0.15s, transform 0.15s;
    }
    
    .job-card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    .job-card:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .job-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .job-customer {
      font-weight: 600;
    }
    
    .job-address {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 2px;
    }
    
    .job-status {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .job-status.pending {
      background: var(--warning-light);
      color: oklch(0.45 0.14 75);
    }
    
    .job-status.confirmed {
      background: var(--success-light);
      color: oklch(0.40 0.12 160);
    }
    
    .job-status.completed {
      background: var(--surface-raised);
      color: var(--text-muted);
    }
    
    .job-details {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    
    .job-detail {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-muted);
    }
    
    .job-detail svg {
      width: 16px;
      height: 16px;
    }
    
    .job-price {
      font-weight: 600;
      color: var(--success);
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 48px 24px;
    }
    
    .empty-icon {
      width: 64px;
      height: 64px;
      background: var(--surface-raised);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
    }
    
    .empty-icon svg {
      width: 32px;
      height: 32px;
      color: var(--text-light);
    }
    
    .empty-title {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .empty-text {
      color: var(--text-muted);
      font-size: 14px;
    }
    
    /* Upsell Section */
    .upsell-section {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .upsell-overlay {
      position: absolute;
      inset: 0;
      background: oklch(1 0 0 / 0.8);
      backdrop-filter: blur(2px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px;
      text-align: center;
    }
    
    .upsell-badge {
      background: var(--accent);
      color: white;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    
    .upsell-title {
      font-family: var(--font-display);
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .upsell-text {
      font-size: 13px;
      color: var(--text-muted);
    }
    
    .upsell-preview {
      opacity: 0.4;
    }
    
    /* Bottom Tab Bar */
    .tab-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--surface);
      border-top: 1px solid var(--border);
      display: flex;
      padding: 8px 16px;
      padding-bottom: max(8px, env(safe-area-inset-bottom));
      z-index: 100;
    }
    
    .tab-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-muted);
      border-radius: var(--radius);
      transition: color 0.15s, background 0.15s;
    }
    
    .tab-item:hover {
      background: var(--surface-raised);
    }
    
    .tab-item:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .tab-item.active {
      color: var(--primary);
    }
    
    .tab-item svg {
      width: 24px;
      height: 24px;
    }
    
    .tab-item span {
      font-size: 11px;
      font-weight: 500;
    }
    
    /* Quote Preview Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: oklch(0 0 0 / 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 200;
    }
    
    .modal-backdrop.visible {
      display: flex;
    }
    
    .modal {
      background: var(--surface);
      border-radius: var(--radius-lg);
      max-width: 480px;
      width: 100%;
      max-height: 90vh;
      overflow: auto;
      box-shadow: var(--shadow-lg);
    }
    
    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .modal-title {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 700;
    }
    
    .modal-close {
      width: 36px;
      height: 36px;
      border: none;
      background: var(--surface-raised);
      border-radius: var(--radius-sm);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      transition: background 0.15s;
    }
    
    .modal-close:hover {
      background: var(--border);
    }
    
    .modal-close:focus-visible {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    .modal-close svg {
      width: 20px;
      height: 20px;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 10px;
    }
    
    .modal-footer .btn {
      flex: 1;
    }
    
    /* Quote Detail */
    .quote-section {
      margin-bottom: 20px;
    }
    
    .quote-section:last-child {
      margin-bottom: 0;
    }
    
    .quote-section-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }
    
    .quote-items-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .quote-item-row {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
    }
    
    .quote-item-name {
      color: var(--text);
    }
    
    .quote-item-qty {
      color: var(--text-muted);
    }
    
    .quote-total-row {
      display: flex;
      justify-content: space-between;
      padding-top: 12px;
      border-top: 1px solid var(--border);
      margin-top: 12px;
    }
    
    .quote-total-label {
      font-weight: 600;
    }
    
    .quote-total-value {
      font-family: var(--font-display);
      font-size: 20px;
      font-weight: 700;
      color: var(--success);
    }
    
    /* Form Styles */
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
      margin-bottom: 6px;
    }
    
    .form-input {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 15px;
      font-family: var(--font-sans);
      transition: border-color 0.15s, box-shadow 0.15s;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }
    
    .form-input::placeholder {
      color: var(--text-light);
    }
    
    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: var(--text);
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      font-size: 14px;
      font-weight: 500;
      box-shadow: var(--shadow-lg);
      opacity: 0;
      transition: opacity 0.2s, transform 0.2s;
      z-index: 300;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    
    .toast svg {
      width: 18px;
      height: 18px;
    }
    
    /* Print Styles */
    @media print {
      body {
        background: white;
        font-size: 12pt;
      }
      
      .header, .tab-bar, .demo-banner, .action-section, .modal-backdrop, .toast {
        display: none !important;
      }
      
      .app {
        display: block !important;
      }
      
      .main {
        padding: 0;
        max-width: 100%;
      }
      
      .tab-content {
        display: block !important;
        page-break-inside: avoid;
      }
      
      .print-header {
        display: block !important;
        text-align: center;
        margin-bottom: 24pt;
        padding-bottom: 16pt;
        border-bottom: 2px solid #333;
      }
      
      .print-header h1 {
        font-size: 24pt;
        font-weight: bold;
        margin-bottom: 4pt;
      }
      
      .print-header p {
        font-size: 10pt;
        color: #666;
      }
      
      .truck-section, .selected-items, .eco-section, .photo-section {
        box-shadow: none;
        border: 1px solid #ddd;
        break-inside: avoid;
      }
      
      .truck-visual {
        height: 100px;
      }
      
      .item-grid, .upsell-section {
        display: none !important;
      }
    }
    
    .print-header {
      display: none;
    }
    
    /* Desktop adjustments */
    @media (min-width: 768px) {
      .main {
        padding: 24px;
        padding-bottom: 100px;
      }
      
      .item-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      }
      
      .truck-visual {
        height: 180px;
      }
      
      .action-section {
        flex-direction: row;
      }
      
      .action-section .btn {
        flex: 1;
      }
    }
    
    /* Live region for screen readers */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <!-- Lock Screen -->
  <div class="lock-screen" id="lockScreen">
    <div class="lock-card">
      <div class="lock-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="1" y="3" width="15" height="13" rx="2"></rect>
          <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
          <circle cx="5.5" cy="18.5" r="2.5"></circle>
          <circle cx="18.5" cy="18.5" r="2.5"></circle>
        </svg>
      </div>
      <h1 class="lock-title">McJunk QuickQuote</h1>
      <p class="lock-subtitle">Enter your access key to get started</p>
      <form id="lockForm">
        <label for="accessKey" class="sr-only">Access Key</label>
        <input type="text" id="accessKey" class="lock-input" placeholder="Access Key" autocomplete="off" required aria-describedby="keyError">
        <span id="keyError" class="sr-only" aria-live="polite"></span>
        <button type="submit" class="lock-btn">Unlock</button>
      </form>
    </div>
  </div>

  <!-- Main App -->
  <div class="app" id="app">
    <!-- Demo Banner -->
    <div class="demo-banner" id="demoBanner" role="status">
      <div class="demo-banner-text">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        Sample data loaded. Try the estimator or create your own quote.
      </div>
      <button class="demo-banner-close" id="closeBanner" aria-label="Dismiss demo banner">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-brand">
        <div class="header-logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="1" y="3" width="15" height="13" rx="2"></rect>
            <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
            <circle cx="5.5" cy="18.5" r="2.5"></circle>
            <circle cx="18.5" cy="18.5" r="2.5"></circle>
          </svg>
        </div>
        <h1 class="header-title">QuickQuote</h1>
      </div>
      <div class="header-actions">
        <button class="icon-btn" id="shareBtn" aria-label="Share quote">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
        </button>
        <button class="icon-btn" id="printBtn" aria-label="Print quote">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main" id="mainContent">
      <!-- Print Header (only visible when printing) -->
      <div class="print-header">
        <h1>McJunk QuickQuote Estimate</h1>
        <p>Raleigh's Greenest Junk Removal | (919) 850-4377 | mc-junk.com</p>
      </div>

      <!-- Estimate Tab -->
      <div class="tab-content active" id="tabEstimate" role="tabpanel" aria-labelledby="tabBtnEstimate">
        <!-- Truck Visualizer -->
        <section class="truck-section" aria-labelledby="truckTitle">
          <div class="truck-header">
            <h2 class="truck-title" id="truckTitle">Truck Load</h2>
            <span class="truck-fill-badge" id="truckFillBadge">0% full</span>
          </div>
          <div class="truck-visual" role="img" aria-label="Visual representation of truck fill level">
            <div class="truck-bed" id="truckBed"></div>
            <div class="truck-lines">
              <div class="truck-line" style="bottom: 25%"><span class="truck-line-label">1/4</span></div>
              <div class="truck-line" style="bottom: 50%"><span class="truck-line-label">1/2</span></div>
              <div class="truck-line" style="bottom: 75%"><span class="truck-line-label">3/4</span></div>
              <div class="truck-line" style="bottom: 100%"><span class="truck-line-label">Full</span></div>
            </div>
            <div class="truck-items-preview" id="truckItemsPreview" aria-hidden="true"></div>
          </div>
          <div class="price-display">
            <div class="price-label">Estimated Price</div>
            <div class="price-amount" id="priceAmount" aria-live="polite">$0</div>
            <div class="price-range" id="priceRange">Add items to get a price</div>
          </div>
        </section>

        <!-- Selected Items -->
        <section class="selected-items" id="selectedSection" style="display: none;" aria-labelledby="selectedTitle">
          <div class="selected-header">
            <h2 class="section-title" id="selectedTitle">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <polyline points="9 11 12 14 22 4"></polyline>
                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
              </svg>
              Your Items
            </h2>
            <button class="clear-btn" id="clearAllBtn">Clear all</button>
          </div>
          <div class="selected-list" id="selectedList" aria-live="polite"></div>
        </section>

        <!-- Item Grid -->
        <section aria-labelledby="itemsTitle">
          <h2 class="section-title" id="itemsTitle">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="9" y1="21" x2="9" y2="9"></line>
            </svg>
            Common Items
          </h2>
          <div class="item-grid" id="itemGrid" role="list"></div>
        </section>

        <!-- Photo Quote -->
        <section class="photo-section" aria-labelledby="photoTitle">
          <h2 class="section-title" id="photoTitle">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
              <circle cx="12" cy="13" r="4"></circle>
            </svg>
            Photo Quote
          </h2>
          <div class="photo-upload-area" id="photoUploadArea" tabindex="0" role="button" aria-describedby="photoDesc">
            <div class="photo-upload-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                <circle cx="12" cy="13" r="4"></circle>
              </svg>
            </div>
            <div class="photo-upload-title">Take or upload photos</div>
            <div class="photo-upload-subtitle" id="photoDesc">We'll review and give you an exact price</div>
          </div>
          <input type="file" id="photoInput" accept="image/*" capture="environment" multiple hidden aria-label="Upload photos">
          <div class="photo-preview-grid" id="photoPreviewGrid"></div>
        </section>

        <!-- Eco Impact -->
        <section class="eco-section" aria-labelledby="ecoTitle">
          <div class="eco-header">
            <div class="eco-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
            </div>
            <div>
              <div class="eco-title" id="ecoTitle">Your Green Impact</div>
              <div class="eco-subtitle">80%+ diverted from landfills</div>
            </div>
          </div>
          <div class="eco-stats">
            <div class="eco-stat">
              <div class="eco-stat-value" id="ecoWeight">0</div>
              <div class="eco-stat-label">lbs saved</div>
            </div>
            <div class="eco-stat">
              <div class="eco-stat-value" id="ecoTrees">0</div>
              <div class="eco-stat-label">trees equiv.</div>
            </div>
            <div class="eco-stat">
              <div class="eco-stat-value" id="ecoCO2">0</div>
              <div class="eco-stat-label">lbs CO2</div>
            </div>
          </div>
        </section>

        <!-- Actions -->
        <div class="action-section">
          <button class="btn btn-primary" id="bookNowBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            Book Now - Save $20
          </button>
          <button class="btn btn-secondary" id="saveQuoteBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
              <polyline points="17 21 17 13 7 13 7 21"></polyline>
              <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
            Save Quote
          </button>
        </div>
      </div>

      <!-- Jobs Tab -->
      <div class="tab-content" id="tabJobs" role="tabpanel" aria-labelledby="tabBtnJobs">
        <h2 class="section-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
          Recent Quotes
        </h2>
        <div class="jobs-list" id="jobsList" aria-live="polite"></div>
      </div>

      <!-- Customers Tab (Upsell) -->
      <div class="tab-content" id="tabCustomers" role="tabpanel" aria-labelledby="tabBtnCustomers">
        <section class="upsell-section">
          <div class="upsell-preview">
            <h2 class="section-title">Customer Database</h2>
            <div class="empty-state">
              <div class="empty-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
              </div>
              <p class="empty-title">Track Repeat Customers</p>
              <p class="empty-text">Job history, contact info, notes</p>
            </div>
          </div>
          <div class="upsell-overlay">
            <span class="upsell-badge">Coming Soon</span>
            <p class="upsell-title">Full Version Unlocks This</p>
            <p class="upsell-text">Customer management, job history, follow-up reminders</p>
          </div>
        </section>
      </div>
    </main>

    <!-- Bottom Tab Bar -->
    <nav class="tab-bar" role="tablist" aria-label="Main navigation">
      <button class="tab-item active" id="tabBtnEstimate" role="tab" aria-selected="true" aria-controls="tabEstimate">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="1" y="3" width="15" height="13" rx="2"></rect>
          <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
          <circle cx="5.5" cy="18.5" r="2.5"></circle>
          <circle cx="18.5" cy="18.5" r="2.5"></circle>
        </svg>
        <span>Estimate</span>
      </button>
      <button class="tab-item" id="tabBtnJobs" role="tab" aria-selected="false" aria-controls="tabJobs">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <span>Quotes</span>
      </button>
      <button class="tab-item" id="tabBtnCustomers" role="tab" aria-selected="false" aria-controls="tabCustomers">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <span>Customers</span>
      </button>
    </nav>
  </div>

  <!-- Quote Modal -->
  <div class="modal-backdrop" id="quoteModal" role="dialog" aria-modal="true" aria-labelledby="quoteModalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="quoteModalTitle">Quote Summary</h2>
        <button class="modal-close" id="closeQuoteModal" aria-label="Close modal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="quote-section">
          <div class="quote-section-title">Items</div>
          <div class="quote-items-list" id="quoteItemsList"></div>
        </div>
        <div class="quote-section">
          <div class="quote-section-title">Customer Info</div>
          <div class="form-group">
            <label class="form-label" for="customerName">Name</label>
            <input type="text" id="customerName" class="form-input" placeholder="Customer name">
          </div>
          <div class="form-group">
            <label class="form-label" for="customerPhone">Phone</label>
            <input type="tel" id="customerPhone" class="form-input" placeholder="(919) 555-0123">
          </div>
          <div class="form-group">
            <label class="form-label" for="customerAddress">Pickup Address</label>
            <input type="text" id="customerAddress" class="form-input" placeholder="123 Main St, Raleigh, NC">
          </div>
        </div>
        <div class="quote-total-row">
          <span class="quote-total-label">Estimated Total</span>
          <span class="quote-total-value" id="quoteTotal">$0</span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelQuoteBtn">Cancel</button>
        <button class="btn btn-primary" id="confirmQuoteBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Save Quote
        </button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
    <span id="toastMessage">Saved!</span>
  </div>

  <script>
    // Anti-scrape protection
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      // Block F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
      if (e.key === 'F12' || 
          (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) ||
          (e.ctrlKey && e.key === 'u')) {
        e.preventDefault();
      }
    });
    // DevTools detection
    setInterval(() => {
      const start = performance.now();
      console.clear();
      const end = performance.now();
      if (end - start > 100) {
        document.body.innerHTML = '<div style="padding:40px;text-align:center;font-family:sans-serif;">Access denied</div>';
      }
    }, 2000);

    // Access key validation (runtime computation, not precomputed)
    const _E = [109,99,106,114,50,48,50,54];
    const _K = _E.map(c => String.fromCharCode(c)).join('');
    function _h(s){let h=0;for(let i=0;i<s.length;i++){h=((h<<5)-h)+s.charCodeAt(i);h|=0;}return h;}
    const _V = _h(_K);

    // DOM Elements
    const lockScreen = document.getElementById('lockScreen');
    const lockForm = document.getElementById('lockForm');
    const accessKeyInput = document.getElementById('accessKey');
    const keyError = document.getElementById('keyError');
    const app = document.getElementById('app');
    const demoBanner = document.getElementById('demoBanner');
    const closeBanner = document.getElementById('closeBanner');

    // Item catalog with realistic Raleigh data
    const itemCatalog = [
      { id: 'sofa', name: 'Sofa/Couch', icon: 'sofa', size: 0.15, weight: 150 },
      { id: 'mattress', name: 'Mattress', icon: 'bed', size: 0.10, weight: 80 },
      { id: 'dresser', name: 'Dresser', icon: 'cabinet', size: 0.08, weight: 120 },
      { id: 'table', name: 'Table', icon: 'table', size: 0.07, weight: 60 },
      { id: 'chairs', name: 'Chairs (set)', icon: 'chair', size: 0.05, weight: 40 },
      { id: 'appliance', name: 'Appliance', icon: 'appliance', size: 0.12, weight: 150 },
      { id: 'tv', name: 'TV/Monitor', icon: 'tv', size: 0.03, weight: 30 },
      { id: 'boxes', name: 'Boxes (10)', icon: 'box', size: 0.08, weight: 50 },
      { id: 'debris', name: 'Yard Debris', icon: 'leaf', size: 0.10, weight: 100 },
      { id: 'lumber', name: 'Lumber/Wood', icon: 'wood', size: 0.08, weight: 80 },
      { id: 'exercise', name: 'Exercise Equip', icon: 'dumbbell', size: 0.10, weight: 100 },
      { id: 'misc', name: 'Misc Items', icon: 'misc', size: 0.05, weight: 40 }
    ];

    // Pricing tiers (based on truck load)
    const pricingTiers = [
      { min: 0, max: 0.125, label: '1/8 truck', price: 119, range: '$99 - $139' },
      { min: 0.125, max: 0.25, label: '1/4 truck', price: 199, range: '$179 - $219' },
      { min: 0.25, max: 0.375, label: '3/8 truck', price: 279, range: '$259 - $299' },
      { min: 0.375, max: 0.5, label: '1/2 truck', price: 349, range: '$329 - $369' },
      { min: 0.5, max: 0.625, label: '5/8 truck', price: 419, range: '$399 - $439' },
      { min: 0.625, max: 0.75, label: '3/4 truck', price: 479, range: '$459 - $499' },
      { min: 0.75, max: 0.875, label: '7/8 truck', price: 539, range: '$519 - $559' },
      { min: 0.875, max: 1.0, label: 'Full truck', price: 599, range: '$579 - $619' },
      { min: 1.0, max: 2.0, label: 'Multiple loads', price: 899, range: '$799+' }
    ];

    // State
    let selectedItems = {};
    let photos = [];
    let savedQuotes = [];

    // Demo data (Raleigh-area realistic jobs)
    const demoQuotes = [
      {
        id: 'demo1',
        customer: 'Sarah Mitchell',
        address: '4521 Six Forks Rd, Raleigh',
        phone: '(919) 555-2847',
        items: { sofa: 1, chairs: 1, boxes: 2 },
        total: 279,
        status: 'confirmed',
        date: new Date(Date.now() - 86400000).toLocaleDateString()
      },
      {
        id: 'demo2',
        customer: 'Robert Chen',
        address: '812 Oberlin Rd, Raleigh',
        phone: '(919) 555-9132',
        items: { mattress: 2, dresser: 1, tv: 1 },
        total: 349,
        status: 'pending',
        date: new Date().toLocaleDateString()
      },
      {
        id: 'demo3',
        customer: 'Henderson Estate',
        address: '2901 Hillsborough St, Raleigh',
        phone: '(919) 555-6721',
        items: { sofa: 2, mattress: 3, dresser: 2, appliance: 1, boxes: 4 },
        total: 599,
        status: 'completed',
        date: new Date(Date.now() - 172800000).toLocaleDateString()
      }
    ];

    // SVG Icons
    const icons = {
      sofa: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"/><path d="M3 11v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"/><path d="M5 18v2"/><path d="M19 18v2"/></svg>',
      bed: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>',
      cabinet: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="12" y1="3" x2="12" y2="21"/></svg>',
      table: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="3" rx="1"/><path d="M4 10v9"/><path d="M20 10v9"/></svg>',
      chair: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"/><path d="M3 16h18"/><path d="M5 16v4"/><path d="M19 16v4"/><rect x="5" y="9" width="14" height="7" rx="1"/></svg>',
      appliance: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="4" y1="10" x2="20" y2="10"/><circle cx="8" cy="6" r="1"/></svg>',
      tv: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="15" rx="2"/><polyline points="17 2 12 7 7 2"/></svg>',
      box: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>',
      leaf: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>',
      wood: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="6" rx="1"/><rect x="4" y="14" width="16" height="6" rx="1"/></svg>',
      dumbbell: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6.5 6.5 11 11"/><path d="m21 21-1-1"/><path d="m3 3 1 1"/><path d="m18 22 4-4"/><path d="m2 6 4-4"/><path d="m3 10 7-7"/><path d="m14 21 7-7"/></svg>',
      misc: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>'
    };

    // IndexedDB Setup
    const DB_NAME = 'mcjunk-quickquote';
    const DB_VERSION = 1;
    let db;

    function openDB() {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(DB_NAME, DB_VERSION);
        request.onerror = () => reject(request.error);
        request.onsuccess = () => {
          db = request.result;
          resolve(db);
        };
        request.onupgradeneeded = (e) => {
          const database = e.target.result;
          if (!database.objectStoreNames.contains('quotes')) {
            database.createObjectStore('quotes', { keyPath: 'id' });
          }
          if (!database.objectStoreNames.contains('settings')) {
            database.createObjectStore('settings', { keyPath: 'key' });
          }
        };
      });
    }

    async function saveQuote(quote) {
      return new Promise((resolve, reject) => {
        const tx = db.transaction('quotes', 'readwrite');
        const store = tx.objectStore('quotes');
        store.put(quote);
        tx.oncomplete = () => resolve();
        tx.onerror = () => reject(tx.error);
      });
    }

    async function getAllQuotes() {
      return new Promise((resolve, reject) => {
        const tx = db.transaction('quotes', 'readonly');
        const store = tx.objectStore('quotes');
        const request = store.getAll();
        request.onsuccess = () => resolve(request.result);
        request.onerror = () => reject(request.error);
      });
    }

    async function getSetting(key) {
      return new Promise((resolve, reject) => {
        const tx = db.transaction('settings', 'readonly');
        const store = tx.objectStore('settings');
        const request = store.get(key);
        request.onsuccess = () => resolve(request.result?.value);
        request.onerror = () => reject(request.error);
      });
    }

    async function setSetting(key, value) {
      return new Promise((resolve, reject) => {
        const tx = db.transaction('settings', 'readwrite');
        const store = tx.objectStore('settings');
        store.put({ key, value });
        tx.oncomplete = () => resolve();
        tx.onerror = () => reject(tx.error);
      });
    }

    // Lock screen handling
    lockForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const inputValue = accessKeyInput.value.trim();
      const inputHash = _h(inputValue);
      
      if (inputHash === _V) {
        lockScreen.style.display = 'none';
        app.classList.add('visible');
        setSetting('unlocked', true);
      } else {
        accessKeyInput.classList.add('error');
        keyError.textContent = 'Invalid access key. Try again.';
        setTimeout(() => accessKeyInput.classList.remove('error'), 400);
      }
    });

    // Tab navigation
    const tabBtns = document.querySelectorAll('.tab-item');
    const tabContents = document.querySelectorAll('.tab-content');

    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('aria-controls');
        
        tabBtns.forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-selected', 'false');
        });
        tabContents.forEach(c => c.classList.remove('active'));
        
        btn.classList.add('active');
        btn.setAttribute('aria-selected', 'true');
        document.getElementById(targetId).classList.add('active');
      });
    });

    // Render item grid
    function renderItemGrid() {
      const grid = document.getElementById('itemGrid');
      grid.innerHTML = itemCatalog.map(item => `
        <button class="item-card ${selectedItems[item.id] ? 'selected' : ''}" 
                data-id="${item.id}" 
                role="listitem"
                aria-pressed="${selectedItems[item.id] ? 'true' : 'false'}">
          <div class="item-icon-wrap">${icons[item.icon]}</div>
          <span class="item-name">${item.name}</span>
          ${selectedItems[item.id] ? `<span class="item-qty">x${selectedItems[item.id]}</span>` : ''}
        </button>
      `).join('');

      grid.querySelectorAll('.item-card').forEach(card => {
        card.addEventListener('click', () => {
          const id = card.dataset.id;
          if (!selectedItems[id]) {
            selectedItems[id] = 1;
          } else {
            selectedItems[id]++;
          }
          updateUI();
        });
      });
    }

    // Render selected items
    function renderSelectedItems() {
      const section = document.getElementById('selectedSection');
      const list = document.getElementById('selectedList');
      const itemIds = Object.keys(selectedItems);

      if (itemIds.length === 0) {
        section.style.display = 'none';
        return;
      }

      section.style.display = 'block';
      list.innerHTML = itemIds.map(id => {
        const item = itemCatalog.find(i => i.id === id);
        const qty = selectedItems[id];
        return `
          <div class="selected-item">
            <div class="selected-item-icon">${icons[item.icon]}</div>
            <div class="selected-item-info">
              <div class="selected-item-name">${item.name}</div>
              <div class="selected-item-size">${Math.round(item.size * 100 * qty)}% of truck</div>
            </div>
            <div class="qty-controls">
              <button class="qty-btn" data-id="${id}" data-action="minus" aria-label="Remove one ${item.name}">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
              <span class="qty-value">${qty}</span>
              <button class="qty-btn" data-id="${id}" data-action="plus" aria-label="Add one ${item.name}">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              </button>
            </div>
          </div>
        `;
      }).join('');

      list.querySelectorAll('.qty-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.dataset.id;
          const action = btn.dataset.action;
          if (action === 'plus') {
            selectedItems[id]++;
          } else {
            selectedItems[id]--;
            if (selectedItems[id] <= 0) {
              delete selectedItems[id];
            }
          }
          updateUI();
        });
      });
    }

    // Calculate totals
    function calculateTotals() {
      let totalSize = 0;
      let totalWeight = 0;

      Object.entries(selectedItems).forEach(([id, qty]) => {
        const item = itemCatalog.find(i => i.id === id);
        totalSize += item.size * qty;
        totalWeight += item.weight * qty;
      });

      const tier = pricingTiers.find(t => totalSize >= t.min && totalSize < t.max) || pricingTiers[pricingTiers.length - 1];
      
      return {
        size: Math.min(totalSize, 1),
        weight: totalWeight,
        price: tier.price,
        range: tier.range,
        label: tier.label
      };
    }

    // Update truck visualization
    function updateTruckVisual(size) {
      const bed = document.getElementById('truckBed');
      const badge = document.getElementById('truckFillBadge');
      const preview = document.getElementById('truckItemsPreview');

      const fillPercent = Math.min(size * 100, 100);
      bed.style.height = `${fillPercent}%`;
      badge.textContent = `${Math.round(fillPercent)}% full`;

      // Show item icons in truck
      const itemIcons = [];
      Object.entries(selectedItems).forEach(([id, qty]) => {
        const item = itemCatalog.find(i => i.id === id);
        for (let i = 0; i < Math.min(qty, 5); i++) {
          itemIcons.push(`<div class="truck-item-icon">${icons[item.icon]}</div>`);
        }
      });
      preview.innerHTML = itemIcons.slice(0, 20).join('');
    }

    // Update eco stats
    function updateEcoStats(weight) {
      const saved = Math.round(weight * 0.8); // 80% diverted
      const trees = (saved / 500).toFixed(1); // Rough tree equivalent
      const co2 = Math.round(saved * 0.5); // CO2 estimate

      document.getElementById('ecoWeight').textContent = saved;
      document.getElementById('ecoTrees').textContent = trees;
      document.getElementById('ecoCO2').textContent = co2;
    }

    // Update price display
    function updatePriceDisplay(totals) {
      const priceEl = document.getElementById('priceAmount');
      const rangeEl = document.getElementById('priceRange');

      if (totals.size === 0) {
        priceEl.textContent = '$0';
        rangeEl.textContent = 'Add items to see estimate';
      } else {
        priceEl.textContent = `$${totals.price}`;
        rangeEl.textContent = `${totals.label} - ${totals.range}`;
      }
    }

    // Main UI update
    function updateUI() {
      const totals = calculateTotals();
      renderItemGrid();
      renderSelectedItems();
      updateTruckVisual(totals.size);
      updatePriceDisplay(totals);
      updateEcoStats(totals.weight);
    }

    // Clear all items
    document.getElementById('clearAllBtn').addEventListener('click', () => {
      selectedItems = {};
      updateUI();
    });

    // Photo upload
    const photoUploadArea = document.getElementById('photoUploadArea');
    const photoInput = document.getElementById('photoInput');
    const photoPreviewGrid = document.getElementById('photoPreviewGrid');

    photoUploadArea.addEventListener('click', () => photoInput.click());
    photoUploadArea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        photoInput.click();
      }
    });

    photoInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      files.forEach(file => {
        const reader = new FileReader();
        reader.onload = (ev) => {
          photos.push(ev.target.result);
          renderPhotoPreviews();
        };
        reader.readAsDataURL(file);
      });
    });

    function renderPhotoPreviews() {
      photoPreviewGrid.innerHTML = photos.map((src, idx) => `
        <div class="photo-preview">
          <img src="${src}" alt="Photo ${idx + 1} of junk to remove">
          <button class="photo-remove" data-idx="${idx}" aria-label="Remove photo ${idx + 1}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
      `).join('');

      photoPreviewGrid.querySelectorAll('.photo-remove').forEach(btn => {
        btn.addEventListener('click', () => {
          photos.splice(parseInt(btn.dataset.idx), 1);
          renderPhotoPreviews();
        });
      });
    }

    // Quote modal
    const quoteModal = document.getElementById('quoteModal');
    const closeQuoteModalBtn = document.getElementById('closeQuoteModal');
    const cancelQuoteBtn = document.getElementById('cancelQuoteBtn');
    const confirmQuoteBtn = document.getElementById('confirmQuoteBtn');

    function openQuoteModal() {
      const totals = calculateTotals();
      document.getElementById('quoteTotal').textContent = `$${totals.price}`;
      
      const itemsList = document.getElementById('quoteItemsList');
      itemsList.innerHTML = Object.entries(selectedItems).map(([id, qty]) => {
        const item = itemCatalog.find(i => i.id === id);
        return `
          <div class="quote-item-row">
            <span class="quote-item-name">${item.name}</span>
            <span class="quote-item-qty">x${qty}</span>
          </div>
        `;
      }).join('') || '<p style="color: var(--text-muted); font-size: 14px;">No items selected</p>';

      quoteModal.classList.add('visible');
      document.getElementById('customerName').focus();
    }

    function closeQuoteModal() {
      quoteModal.classList.remove('visible');
    }

    document.getElementById('saveQuoteBtn').addEventListener('click', openQuoteModal);
    closeQuoteModalBtn.addEventListener('click', closeQuoteModal);
    cancelQuoteBtn.addEventListener('click', closeQuoteModal);

    confirmQuoteBtn.addEventListener('click', async () => {
      const totals = calculateTotals();
      const quote = {
        id: 'q' + Date.now(),
        customer: document.getElementById('customerName').value || 'New Quote',
        address: document.getElementById('customerAddress').value || '',
        phone: document.getElementById('customerPhone').value || '',
        items: { ...selectedItems },
        total: totals.price,
        status: 'pending',
        date: new Date().toLocaleDateString()
      };

      await saveQuote(quote);
      savedQuotes.push(quote);
      renderJobsList();
      closeQuoteModal();
      showToast('Quote saved!');

      // Clear form
      document.getElementById('customerName').value = '';
      document.getElementById('customerAddress').value = '';
      document.getElementById('customerPhone').value = '';
      selectedItems = {};
      updateUI();
    });

    // Book now button
    document.getElementById('bookNowBtn').addEventListener('click', () => {
      window.open('https://www.mc-junk.com/book-junk-removal-now/', '_blank');
    });

    // Jobs list rendering
    function renderJobsList() {
      const list = document.getElementById('jobsList');
      const allQuotes = [...demoQuotes, ...savedQuotes].sort((a, b) => {
        return new Date(b.date) - new Date(a.date);
      });

      if (allQuotes.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
            </div>
            <p class="empty-title">No quotes yet</p>
            <p class="empty-text">Create your first estimate in the Estimate tab</p>
          </div>
        `;
        return;
      }

      list.innerHTML = allQuotes.map(q => {
        const itemCount = Object.values(q.items).reduce((a, b) => a + b, 0);
        return `
          <article class="job-card" tabindex="0" role="button" aria-label="Quote for ${q.customer}">
            <div class="job-header">
              <div>
                <div class="job-customer">${q.customer}</div>
                <div class="job-address">${q.address || 'No address'}</div>
              </div>
              <span class="job-status ${q.status}">${q.status.charAt(0).toUpperCase() + q.status.slice(1)}</span>
            </div>
            <div class="job-details">
              <span class="job-detail">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                ${q.date}
              </span>
              <span class="job-detail">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                ${itemCount} items
              </span>
              <span class="job-detail job-price">$${q.total}</span>
            </div>
          </article>
        `;
      }).join('');
    }

    // Share functionality
    document.getElementById('shareBtn').addEventListener('click', async () => {
      const totals = calculateTotals();
      const itemList = Object.entries(selectedItems)
        .map(([id, qty]) => {
          const item = itemCatalog.find(i => i.id === id);
          return `${item.name} x${qty}`;
        })
        .join('\n');

      const shareText = `McJunk QuickQuote Estimate

Items:
${itemList || 'No items selected'}

Estimated Price: $${totals.price}
${totals.label}

Book online and save $20: mc-junk.com/book-junk-removal-now/
Call: (919) 850-4377`;

      if (navigator.share) {
        try {
          await navigator.share({
            title: 'McJunk QuickQuote',
            text: shareText
          });
          showToast('Shared!');
        } catch (err) {
          if (err.name !== 'AbortError') {
            fallbackCopy(shareText);
          }
        }
      } else {
        fallbackCopy(shareText);
      }
    });

    function fallbackCopy(text) {
      navigator.clipboard.writeText(text).then(() => {
        showToast('Copied to clipboard!');
      });
    }

    // Print functionality
    document.getElementById('printBtn').addEventListener('click', () => {
      window.print();
    });

    // Demo banner close
    closeBanner.addEventListener('click', () => {
      demoBanner.style.display = 'none';
      setSetting('bannerDismissed', true);
    });

    // Toast notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.add('visible');
      setTimeout(() => toast.classList.remove('visible'), 2500);
    }

    // Initialize app
    async function init() {
      await openDB();
      
      // Check if previously unlocked (for demo purposes)
      const unlocked = await getSetting('unlocked');
      if (unlocked) {
        lockScreen.style.display = 'none';
        app.classList.add('visible');
      }

      // Check if banner was dismissed
      const bannerDismissed = await getSetting('bannerDismissed');
      if (bannerDismissed) {
        demoBanner.style.display = 'none';
      }

      // Load saved quotes
      savedQuotes = await getAllQuotes();
      
      // Initialize UI
      updateUI();
      renderJobsList();
    }

    init();

    // Keyboard navigation for modal
    quoteModal.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeQuoteModal();
      }
    });

    // Focus trap for modal
    quoteModal.addEventListener('keydown', (e) => {
      if (e.key !== 'Tab') return;
      
      const focusable = quoteModal.querySelectorAll('button, input, [tabindex]:not([tabindex="-1"])');
      const first = focusable[0];
      const last = focusable[focusable.length - 1];

      if (e.shiftKey && document.activeElement === first) {
        e.preventDefault();
        last.focus();
      } else if (!e.shiftKey && document.activeElement === last) {
        e.preventDefault();
        first.focus();
      }
    });
  </script>
</body>
</html>
