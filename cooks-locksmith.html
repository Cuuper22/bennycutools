<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <title>Locksmith Service & Cost Guide | Cook's Locksmith ‚Äî Louisville, KY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 50:'#fefce8', 100:'#fef9c3', 200:'#fef08a', 300:'#fde047', 400:'#facc15', 500:'#eab308', 600:'#ca8a04', 700:'#a16207', 800:'#854d0e', 900:'#713f12' },
                        dark: { 700:'#1a1a2e', 800:'#12121f', 900:'#0a0a14' },
                        accent: { 400:'#60a5fa', 500:'#3b82f6', 600:'#2563eb' }
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .step-enter { animation: stepIn 0.35s ease-out; }
        @keyframes stepIn { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
        .pulse-glow { animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { box-shadow:0 0 8px rgba(234,179,8,.3); } to { box-shadow:0 0 20px rgba(234,179,8,.5); } }
        .urgent-pulse { animation: urgentPulse 1.5s ease-in-out infinite; }
        @keyframes urgentPulse { 0%,100%{opacity:1} 50%{opacity:.6} }
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body class="bg-dark-900 text-white font-sans min-h-screen">

    <!-- Header -->
    <header class="bg-dark-800/90 backdrop-blur border-b border-dark-700/50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-brand-500 rounded-lg flex items-center justify-center">
                    <i data-lucide="key-round" class="w-5 h-5 text-dark-900"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-tight">Cook's Locksmith</h1>
                    <p class="text-xs text-gray-400">Louisville, KY ‚Ä¢ 24/7 ‚Ä¢ (502) 964-8238</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-xs bg-green-500/20 text-green-400 px-3 py-1 rounded-full font-medium urgent-pulse">‚óè Open 24/7</span>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Hero -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center gap-2 bg-dark-800 rounded-full px-4 py-2 mb-4">
                <i data-lucide="shield-check" class="w-4 h-4 text-brand-400"></i>
                <span class="text-sm text-gray-400">150+ Years Combined Experience</span>
            </div>
            <h2 class="text-3xl md:text-4xl font-extrabold mb-3">Locksmith Service<br><span class="text-brand-400">Cost Estimator</span></h2>
            <p class="text-gray-400 max-w-lg mx-auto">Find out what your locksmith service will cost ‚Äî instantly. No surprises, no dealer markups.</p>
        </div>

        <!-- Emergency Banner -->
        <div id="emergencyBanner" class="hidden bg-red-500/20 border border-red-500/40 rounded-xl p-4 mb-6 text-center">
            <div class="flex items-center justify-center gap-2 mb-1">
                <i data-lucide="phone" class="w-4 h-4 text-red-400"></i>
                <span class="font-bold text-red-400">Locked Out Right Now?</span>
            </div>
            <p class="text-sm text-gray-300 mb-2">Call now for emergency dispatch:</p>
            <a href="tel:5029648238" class="inline-block bg-red-500 hover:bg-red-400 text-white font-bold px-6 py-2 rounded-lg transition-all">(502) 964-8238</a>
        </div>

        <!-- Step 1: Service Type -->
        <div id="step1" class="step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6">
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="wrench" class="w-5 h-5 text-brand-400"></i> What Do You Need?</h3>
                <p class="text-sm text-gray-400 mb-6">Select your situation and we'll estimate the cost.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="serviceGrid">
                    <button onclick="selectService(this,'lockout-home')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="home" class="w-5 h-5 text-blue-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Home Lockout</div>
                                <div class="text-xs text-gray-400">Locked out of your house</div>
                            </div>
                        </div>
                    </button>
                    <button onclick="selectService(this,'lockout-car')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="car" class="w-5 h-5 text-purple-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Car Lockout / Keys</div>
                                <div class="text-xs text-gray-400">Locked out or lost car keys</div>
                            </div>
                        </div>
                    </button>
                    <button onclick="selectService(this,'rekey')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="key" class="w-5 h-5 text-green-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Rekey / New Locks</div>
                                <div class="text-xs text-gray-400">Moving in, security upgrade, lost keys</div>
                            </div>
                        </div>
                    </button>
                    <button onclick="selectService(this,'keyfob')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="smartphone" class="w-5 h-5 text-amber-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Key Fob / Transponder</div>
                                <div class="text-xs text-gray-400">Replacement key fob ‚Äî save vs dealer</div>
                            </div>
                        </div>
                    </button>
                    <button onclick="selectService(this,'commercial')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-cyan-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="building-2" class="w-5 h-5 text-cyan-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Commercial / Business</div>
                                <div class="text-xs text-gray-400">Office locks, master key, access control</div>
                            </div>
                        </div>
                    </button>
                    <button onclick="selectService(this,'safe')" class="svc-btn bg-dark-700/50 border border-dark-700 rounded-xl p-4 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center flex-shrink-0"><i data-lucide="lock" class="w-5 h-5 text-red-400"></i></div>
                            <div>
                                <div class="font-semibold text-sm">Safe Service</div>
                                <div class="text-xs text-gray-400">Open, repair, or buy a safe</div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Details (dynamic based on service) -->
        <div id="step2" class="hidden step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6" id="detailsPanel">
                <!-- Filled by JS -->
            </div>
            <div class="flex justify-between">
                <button onclick="goStep(1)" class="text-gray-400 hover:text-white font-medium px-6 py-3 transition-all">‚Üê Back</button>
                <button onclick="showEstimate()" class="bg-brand-500 hover:bg-brand-400 text-dark-900 font-bold px-8 py-3 rounded-xl transition-all pulse-glow">See My Estimate ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: Results -->
        <div id="step3" class="hidden step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center gap-2 bg-green-500/20 text-green-400 rounded-full px-4 py-2 text-sm font-medium mb-3">
                        <i data-lucide="check-circle" class="w-4 h-4"></i> Estimate Ready
                    </div>
                    <h3 class="text-2xl font-bold" id="resultTitle">Your Locksmith Estimate</h3>
                </div>

                <!-- Cost -->
                <div class="bg-dark-900/60 rounded-xl p-6 mb-6 text-center">
                    <div class="text-sm text-gray-400 mb-1">Estimated Cost</div>
                    <div class="text-4xl md:text-5xl font-extrabold text-brand-400" id="costDisplay">$75 ‚Äì $150</div>
                    <div class="text-sm text-gray-400 mt-2" id="costNote"></div>
                </div>

                <!-- Dealer Comparison (for key fob) -->
                <div id="dealerCompare" class="hidden bg-green-500/10 border border-green-500/30 rounded-xl p-5 mb-6">
                    <h4 class="font-bold text-green-400 text-sm mb-3 flex items-center gap-2"><i data-lucide="trending-down" class="w-4 h-4"></i> Your Savings vs. the Dealer</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-xs text-gray-400 mb-1">Dealer Price</div>
                            <div class="text-xl font-bold text-red-400 line-through" id="dealerPrice">$350</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-400 mb-1">Cook's Price</div>
                            <div class="text-xl font-bold text-green-400" id="cooksPrice">$150</div>
                        </div>
                    </div>
                    <div class="text-center mt-3 text-sm font-semibold text-green-400" id="savingsAmount">You save ~$200!</div>
                </div>

                <!-- Service Breakdown -->
                <div class="space-y-2 mb-6" id="breakdownList"></div>

                <!-- Trust Signals -->
                <div class="grid grid-cols-3 gap-3 mb-6">
                    <div class="bg-dark-700/30 rounded-lg p-3 text-center">
                        <div class="text-lg font-bold text-brand-400">150+</div>
                        <div class="text-xs text-gray-400">Years Combined Experience</div>
                    </div>
                    <div class="bg-dark-700/30 rounded-lg p-3 text-center">
                        <div class="text-lg font-bold text-brand-400">24/7</div>
                        <div class="text-xs text-gray-400">Emergency Service</div>
                    </div>
                    <div class="bg-dark-700/30 rounded-lg p-3 text-center">
                        <div class="text-lg font-bold text-brand-400">311+</div>
                        <div class="text-xs text-gray-400">Facebook Reviews</div>
                    </div>
                </div>
            </div>

            <!-- Lead Capture -->
            <div id="leadForm" class="bg-gradient-to-br from-brand-600/20 to-dark-800/60 border border-brand-500/30 rounded-2xl p-6 md:p-8 mb-6">
                <h3 class="text-xl font-bold mb-2 text-center">Schedule Your Service</h3>
                <p class="text-sm text-gray-400 text-center mb-6">Get an exact quote ‚Äî no obligation. Cook's team will confirm pricing before any work begins.</p>
                <div class="space-y-4 max-w-md mx-auto">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium text-gray-300 mb-1">Name *</label>
                            <input type="text" id="leadName" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="Your name">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-300 mb-1">Phone *</label>
                            <input type="tel" id="leadPhone" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="(502) 555-0000">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-300 mb-1">Location / Address</label>
                        <input type="text" id="leadAddress" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="Where do you need service?">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-300 mb-1">When Do You Need Service?</label>
                        <select id="leadUrgency" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white focus:border-brand-500 focus:outline-none">
                            <option value="emergency">üö® Right Now ‚Äî Emergency</option>
                            <option value="today">Today</option>
                            <option value="week" selected>This Week</option>
                            <option value="flexible">Flexible / Just Getting a Quote</option>
                        </select>
                    </div>
                    <button onclick="submitLead()" id="submitBtn" class="w-full bg-brand-500 hover:bg-brand-400 text-dark-900 font-bold py-3 rounded-xl transition-all text-lg">Request Service / Quote</button>
                </div>
            </div>

            <div id="successMsg" class="hidden bg-green-500/20 border border-green-500/40 rounded-2xl p-8 text-center mb-6">
                <div class="text-4xl mb-3">‚úÖ</div>
                <h3 class="text-xl font-bold text-green-400 mb-2">Request Submitted!</h3>
                <p class="text-gray-300">Cook's Locksmith team will contact you shortly to confirm details and pricing.</p>
                <p class="text-gray-400 text-sm mt-3">Need help now? Call <a href="tel:5029648238" class="text-brand-400 underline">(502) 964-8238</a> ‚Äî available 24/7</p>
            </div>
        </div>
    </main>

    <footer class="border-t border-dark-800 py-6 text-center text-xs text-gray-500">
        <p>Built for Cook's Locksmith Services ‚Ä¢ 4614 Poplar Level Rd, Louisville, KY 40213</p>
        <p class="mt-1">Estimates are approximate. Final pricing confirmed before any work begins.</p>
    </footer>

    <script>
        let state = { service: null, details: {} };

        const SERVICES = {
            'lockout-home': {
                title: 'Home Lockout',
                questions: [
                    { id:'lockType', label:'Lock Type', options:[
                        {val:'standard',text:'Standard Deadbolt/Knob',icon:'üîë'},
                        {val:'highsec',text:'High-Security Lock',icon:'üîê'},
                        {val:'smart',text:'Smart Lock / Electronic',icon:'üì±'},
                        {val:'unsure',text:'Not Sure',icon:'‚ùì'}
                    ]},
                    { id:'timeOfDay', label:'When Do You Need In?', options:[
                        {val:'business',text:'Business Hours (8am-6pm)',icon:'‚òÄÔ∏è'},
                        {val:'evening',text:'Evening (6pm-10pm)',icon:'üåÜ'},
                        {val:'overnight',text:'Overnight / Weekend',icon:'üåô'}
                    ]}
                ],
                estimate: (d) => {
                    let base = [65, 120];
                    if(d.lockType==='highsec') base = [95, 175];
                    if(d.lockType==='smart') base = [85, 160];
                    if(d.timeOfDay==='evening') { base[0]+=20; base[1]+=30; }
                    if(d.timeOfDay==='overnight') { base[0]+=40; base[1]+=60; }
                    return { low:base[0], high:base[1], note:'Includes trip fee + labor' };
                }
            },
            'lockout-car': {
                title: 'Car Lockout / Lost Keys',
                questions: [
                    { id:'carIssue', label:'What Happened?', options:[
                        {val:'lockout',text:'Keys Locked Inside',icon:'üîí'},
                        {val:'lost',text:'Keys Lost / Stolen',icon:'‚ùå'},
                        {val:'broken',text:'Key Broke in Lock/Ignition',icon:'üíî'},
                        {val:'spare',text:'Need a Spare Key Made',icon:'üóùÔ∏è'}
                    ]},
                    { id:'keyType', label:'Key Type', options:[
                        {val:'standard',text:'Standard Metal Key',icon:'üîë'},
                        {val:'transponder',text:'Transponder / Chip Key',icon:'üì°'},
                        {val:'fob',text:'Key Fob / Push-to-Start',icon:'üì±'},
                        {val:'unsure',text:'Not Sure',icon:'‚ùì'}
                    ]}
                ],
                estimate: (d) => {
                    let base = [55, 95];
                    if(d.carIssue==='lost' || d.carIssue==='broken') { base[0]+=30; base[1]+=50; }
                    if(d.keyType==='transponder') { base[0]+=40; base[1]+=80; }
                    if(d.keyType==='fob') { base[0]+=60; base[1]+=150; }
                    return { low:base[0], high:base[1], note:'On-site service included', showDealer: d.keyType==='fob'||d.keyType==='transponder' };
                }
            },
            'rekey': {
                title: 'Rekey / New Locks',
                questions: [
                    { id:'reason', label:'Why Do You Need This?', options:[
                        {val:'moving',text:'Moving Into a New Home',icon:'üè†'},
                        {val:'lost',text:'Lost Keys / Security Concern',icon:'‚ö†Ô∏è'},
                        {val:'upgrade',text:'Upgrading Lock Security',icon:'üîê'},
                        {val:'breakin',text:'Break-in / Forced Entry',icon:'üö®'}
                    ]},
                    { id:'lockCount', label:'How Many Locks?', options:[
                        {val:'1-2',text:'1-2 Locks',icon:'1Ô∏è‚É£'},
                        {val:'3-4',text:'3-4 Locks',icon:'3Ô∏è‚É£'},
                        {val:'5+',text:'5 or More',icon:'5Ô∏è‚É£'}
                    ]}
                ],
                estimate: (d) => {
                    let perLock = [18, 35];
                    if(d.reason==='upgrade') perLock = [85, 200];
                    if(d.reason==='breakin') perLock = [45, 120];
                    const counts = {'1-2':2,'3-4':4,'5+':6};
                    const n = counts[d.lockCount]||2;
                    const tripFee = 45;
                    return { low: tripFee + perLock[0]*n, high: tripFee + perLock[1]*n, note:`~${n} locks ‚Ä¢ includes service call` };
                }
            },
            'keyfob': {
                title: 'Key Fob / Transponder Replacement',
                questions: [
                    { id:'vehicle', label:'Vehicle Type', options:[
                        {val:'sedan',text:'Car / Sedan',icon:'üöó'},
                        {val:'suv',text:'SUV / Truck',icon:'üöô'},
                        {val:'luxury',text:'Luxury / European',icon:'‚ú®'},
                        {val:'other',text:'Other',icon:'üöê'}
                    ]},
                    { id:'fobType', label:'Key Fob Type', options:[
                        {val:'basic',text:'Basic Remote + Key',icon:'üîë'},
                        {val:'smart',text:'Smart Key / Push-to-Start',icon:'üì±'},
                        {val:'prox',text:'Proximity Key',icon:'üì°'},
                        {val:'unsure',text:'Not Sure',icon:'‚ùì'}
                    ]}
                ],
                estimate: (d) => {
                    let base = [80, 160];
                    let dealer = [200, 400];
                    if(d.fobType==='smart'||d.fobType==='prox') { base=[120,250]; dealer=[300,550]; }
                    if(d.vehicle==='luxury') { base[0]+=50; base[1]+=100; dealer[0]+=150; dealer[1]+=200; }
                    return { low:base[0], high:base[1], note:'Programmed on-site ‚Ä¢ same day', showDealer:true, dealerLow:dealer[0], dealerHigh:dealer[1] };
                }
            },
            'commercial': {
                title: 'Commercial Locksmith',
                questions: [
                    { id:'commType', label:'What Do You Need?', options:[
                        {val:'lockchange',text:'Lock Change / Install',icon:'üîí'},
                        {val:'masterkey',text:'Master Key System',icon:'üóùÔ∏è'},
                        {val:'access',text:'Access Control System',icon:'üñ•Ô∏è'},
                        {val:'emergency',text:'Emergency Lockout',icon:'üö®'}
                    ]},
                    { id:'size', label:'Business Size', options:[
                        {val:'small',text:'Small (1-5 doors)',icon:'üè™'},
                        {val:'medium',text:'Medium (6-20 doors)',icon:'üè¢'},
                        {val:'large',text:'Large (20+ doors)',icon:'üè≠'}
                    ]}
                ],
                estimate: (d) => {
                    let base = [150, 400];
                    if(d.commType==='masterkey') base = [200, 600];
                    if(d.commType==='access') base = [500, 2500];
                    if(d.size==='medium') { base[0]*=1.5; base[1]*=1.5; }
                    if(d.size==='large') { base[0]*=2.5; base[1]*=3; }
                    return { low:Math.round(base[0]), high:Math.round(base[1]), note:'Free on-site assessment available' };
                }
            },
            'safe': {
                title: 'Safe Service',
                questions: [
                    { id:'safeNeed', label:'What Do You Need?', options:[
                        {val:'open',text:'Open a Locked Safe',icon:'üîì'},
                        {val:'combo',text:'Change Combination',icon:'üî¢'},
                        {val:'buy',text:'Buy a New Safe',icon:'üõí'},
                        {val:'repair',text:'Safe Repair',icon:'üîß'}
                    ]}
                ],
                estimate: (d) => {
                    const prices = {
                        open: [85, 250],
                        combo: [65, 150],
                        buy: [200, 3000],
                        repair: [100, 350]
                    };
                    const p = prices[d.safeNeed] || [100,300];
                    return { low:p[0], high:p[1], note: d.safeNeed==='buy' ? 'Visit our showroom for best selection' : 'On-site service' };
                }
            }
        };

        function selectService(el, svc) {
            state.service = svc;
            state.details = {};
            document.querySelectorAll('.svc-btn').forEach(b => {
                b.classList.remove('border-brand-500','bg-brand-500/10');
                b.classList.add('border-dark-700');
            });
            el.classList.add('border-brand-500','bg-brand-500/10');
            el.classList.remove('border-dark-700');

            // Show emergency banner for lockouts
            document.getElementById('emergencyBanner').classList.toggle('hidden', !svc.includes('lockout'));

            // Build step 2
            buildDetails(svc);
            setTimeout(() => goStep(2), 300);
        }

        function buildDetails(svc) {
            const config = SERVICES[svc];
            const panel = document.getElementById('detailsPanel');
            let html = `<h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="settings" class="w-5 h-5 text-brand-400"></i> ${config.title} Details</h3><p class="text-sm text-gray-400 mb-6">Help us narrow down your estimate.</p>`;

            config.questions.forEach(q => {
                html += `<div class="mb-6"><label class="block text-sm font-medium text-gray-300 mb-3">${q.label}</label><div class="grid grid-cols-2 gap-3">`;
                q.options.forEach(opt => {
                    html += `<button onclick="selectDetail('${q.id}','${opt.val}',this)" class="detail-btn detail-${q.id} bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-left hover:border-brand-500/50 transition-all">
                        <div class="flex items-center gap-2"><span class="text-lg">${opt.icon}</span><div class="text-sm font-medium">${opt.text}</div></div>
                    </button>`;
                });
                html += `</div></div>`;
            });

            panel.innerHTML = html;
            lucide.createIcons();
        }

        function selectDetail(qId, val, el) {
            state.details[qId] = val;
            document.querySelectorAll('.detail-' + qId).forEach(b => {
                b.classList.remove('border-brand-500','bg-brand-500/10');
                b.classList.add('border-dark-700');
            });
            el.classList.add('border-brand-500','bg-brand-500/10');
            el.classList.remove('border-dark-700');
        }

        function goStep(n) {
            [1,2,3].forEach(i => document.getElementById('step'+i).classList.add('hidden'));
            document.getElementById('step'+n).classList.remove('hidden');
            window.scrollTo({top:0,behavior:'smooth'});
        }

        function showEstimate() {
            const config = SERVICES[state.service];
            const est = config.estimate(state.details);

            document.getElementById('resultTitle').textContent = config.title + ' Estimate';
            document.getElementById('costDisplay').textContent = `$${est.low} ‚Äì $${est.high}`;
            document.getElementById('costNote').textContent = est.note || '';

            // Dealer comparison
            const dealerDiv = document.getElementById('dealerCompare');
            if (est.showDealer) {
                dealerDiv.classList.remove('hidden');
                const dLow = est.dealerLow || Math.round(est.low * 2.2);
                const dHigh = est.dealerHigh || Math.round(est.high * 2.5);
                document.getElementById('dealerPrice').textContent = `$${dLow} ‚Äì $${dHigh}`;
                document.getElementById('cooksPrice').textContent = `$${est.low} ‚Äì $${est.high}`;
                const avgSave = Math.round(((dLow+dHigh)/2) - ((est.low+est.high)/2));
                document.getElementById('savingsAmount').textContent = `You save ~$${avgSave} with Cook's!`;
            } else {
                dealerDiv.classList.add('hidden');
            }

            // Breakdown
            const breakdown = document.getElementById('breakdownList');
            breakdown.innerHTML = `
                <div class="flex justify-between bg-dark-700/30 rounded-lg px-4 py-3">
                    <span class="text-sm text-gray-400">Service</span>
                    <span class="text-sm font-medium">${config.title}</span>
                </div>
            `;
            Object.entries(state.details).forEach(([k,v]) => {
                breakdown.innerHTML += `<div class="flex justify-between bg-dark-700/30 rounded-lg px-4 py-3">
                    <span class="text-sm text-gray-400 capitalize">${k.replace(/([A-Z])/g,' $1')}</span>
                    <span class="text-sm font-medium capitalize">${v}</span>
                </div>`;
            });

            localStorage.setItem('cooks_estimate', JSON.stringify({...state, est, ts:new Date().toISOString()}));
            goStep(3);
        }

        function submitLead() {
            const name = document.getElementById('leadName').value.trim();
            const phone = document.getElementById('leadPhone').value.trim();
            if(!name||!phone) { alert('Please enter your name and phone.'); return; }
            const lead = {
                name, phone,
                address: document.getElementById('leadAddress').value.trim(),
                urgency: document.getElementById('leadUrgency').value,
                estimate: JSON.parse(localStorage.getItem('cooks_estimate')||'{}'),
                submitted: new Date().toISOString()
            };
            localStorage.setItem('cooks_lead', JSON.stringify(lead));
            document.getElementById('leadForm').classList.add('hidden');
            document.getElementById('successMsg').classList.remove('hidden');
        }

        lucide.createIcons();
    </script>
</body>
</html>
