<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>C&B Pressure Washing ‚Äî Bid Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #1B365D;
            --blue: #0077C8;
            --blue-light: #E6F4FF;
            --foam: #F5F7FA;
            --white: #FFFFFF;
            --success: #28A745;
            --success-bg: #E8F5E9;
            --warning: #FFC107;
            --warning-bg: #FFF8E1;
            --danger: #DC3545;
            --danger-bg: #FFEBEE;
            --gray-100: #F8F9FA;
            --gray-200: #E9ECEF;
            --gray-300: #DEE2E6;
            --gray-400: #CED4DA;
            --gray-500: #ADB5BD;
            --gray-600: #6C757D;
            --gray-700: #495057;
            --gray-800: #343A40;
            --gray-900: #212529;
            --shadow-sm: 0 1px 2px rgba(27, 54, 93, 0.08);
            --shadow: 0 4px 12px rgba(27, 54, 93, 0.12);
            --shadow-lg: 0 8px 24px rgba(27, 54, 93, 0.16);
            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--foam);
            color: var(--gray-800);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
        }
        
        /* Allow text selection on inputs and textareas */
        input, textarea, .quote-preview {
            user-select: text;
            -webkit-user-select: text;
        }

        /* App Shell */
        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--navy) 0%, #234578 100%);
            color: var(--white);
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-icon {
            width: 40px;
            height: 40px;
            background: var(--blue);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .brand-text h1 {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .brand-text span {
            font-size: 12px;
            opacity: 0.8;
            font-weight: 500;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius);
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .header-btn:hover, .header-btn:active {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Demo Banner */
        .demo-banner {
            background: linear-gradient(135deg, var(--warning) 0%, #FFB300 100%);
            color: var(--gray-900);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
        }

        .demo-banner-text {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .demo-banner-btn {
            background: rgba(0, 0, 0, 0.15);
            border: none;
            color: var(--gray-900);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
        }

        .demo-banner-btn:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        .demo-banner.hidden {
            display: none;
        }

        /* Main Content */
        .main {
            flex: 1;
            padding: 20px;
            padding-bottom: calc(100px + var(--safe-bottom));
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Tab Panels */
        .tab-panel {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 16px;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--navy);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title svg {
            width: 20px;
            height: 20px;
            color: var(--blue);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .form-hint {
            font-size: 12px;
            color: var(--gray-500);
            margin-top: 4px;
        }

        .form-input {
            width: 100%;
            height: 52px;
            padding: 0 16px;
            font-size: 16px;
            font-family: inherit;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            background: var(--white);
            color: var(--gray-800);
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 4px var(--blue-light);
        }

        .form-input::placeholder {
            color: var(--gray-400);
        }

        /* Select Grid */
        .select-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .select-grid.cols-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .select-option {
            padding: 14px;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            background: var(--white);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            user-select: none;
        }

        .select-option:active {
            transform: scale(0.98);
        }

        .select-option.selected {
            border-color: var(--blue);
            background: var(--blue-light);
        }

        .select-option-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .select-option-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .select-option.selected .select-option-label {
            color: var(--navy);
        }

        /* Condition Buttons */
        .condition-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .condition-btn {
            padding: 12px 8px;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            background: var(--white);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
        }

        .condition-btn.light.selected {
            border-color: var(--success);
            background: var(--success-bg);
        }

        .condition-btn.medium.selected {
            border-color: var(--warning);
            background: var(--warning-bg);
        }

        .condition-btn.heavy.selected {
            border-color: var(--danger);
            background: var(--danger-bg);
        }

        .condition-label {
            font-size: 13px;
            font-weight: 600;
            display: block;
        }

        .condition-mult {
            font-size: 11px;
            color: var(--gray-500);
            margin-top: 2px;
        }

        /* Size Presets */
        .size-presets {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .size-preset {
            padding: 8px 14px;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-sm);
            background: var(--white);
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-600);
            cursor: pointer;
            transition: var(--transition);
        }

        .size-preset:active {
            transform: scale(0.97);
        }

        .size-preset.selected {
            border-color: var(--blue);
            background: var(--blue-light);
            color: var(--navy);
        }

        /* Price Display */
        .price-display {
            background: linear-gradient(135deg, var(--navy) 0%, #234578 100%);
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: center;
            color: var(--white);
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .price-display::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 119, 200, 0.3) 0%, transparent 60%);
            pointer-events: none;
        }

        .price-label {
            font-size: 14px;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .price-amount {
            font-size: 48px;
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1;
            margin-bottom: 8px;
            position: relative;
        }

        .price-range {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Price Breakdown */
        .breakdown {
            background: var(--gray-100);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 16px;
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
        }

        .breakdown-row:not(:last-child) {
            border-bottom: 1px solid var(--gray-200);
        }

        .breakdown-label {
            color: var(--gray-600);
        }

        .breakdown-value {
            font-weight: 600;
            color: var(--gray-800);
        }

        .breakdown-value.profit {
            color: var(--success);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 52px;
            padding: 0 24px;
            font-size: 16px;
            font-weight: 600;
            font-family: inherit;
            border-radius: var(--radius);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            white-space: nowrap;
        }

        .btn:active {
            transform: scale(0.96);
            opacity: 0.9;
        }
        
        .btn-primary:active {
            box-shadow: 0 2px 8px rgba(0, 119, 200, 0.4);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--blue) 0%, #0066B3 100%);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(0, 119, 200, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 6px 16px rgba(0, 119, 200, 0.4);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #218838 100%);
            color: var(--white);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--gray-300);
            color: var(--gray-600);
        }

        .btn-outline:hover {
            border-color: var(--blue);
            color: var(--blue);
        }

        .btn-block {
            width: 100%;
        }

        .btn-group {
            display: flex;
            gap: 12px;
        }

        .btn-group .btn {
            flex: 1;
        }

        .btn svg {
            width: 20px;
            height: 20px;
        }

        /* Warning Box */
        .warning-box {
            background: var(--warning-bg);
            border-left: 4px solid var(--warning);
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .warning-box svg {
            width: 20px;
            height: 20px;
            color: #F59E0B;
            flex-shrink: 0;
            margin-top: 1px;
        }

        .warning-box-text {
            font-size: 14px;
            color: var(--gray-700);
        }

        .warning-box-text strong {
            color: var(--gray-800);
        }

        /* Info Box */
        .info-box {
            background: var(--blue-light);
            border-left: 4px solid var(--blue);
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            margin-bottom: 16px;
        }

        .info-box-text {
            font-size: 14px;
            color: var(--gray-700);
        }

        /* Chemical Calculator */
        .chem-result {
            background: var(--white);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 16px;
            margin-top: 16px;
        }

        .chem-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }

        .chem-row:not(:last-child) {
            border-bottom: 1px solid var(--gray-100);
        }

        .chem-label {
            font-size: 14px;
            color: var(--gray-600);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chem-label svg {
            width: 18px;
            height: 18px;
            color: var(--blue);
        }

        .chem-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--navy);
        }

        .chem-unit {
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-500);
        }

        .chem-total {
            background: var(--success-bg);
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chem-total-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .chem-total-value {
            font-size: 24px;
            font-weight: 800;
            color: var(--success);
        }

        /* Job Log */
        .job-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .job-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 16px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--blue);
        }

        .job-card.demo {
            border-left-color: var(--warning);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .job-customer {
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .job-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--success);
        }

        .job-details {
            font-size: 13px;
            color: var(--gray-500);
            margin-bottom: 8px;
        }

        .job-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .job-date {
            font-size: 12px;
            color: var(--gray-400);
        }

        .job-badge {
            font-size: 11px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            background: var(--blue-light);
            color: var(--blue);
        }

        .job-badge.demo {
            background: var(--warning-bg);
            color: #B45309;
        }

        .job-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--gray-100);
        }

        .job-action-btn {
            flex: 1;
            height: 40px;
            font-size: 13px;
            font-weight: 600;
            border-radius: var(--radius-sm);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: var(--transition);
        }

        .job-action-btn.copy {
            background: var(--blue-light);
            color: var(--blue);
        }

        .job-action-btn.delete {
            background: var(--danger-bg);
            color: var(--danger);
        }

        .job-action-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 48px 24px;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: var(--blue-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .empty-icon svg {
            width: 40px;
            height: 40px;
            color: var(--blue);
        }

        .empty-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 8px;
        }

        .empty-text {
            font-size: 14px;
            color: var(--gray-500);
            margin-bottom: 24px;
        }

        /* Search */
        .search-container {
            position: relative;
            margin-bottom: 16px;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: var(--gray-400);
        }

        .search-input {
            width: 100%;
            height: 48px;
            padding: 0 16px 0 48px;
            font-size: 16px;
            font-family: inherit;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            background: var(--white);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--blue);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            border-top: 1px solid var(--gray-200);
            padding: 8px 0;
            padding-bottom: calc(8px + var(--safe-bottom));
            display: flex;
            justify-content: space-around;
            z-index: 100;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 4px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray-500);
            transition: var(--transition);
            min-height: 56px;
        }

        .nav-item.active {
            color: var(--blue);
        }
        
        .nav-item:active {
            opacity: 0.7;
            transform: scale(0.95);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(27, 54, 93, 0.6);
            backdrop-filter: blur(4px);
            z-index: 200;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--white);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--navy);
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gray-100);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-500);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--gray-200);
        }

        /* Quote Preview */
        .quote-preview {
            background: var(--gray-100);
            border-radius: var(--radius);
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            color: var(--gray-700);
            white-space: pre-wrap;
            word-break: break-word;
        }

        /* Settings */
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid var(--gray-100);
        }

        .setting-info {
            flex: 1;
        }

        .setting-label {
            font-size: 15px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .setting-desc {
            font-size: 13px;
            color: var(--gray-500);
            margin-top: 2px;
        }

        /* Toggle */
        .toggle {
            width: 52px;
            height: 28px;
            background: var(--gray-300);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle.on {
            background: var(--success);
        }

        .toggle::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            background: var(--white);
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle.on::after {
            left: 26px;
        }

        /* Data Management */
        .data-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--gray-800);
            color: var(--white);
            padding: 12px 24px;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            z-index: 300;
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: var(--success);
        }

        .toast svg {
            width: 18px;
            height: 18px;
        }

        /* Surface Tips */
        .surface-tips {
            background: var(--foam);
            border-radius: var(--radius);
            padding: 16px;
            margin-top: 16px;
        }

        .tip-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tip-list {
            list-style: none;
            font-size: 13px;
            color: var(--gray-600);
        }

        .tip-list li {
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
        }

        .tip-list li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 6px;
            color: var(--blue);
        }

        /* Guide Cards */
        .guide-grid {
            display: grid;
            gap: 12px;
        }

        .guide-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 16px;
            box-shadow: var(--shadow-sm);
        }

        .guide-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .guide-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius);
            background: var(--blue-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .guide-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--gray-800);
        }

        .guide-method {
            font-size: 12px;
            font-weight: 600;
            color: var(--blue);
        }

        .guide-content {
            font-size: 13px;
            color: var(--gray-600);
            line-height: 1.5;
        }

        .guide-warning {
            background: var(--danger-bg);
            color: var(--danger);
            font-size: 12px;
            font-weight: 500;
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            margin-top: 8px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        /* Print Styles */
        @media print {
            .bottom-nav, .demo-banner, .header-actions, .btn-group {
                display: none !important;
            }
            
            .main {
                padding-bottom: 20px;
            }
            
            .price-display {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            body {
                background: white;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        /* Desktop Styles */
        @media (min-width: 1024px) {
            .bottom-nav {
                display: none;
            }
            
            .header-nav {
                display: flex;
                gap: 8px;
            }
            
            .header-nav-btn {
                height: 40px;
                padding: 0 16px;
                background: rgba(255, 255, 255, 0.1);
                border: none;
                border-radius: var(--radius);
                color: var(--white);
                font-size: 14px;
                font-weight: 500;
                font-family: inherit;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            .header-nav-btn.active {
                background: var(--blue);
            }
            
            .header-nav-btn:hover:not(.active) {
                background: rgba(255, 255, 255, 0.2);
            }
            
            .main {
                padding-bottom: 40px;
                max-width: 800px;
            }
            
            .form-input {
                max-width: 400px;
            }
            
            .card {
                max-width: 100%;
            }
            
            .modal {
                border-radius: var(--radius-xl);
                max-width: 500px;
            }
            
            .modal-overlay {
                align-items: center;
            }
            
            .select-grid {
                max-width: 600px;
            }
            
            .condition-grid {
                max-width: 450px;
            }
            
            .size-presets {
                max-width: 500px;
            }
        }

        @media (max-width: 1023px) {
            .header-nav {
                display: none;
            }
        }

        /* Skip Link Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--navy);
            color: var(--white);
            padding: 8px 16px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            border-radius: 0 0 var(--radius) 0;
            z-index: 10000;
            transition: top 0.2s ease;
        }
        .skip-link:focus {
            top: 0;
            outline: 2px solid var(--white);
            outline-offset: -2px;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="app" id="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-inner">
                <div class="brand">
                    <div class="brand-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0L12 2.69z"/></svg></div>
                    <div class="brand-text">
                        <h1>C&B Pressure Washing</h1>
                        <span>Bid Calculator ‚Äî Birmingham, AL</span>
                    </div>
                </div>
                
                <nav class="header-nav">
                    <button class="header-nav-btn active" data-tab="calculator">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="12" y2="14"/><line x1="8" y1="18" x2="12" y2="18"/></svg>
                        Calculator
                    </button>
                    <button class="header-nav-btn" data-tab="chemicals">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 4h12l-3 17H9L6 4z"/><path d="M4 4h16"/><path d="M9 10h6"/></svg>
                        Chemicals
                    </button>
                    <button class="header-nav-btn" data-tab="jobs">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                        Job Log
                    </button>
                    <button class="header-nav-btn" data-tab="guide">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="0.5"/></svg>
                        Guide
                    </button>
                    <button class="header-nav-btn" data-tab="settings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                        Settings
                    </button>
                </nav>
                
                <div class="header-actions">
                    <button class="header-btn" id="settingsBtn" title="Settings">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Demo Banner -->
        <div class="demo-banner" id="demoBanner">
            <div class="demo-banner-text">
                <span><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg></span>
                <span>Showing sample data for C&B Pressure Washing</span>
            </div>
            <button class="demo-banner-btn" id="clearDemoBtn">Clear & Start Fresh</button>
        </div>
        
        <!-- Main Content -->
        <main class="main">
            <!-- Calculator Tab -->
            <div class="tab-panel active" id="calculatorPanel">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/></svg>
                            New Bid
                        </h2>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Customer Name (optional)</label>
                        <input type="text" class="form-input" id="customerName" placeholder="e.g., Johnson Family">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Address (optional)</label>
                        <input type="text" class="form-input" id="customerAddress" placeholder="e.g., 123 Oak Street, Hoover">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Service Type</label>
                        <div class="select-grid" id="serviceType">
                            <div class="select-option selected" data-value="house">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                                <div class="select-option-label">House Wash</div>
                            </div>
                            <div class="select-option" data-value="driveway">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 17a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2M5 17h14M5 17l-1.5 3H4m16-3l1.5 3h-.5"/><circle cx="7" cy="17" r="1"/><circle cx="17" cy="17" r="1"/></svg></div>
                                <div class="select-option-label">Driveway</div>
                            </div>
                            <div class="select-option" data-value="roof">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>Ô∏è</div>
                                <div class="select-option-label">Roof</div>
                            </div>
                            <div class="select-option" data-value="gutter">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 13v8M8 13v8M12 15v8M20 16.58A5 5 0 0018 7h-1.26A8 8 0 104 15.25"/></svg>Ô∏è</div>
                                <div class="select-option-label">Gutters</div>
                            </div>
                            <div class="select-option" data-value="deck">
                                <div class="select-option-icon">ü™µ</div>
                                <div class="select-option-label">Deck/Patio</div>
                            </div>
                            <div class="select-option" data-value="commercial">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M9 22v-8h6v8"/></svg></div>
                                <div class="select-option-label">Commercial</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- House-specific options -->
                    <div id="houseOptions">
                        <div class="form-group">
                            <label class="form-label">Stories</label>
                            <div class="select-grid cols-3" id="stories">
                                <div class="select-option selected" data-value="1">
                                    <div class="select-option-label">1 Story</div>
                                </div>
                                <div class="select-option" data-value="2">
                                    <div class="select-option-label">2 Story</div>
                                </div>
                                <div class="select-option" data-value="3">
                                    <div class="select-option-label">3 Story</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Size (sq ft)</label>
                        <div class="size-presets" id="sizePresets">
                            <button class="size-preset" data-value="1000">Small<br><span style="font-size:11px;color:#888">~1,000</span></button>
                            <button class="size-preset selected" data-value="1800">Medium<br><span style="font-size:11px;color:#888">~1,800</span></button>
                            <button class="size-preset" data-value="2500">Large<br><span style="font-size:11px;color:#888">~2,500</span></button>
                            <button class="size-preset" data-value="3500">XL<br><span style="font-size:11px;color:#888">~3,500</span></button>
                        </div>
                        <input type="number" class="form-input" id="sqftInput" value="1800" placeholder="Enter exact sq ft">
                        <p class="form-hint">Birmingham average: 1,800 sq ft</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Condition Level</label>
                        <div class="condition-grid" id="conditionLevel">
                            <div class="condition-btn light selected" data-value="light" data-mult="1">
                                <span class="condition-label">Light</span>
                                <span class="condition-mult">Standard</span>
                            </div>
                            <div class="condition-btn medium" data-value="medium" data-mult="1.15">
                                <span class="condition-label">Medium</span>
                                <span class="condition-mult">+15%</span>
                            </div>
                            <div class="condition-btn heavy" data-value="heavy" data-mult="1.30">
                                <span class="condition-label">Heavy</span>
                                <span class="condition-mult">+30%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Surface warning -->
                    <div class="warning-box" id="softWashWarning" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                        <div class="warning-box-text">
                            <strong>Soft Wash Required!</strong> This surface type requires low-pressure chemical cleaning. High pressure can cause damage.
                        </div>
                    </div>
                </div>
                
                <!-- Price Display -->
                <div class="price-display">
                    <div class="price-label">Your Recommended Price</div>
                    <div class="price-amount" id="priceAmount">$175</div>
                    <div class="price-range" id="priceRange">Range: $150 ‚Äì $200</div>
                </div>
                
                <!-- Breakdown -->
                <div class="breakdown">
                    <div class="breakdown-row">
                        <span class="breakdown-label">Base Rate</span>
                        <span class="breakdown-value" id="baseRate">$0.10/sq ft</span>
                    </div>
                    <div class="breakdown-row">
                        <span class="breakdown-label">Square Feet</span>
                        <span class="breakdown-value" id="sqftDisplay">1,800</span>
                    </div>
                    <div class="breakdown-row">
                        <span class="breakdown-label">Condition Multiplier</span>
                        <span class="breakdown-value" id="conditionMult">1.0x</span>
                    </div>
                    <div class="breakdown-row">
                        <span class="breakdown-label">Est. Chemical Cost</span>
                        <span class="breakdown-value" id="chemCost">~$12</span>
                    </div>
                    <div class="breakdown-row">
                        <span class="breakdown-label">Est. Time</span>
                        <span class="breakdown-value" id="timeEst">2-3 hrs</span>
                    </div>
                    <div class="breakdown-row">
                        <span class="breakdown-label">Your Profit</span>
                        <span class="breakdown-value profit" id="profitEst">~$130</span>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="btn-group">
                    <button class="btn btn-primary" id="copyQuoteBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        Copy Quote
                    </button>
                    <button class="btn btn-success" id="saveJobBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        Save
                    </button>
                </div>
                
                <!-- Surface Tips -->
                <div class="surface-tips" id="surfaceTips">
                    <div class="tip-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                        Tips for House Wash
                    </div>
                    <ul class="tip-list" id="tipList">
                        <li>Use soft wash (low pressure + chemicals) for vinyl & painted surfaces</li>
                        <li>Pre-wet plants and landscaping before applying any chemicals</li>
                        <li>Start from bottom, work up to prevent streaking</li>
                        <li>SH mix: 3-4% for typical Alabama mold/mildew</li>
                    </ul>
                </div>
            </div>
            
            <!-- Chemicals Tab -->
            <div class="tab-panel" id="chemicalsPanel">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h12l-3 17H9L6 4z"/><path d="M4 4h16"/></svg>
                            Chemical Calculator
                        </h2>
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-text">
                            Calculate SH (sodium hypochlorite) and surfactant amounts for soft washing. Based on typical 4 GPM downstream injection rates.
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Surface Type</label>
                        <div class="select-grid" id="chemSurfaceType">
                            <div class="select-option selected" data-value="vinyl" data-ratio="3">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                                <div class="select-option-label">Vinyl/Painted</div>
                            </div>
                            <div class="select-option" data-value="brick" data-ratio="2.5">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M4 10h16M10 4v16"/></svg></div>
                                <div class="select-option-label">Brick</div>
                            </div>
                            <div class="select-option" data-value="stucco" data-ratio="3">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>Ô∏è</div>
                                <div class="select-option-label">Stucco</div>
                            </div>
                            <div class="select-option" data-value="roof" data-ratio="2">
                                <div class="select-option-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>Ô∏è</div>
                                <div class="select-option-label">Roof (Shingles)</div>
                            </div>
                            <div class="select-option" data-value="concrete" data-ratio="4">
                                <div class="select-option-icon">‚¨ú</div>
                                <div class="select-option-label">Concrete</div>
                            </div>
                            <div class="select-option" data-value="wood" data-ratio="5">
                                <div class="select-option-icon">ü™µ</div>
                                <div class="select-option-label">Wood Deck</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Total Mix Needed (gallons)</label>
                        <input type="number" class="form-input" id="chemGallons" value="5" min="1" max="100">
                        <p class="form-hint">Typical house: 5-10 gallons mix</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your SH Strength</label>
                        <div class="select-grid cols-3" id="shStrength">
                            <div class="select-option" data-value="10">
                                <div class="select-option-label">10%</div>
                            </div>
                            <div class="select-option selected" data-value="12.5">
                                <div class="select-option-label">12.5%</div>
                            </div>
                            <div class="select-option" data-value="15">
                                <div class="select-option-label">15%</div>
                            </div>
                        </div>
                        <p class="form-hint">Pool store SH is typically 10-12.5%</p>
                    </div>
                </div>
                
                <!-- Chemical Results -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Mix Recipe</h2>
                    </div>
                    
                    <div class="chem-result">
                        <div class="chem-row">
                            <span class="chem-label">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h12l-3 17H9L6 4z"/></svg>
                                Sodium Hypochlorite (SH)
                            </span>
                            <span>
                                <span class="chem-value" id="shAmount">1.67</span>
                                <span class="chem-unit"> gal</span>
                            </span>
                        </div>
                        <div class="chem-row">
                            <span class="chem-label">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/></svg>
                                Water
                            </span>
                            <span>
                                <span class="chem-value" id="waterAmount">3.33</span>
                                <span class="chem-unit"> gal</span>
                            </span>
                        </div>
                        <div class="chem-row">
                            <span class="chem-label">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 3v4m0 10v4M3 12h4m10 0h4"/></svg>
                                Surfactant
                            </span>
                            <span>
                                <span class="chem-value" id="surfAmount">2</span>
                                <span class="chem-unit"> oz</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="chem-total">
                        <span class="chem-total-label">Estimated Chemical Cost</span>
                        <span class="chem-total-value" id="chemTotalCost">$8.50</span>
                    </div>
                    
                    <div class="info-box" style="margin-top: 16px;">
                        <div class="info-box-text">
                            <strong>Mix Ratio:</strong> <span id="mixRatioDisplay">3:2</span> (SH to Water)<br>
                            <strong>Final Strength:</strong> <span id="finalStrength">~4.2%</span> applied
                        </div>
                    </div>
                </div>
                
                <!-- Chemical Prices -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Your Chemical Prices</h2>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">SH Cost (per gallon)</label>
                        <input type="number" class="form-input" id="shCostInput" value="3.50" step="0.25" min="0">
                        <p class="form-hint">Pool store: ~$3-4/gal, Bulk: ~$2/gal</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Surfactant Cost (per oz)</label>
                        <input type="number" class="form-input" id="surfCostInput" value="0.15" step="0.05" min="0">
                        <p class="form-hint">Elemonator, Simple Cherry, etc.</p>
                    </div>
                </div>
            </div>
            
            <!-- Jobs Tab -->
            <div class="tab-panel" id="jobsPanel">
                <div class="search-container">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                    <input type="text" class="search-input" id="jobSearch" placeholder="Search by customer or address...">
                </div>
                
                <div class="job-list" id="jobList">
                    <!-- Jobs populate here -->
                </div>
                
                <div class="empty-state" id="jobsEmptyState" style="display: none;">
                    <div class="empty-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                    </div>
                    <h3 class="empty-title">No Saved Quotes Yet</h3>
                    <p class="empty-text">Create your first quote using the calculator, then tap "Save" to add it here.</p>
                    <button class="btn btn-primary" onclick="switchTab('calculator')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                        Create First Quote
                    </button>
                </div>
            </div>
            
            <!-- Guide Tab -->
            <div class="tab-panel" id="guidePanel">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="0.5"/></svg>
                            Surface Guide
                        </h2>
                    </div>
                    <p style="font-size: 14px; color: var(--gray-600); margin-bottom: 16px;">Quick reference for different surface types. Know when to soft wash vs pressure wash to avoid damage.</p>
                </div>
                
                <div class="guide-grid">
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                            <div>
                                <div class="guide-title">Vinyl Siding</div>
                                <div class="guide-method">SOFT WASH ONLY</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            Low pressure with 3-4% SH mix. Start at bottom, work up. Rinse top to bottom. Never exceed 500 PSI direct contact.
                        </div>
                        <div class="guide-warning">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                            High pressure can crack & warp
                        </div>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M4 10h16M10 4v16"/></svg></div>
                            <div>
                                <div class="guide-title">Brick</div>
                                <div class="guide-method">SOFT WASH PREFERRED</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            Use soft wash for algae/mold. Can use moderate pressure (1500-2000 PSI) for tough stains. Avoid old mortar joints.
                        </div>
                        <div class="guide-warning">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                            Can damage old/soft mortar
                        </div>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>Ô∏è</div>
                            <div>
                                <div class="guide-title">Asphalt Shingles</div>
                                <div class="guide-method">SOFT WASH ONLY</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            NEVER pressure wash shingles. Use 50/50 SH mix with surfactant. Apply, let dwell 10-15 min, light rinse or let rain wash.
                        </div>
                        <div class="guide-warning">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                            Pressure removes granules = void warranty
                        </div>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 17a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2M5 17h14M5 17l-1.5 3H4m16-3l1.5 3h-.5"/><circle cx="7" cy="17" r="1"/><circle cx="17" cy="17" r="1"/></svg></div>
                            <div>
                                <div class="guide-title">Concrete/Driveway</div>
                                <div class="guide-method">PRESSURE WASH OK</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            2500-3500 PSI with surface cleaner recommended. Pre-treat with SH for organic stains. Use hot water or degreaser for oil.
                        </div>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon">ü™µ</div>
                            <div>
                                <div class="guide-title">Wood Deck</div>
                                <div class="guide-method">LOW PRESSURE</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            500-1200 PSI max with wide fan tip. Apply wood cleaner, let dwell, rinse with grain. May need brightener after.
                        </div>
                        <div class="guide-warning">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                            High pressure creates furring
                        </div>
                    </div>
                    
                    <div class="guide-card">
                        <div class="guide-header">
                            <div class="guide-icon"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M9 22V12h6v10"/></svg>Ô∏è</div>
                            <div>
                                <div class="guide-title">Stucco</div>
                                <div class="guide-method">SOFT WASH ONLY</div>
                            </div>
                        </div>
                        <div class="guide-content">
                            Very delicate. Low pressure only, 3% SH mix. Test hidden area first. Can chip and damage texture easily.
                        </div>
                        <div class="guide-warning">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                            Very fragile ‚Äî test first
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 16px;">
                    <div class="card-header">
                        <h2 class="card-title">Birmingham Weather Tips</h2>
                    </div>
                    <ul class="tip-list">
                        <li>55+ inches of rain annually ‚Äî homes need cleaning every 6-12 months</li>
                        <li>High humidity accelerates mold growth, especially on north-facing walls</li>
                        <li>Avoid pressure washing below 40¬∞F ‚Äî water can freeze in equipment</li>
                        <li>Best months: March-May and September-November</li>
                        <li>Watch afternoon thunderstorms in summer ‚Äî schedule AM jobs</li>
                    </ul>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div class="tab-panel" id="settingsPanel">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                            Settings
                        </h2>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-label">Include Travel Fee</div>
                            <div class="setting-desc">Add $25 travel fee to quotes outside Adamsville</div>
                        </div>
                        <div class="toggle" id="travelFeeToggle" onclick="toggleSetting('travelFee')"></div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-label">Round to Nearest $25</div>
                            <div class="setting-desc">Round calculated prices to clean numbers</div>
                        </div>
                        <div class="toggle on" id="roundPriceToggle" onclick="toggleSetting('roundPrice')"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Quote Template</h2>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Business Name</label>
                        <input type="text" class="form-input" id="businessName" value="C&B Pressure Washing LLC">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Phone</label>
                        <input type="tel" class="form-input" id="businessPhone" value="(205) 276-1930">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" class="form-input" id="ownerName" value="Roger">
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Your Data</h2>
                    </div>
                    
                    <p style="font-size: 14px; color: var(--gray-600); margin-bottom: 16px;">
                        All your quotes are stored locally on this device. Export to keep a backup.
                    </p>
                    
                    <div class="data-actions">
                        <button class="btn btn-secondary btn-block" id="exportJsonBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            Export Backup (JSON)
                        </button>
                        <button class="btn btn-secondary btn-block" id="exportCsvBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                            Export CSV
                        </button>
                        <button class="btn btn-outline btn-block" id="importBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            Import Backup
                        </button>
                        <input type="file" id="importFile" accept=".json,.csv" style="display: none;">
                    </div>
                </div>
                
                <div class="card" style="border-left: 4px solid var(--danger);">
                    <div class="card-header">
                        <h2 class="card-title" style="color: var(--danger);">Danger Zone</h2>
                    </div>
                    <button class="btn btn-outline btn-block" style="border-color: var(--danger); color: var(--danger);" id="clearAllBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                        Clear All Data
                    </button>
                </div>
                
                <div style="text-align: center; padding: 24px; color: var(--gray-400); font-size: 12px;">
                    C&B Pressure Washing Bid Calculator<br>
                    Built for Roger Melvin ‚Äî Birmingham, AL<br>
                    v1.0 ‚Ä¢ Your data stays on your device
                </div>
            </div>
        </main>
        
        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-tab="calculator">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="12" y2="14"/></svg>
                <span class="nav-label">Calculator</span>
            </button>
            <button class="nav-item" data-tab="chemicals">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h12l-3 17H9L6 4z"/><path d="M4 4h16"/><path d="M9 10h6"/></svg>
                <span class="nav-label">Chemicals</span>
            </button>
            <button class="nav-item" data-tab="jobs">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                <span class="nav-label">Jobs</span>
            </button>
            <button class="nav-item" data-tab="guide">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r="0.5"/></svg>
                <span class="nav-label">Guide</span>
            </button>
            <button class="nav-item" data-tab="settings">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                <span class="nav-label">Settings</span>
            </button>
        </nav>
        
        <!-- Toast -->
        <div class="toast" id="toast">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>
            <span id="toastMessage">Copied to clipboard!</span>
        </div>
        
        <!-- Quote Modal -->
        <div class="modal-overlay" id="quoteModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title">Quote Preview</h3>
                    <button class="modal-close" onclick="closeModal('quoteModal')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="quote-preview" id="quotePreview"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary btn-block" id="modalCopyBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // =====================
        // SECURITY LAYER
        // =====================
        
        function _h(s){let h=0;for(let i=0;i<s.length;i++){h=((h<<5)-h)+s.charCodeAt(i);h|=0;}return h;}
        const _V=838480040;
        const _k=new URLSearchParams(window.location.search).get('key');
        if(!_k||_h(_k)!==_V){
          document.body.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:sans-serif;background:#111;color:#fff;text-align:center;padding:20px"><div><h1 style="font-size:2rem;margin-bottom:1rem">Access Denied</h1><p style="color:#999">This tool requires a valid access key.</p><p style="margin-top:1rem"><a href="mailto:ben@bennycutools.com" style="color:#4da6ff">ben@bennycutools.com</a></p></div></div>';
          throw new Error('Invalid key');
        }
        
        // Block right-click context menu
        document.addEventListener('contextmenu',e=>e.preventDefault());
        
        // Block keyboard shortcuts (F12, Ctrl+Shift+I, Ctrl+U, Ctrl+S)
        document.addEventListener('keydown',e=>{
          if(e.key==='F12'||(e.ctrlKey&&e.shiftKey&&e.key==='I')||(e.ctrlKey&&e.key==='u')||(e.ctrlKey&&e.key==='s')){
            e.preventDefault();
          }
        });
        
        // =====================
        // DATA LAYER
        // =====================
        
        const DB_NAME = 'CBPressureWashDB';
        const DB_VERSION = 1;
        const STORE_NAME = 'jobs';
        
        let db = null;
        
        // Birmingham market pricing ($/sq ft)
        const PRICING = {
            house: { base: 0.10, min: 0.08, max: 0.15, minCharge: 175 },
            driveway: { base: 0.20, min: 0.15, max: 0.30, minCharge: 100 },
            roof: { base: 0.35, min: 0.25, max: 0.50, minCharge: 300 },
            gutter: { base: 2.00, min: 1.50, max: 3.00, minCharge: 125, perFoot: true }, // per linear foot
            deck: { base: 0.25, min: 0.18, max: 0.35, minCharge: 150 },
            commercial: { base: 0.08, min: 0.06, max: 0.12, minCharge: 500 }
        };
        
        // Story multipliers
        const STORY_MULT = { 1: 1, 2: 1.35, 3: 1.75 };
        
        // Time estimates (hours per 1000 sq ft)
        const TIME_EST = {
            house: 0.75,
            driveway: 0.5,
            roof: 1.0,
            gutter: 0.3,
            deck: 0.6,
            commercial: 0.5
        };
        
        // Surface tips
        const TIPS = {
            house: [
                'Use soft wash (low pressure + chemicals) for vinyl & painted surfaces',
                'Pre-wet plants and landscaping before applying any chemicals',
                'Start from bottom, work up to prevent streaking',
                'SH mix: 3-4% for typical Alabama mold/mildew'
            ],
            driveway: [
                'Surface cleaner recommended for even results',
                'Pre-treat organic stains with SH, oil with degreaser',
                '2500-3500 PSI for concrete',
                'Work in overlapping passes, don\'t linger'
            ],
            roof: [
                'NEVER pressure wash shingles ‚Äî soft wash only',
                '50/50 SH mix with good surfactant for dwell time',
                'Apply from bottom edge, work up',
                'May take 2-3 rains to fully clean ‚Äî set expectations'
            ],
            gutter: [
                'Clean exterior with soft wash along with house',
                'Interior cleaning is additional service',
                'Check for proper drainage while you\'re up there',
                'Aluminum gutters ‚Äî avoid abrasive tools'
            ],
            deck: [
                'Test pressure in hidden spot first',
                '500-1200 PSI max for wood',
                'Use wood-specific cleaner, not SH on bare wood',
                'Apply wood brightener after cleaning'
            ],
            commercial: [
                'Get specific scope in writing before quoting',
                'Consider after-hours work for active businesses',
                'Factor in equipment access and water source',
                'Check for special surface requirements'
            ]
        };
        
        const SOFT_WASH_TYPES = ['house', 'roof', 'gutter'];
        
        // Settings with defaults
        let settings = {
            travelFee: false,
            roundPrice: true,
            businessName: 'C&B Pressure Washing LLC',
            businessPhone: '(205) 276-1930',
            ownerName: 'Roger',
            shCost: 3.50,
            surfCost: 0.15
        };
        
        // Demo data
        const DEMO_JOBS = [
            {
                id: 'demo-1',
                isDemo: true,
                customer: 'Johnson Family',
                address: '425 Oak Ridge Dr, Hoover',
                serviceType: 'house',
                sqft: 2200,
                stories: 2,
                condition: 'medium',
                price: 275,
                chemCost: 14,
                createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
                id: 'demo-2',
                isDemo: true,
                customer: 'Williams Residence',
                address: '1820 Valley View, Vestavia Hills',
                serviceType: 'driveway',
                sqft: 800,
                condition: 'heavy',
                price: 200,
                chemCost: 8,
                createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
                id: 'demo-3',
                isDemo: true,
                customer: 'Thompson',
                address: '3305 Brookwood Pl, Homewood',
                serviceType: 'house',
                sqft: 1600,
                stories: 1,
                condition: 'light',
                price: 175,
                chemCost: 10,
                createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
                id: 'demo-4',
                isDemo: true,
                customer: 'Mountain Brook HOA',
                address: '100 Cahaba Rd, Adamsville',
                serviceType: 'commercial',
                sqft: 5000,
                condition: 'medium',
                price: 500,
                chemCost: 35,
                createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString()
            }
        ];
        
        // =====================
        // DATABASE FUNCTIONS
        // =====================
        
        async function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(DB_NAME, DB_VERSION);
                
                request.onerror = () => {
                    console.warn('IndexedDB failed, using localStorage');
                    resolve(null);
                };
                
                request.onsuccess = (e) => {
                    db = e.target.result;
                    resolve(db);
                };
                
                request.onupgradeneeded = (e) => {
                    const database = e.target.result;
                    if (!database.objectStoreNames.contains(STORE_NAME)) {
                        const store = database.createObjectStore(STORE_NAME, { keyPath: 'id' });
                        store.createIndex('createdAt', 'createdAt');
                        store.createIndex('customer', 'customer');
                    }
                };
            });
        }
        
        async function getAllJobs() {
            if (db) {
                return new Promise((resolve, reject) => {
                    const tx = db.transaction(STORE_NAME, 'readonly');
                    const store = tx.objectStore(STORE_NAME);
                    const request = store.getAll();
                    request.onsuccess = () => resolve(request.result || []);
                    request.onerror = () => resolve([]);
                });
            } else {
                const data = localStorage.getItem('cb_jobs');
                return data ? JSON.parse(data) : [];
            }
        }
        
        async function saveJob(job) {
            if (db) {
                return new Promise((resolve, reject) => {
                    const tx = db.transaction(STORE_NAME, 'readwrite');
                    const store = tx.objectStore(STORE_NAME);
                    store.put(job);
                    tx.oncomplete = () => resolve(job);
                    tx.onerror = () => reject(tx.error);
                });
            } else {
                const jobs = await getAllJobs();
                const idx = jobs.findIndex(j => j.id === job.id);
                if (idx >= 0) {
                    jobs[idx] = job;
                } else {
                    jobs.push(job);
                }
                localStorage.setItem('cb_jobs', JSON.stringify(jobs));
                return job;
            }
        }
        
        async function deleteJob(id) {
            if (db) {
                return new Promise((resolve, reject) => {
                    const tx = db.transaction(STORE_NAME, 'readwrite');
                    const store = tx.objectStore(STORE_NAME);
                    store.delete(id);
                    tx.oncomplete = () => resolve();
                    tx.onerror = () => reject(tx.error);
                });
            } else {
                const jobs = await getAllJobs();
                const filtered = jobs.filter(j => j.id !== id);
                localStorage.setItem('cb_jobs', JSON.stringify(filtered));
            }
        }
        
        async function clearAllJobs() {
            if (db) {
                return new Promise((resolve, reject) => {
                    const tx = db.transaction(STORE_NAME, 'readwrite');
                    const store = tx.objectStore(STORE_NAME);
                    store.clear();
                    tx.oncomplete = () => resolve();
                    tx.onerror = () => reject(tx.error);
                });
            } else {
                localStorage.removeItem('cb_jobs');
            }
        }
        
        // =====================
        // SETTINGS
        // =====================
        
        function loadSettings() {
            const saved = localStorage.getItem('cb_settings');
            if (saved) {
                settings = { ...settings, ...JSON.parse(saved) };
            }
            // Update UI
            document.getElementById('travelFeeToggle').classList.toggle('on', settings.travelFee);
            document.getElementById('roundPriceToggle').classList.toggle('on', settings.roundPrice);
            document.getElementById('businessName').value = settings.businessName;
            document.getElementById('businessPhone').value = settings.businessPhone;
            document.getElementById('ownerName').value = settings.ownerName;
            document.getElementById('shCostInput').value = settings.shCost;
            document.getElementById('surfCostInput').value = settings.surfCost;
        }
        
        function saveSettings() {
            settings.businessName = document.getElementById('businessName').value;
            settings.businessPhone = document.getElementById('businessPhone').value;
            settings.ownerName = document.getElementById('ownerName').value;
            settings.shCost = parseFloat(document.getElementById('shCostInput').value) || 3.50;
            settings.surfCost = parseFloat(document.getElementById('surfCostInput').value) || 0.15;
            localStorage.setItem('cb_settings', JSON.stringify(settings));
        }
        
        function toggleSetting(key) {
            settings[key] = !settings[key];
            document.getElementById(key + 'Toggle').classList.toggle('on', settings[key]);
            saveSettings();
            calculatePrice();
        }
        
        // =====================
        // CALCULATOR LOGIC
        // =====================
        
        let currentCalc = {
            serviceType: 'house',
            stories: 1,
            sqft: 1800,
            condition: 'light',
            conditionMult: 1.0
        };
        
        function calculatePrice() {
            const pricing = PRICING[currentCalc.serviceType];
            let sqft = currentCalc.sqft;
            let baseRate = pricing.base;
            
            // Story multiplier for house
            let storyMult = 1;
            if (currentCalc.serviceType === 'house') {
                storyMult = STORY_MULT[currentCalc.stories] || 1;
            }
            
            // Calculate base price
            let price = sqft * baseRate * storyMult * currentCalc.conditionMult;
            
            // Apply minimum charge
            price = Math.max(price, pricing.minCharge);
            
            // Travel fee
            if (settings.travelFee) {
                price += 25;
            }
            
            // Round if enabled
            if (settings.roundPrice) {
                price = Math.round(price / 25) * 25;
            }
            
            // Calculate range
            const minPrice = Math.round(sqft * pricing.min * storyMult * currentCalc.conditionMult);
            const maxPrice = Math.round(sqft * pricing.max * storyMult * currentCalc.conditionMult);
            
            // Chemical cost estimate
            const chemCost = estimateChemCost(currentCalc.serviceType, sqft, currentCalc.condition);
            
            // Time estimate
            const timeHours = (sqft / 1000) * TIME_EST[currentCalc.serviceType] * currentCalc.conditionMult;
            const timeStr = formatTimeEstimate(timeHours);
            
            // Profit estimate
            const profit = price - chemCost - 15; // $15 for gas/misc
            
            // Update UI
            document.getElementById('priceAmount').textContent = '$' + Math.round(price);
            document.getElementById('priceRange').textContent = `Range: $${Math.max(pricing.minCharge, minPrice)} ‚Äì $${maxPrice}`;
            document.getElementById('baseRate').textContent = '$' + pricing.base.toFixed(2) + '/sq ft';
            document.getElementById('sqftDisplay').textContent = sqft.toLocaleString();
            document.getElementById('conditionMult').textContent = currentCalc.conditionMult.toFixed(2) + 'x';
            document.getElementById('chemCost').textContent = '~$' + Math.round(chemCost);
            document.getElementById('timeEst').textContent = timeStr;
            document.getElementById('profitEst').textContent = '~$' + Math.round(profit);
            
            return { price: Math.round(price), chemCost: Math.round(chemCost), timeStr };
        }
        
        function estimateChemCost(serviceType, sqft, condition) {
            // Gallons of mix needed per 1000 sq ft
            const gallonsPerK = {
                house: 2.5,
                roof: 3,
                driveway: 0.5,
                gutter: 0.5,
                deck: 1,
                commercial: 2
            };
            
            const condMult = { light: 1, medium: 1.2, heavy: 1.5 };
            const gallons = (sqft / 1000) * gallonsPerK[serviceType] * condMult[condition];
            
            // SH cost (assuming 1:3 ratio = 25% SH in mix)
            const shGallons = gallons * 0.33;
            const surfOz = gallons * 2;
            
            return (shGallons * settings.shCost) + (surfOz * settings.surfCost);
        }
        
        function formatTimeEstimate(hours) {
            if (hours < 1) return '30-45 min';
            if (hours < 1.5) return '1-1.5 hrs';
            if (hours < 2.5) return '2-3 hrs';
            if (hours < 4) return '3-4 hrs';
            return Math.round(hours) + '+ hrs';
        }
        
        // =====================
        // CHEMICAL CALCULATOR
        // =====================
        
        function calculateChemicals() {
            const surfaceEl = document.querySelector('#chemSurfaceType .select-option.selected');
            const shStrengthEl = document.querySelector('#shStrength .select-option.selected');
            
            const ratio = parseFloat(surfaceEl?.dataset.ratio) || 3;
            const shStrength = parseFloat(shStrengthEl?.dataset.value) || 12.5;
            const totalGallons = parseFloat(document.getElementById('chemGallons').value) || 5;
            
            // Calculate SH and water amounts based on ratio
            // Ratio is water:SH (e.g., 3:1 means 3 parts water, 1 part SH)
            // Actually, for soft wash we usually express as SH:Water
            // 3:2 means 3 parts SH, 2 parts water
            // Let's use a simpler approach: ratio is how many parts water per 1 part SH
            
            const shParts = 1;
            const waterParts = ratio;
            const totalParts = shParts + waterParts;
            
            const shAmount = totalGallons / totalParts;
            const waterAmount = totalGallons - shAmount;
            const surfAmount = totalGallons * 2; // 2 oz per gallon
            
            // Final applied strength after downstream injection (~10:1 dilution)
            const mixStrength = (shStrength * shAmount) / totalGallons;
            const appliedStrength = mixStrength / 10; // downstream dilution
            
            // Cost
            const totalCost = (shAmount * settings.shCost) + (surfAmount * settings.surfCost);
            
            // Update UI
            document.getElementById('shAmount').textContent = shAmount.toFixed(2);
            document.getElementById('waterAmount').textContent = waterAmount.toFixed(2);
            document.getElementById('surfAmount').textContent = Math.round(surfAmount);
            document.getElementById('chemTotalCost').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('mixRatioDisplay').textContent = `1:${ratio}`;
            document.getElementById('finalStrength').textContent = `~${appliedStrength.toFixed(1)}%`;
        }
        
        // =====================
        // UI HANDLERS
        // =====================
        
        function switchTab(tabName) {
            // Update panels
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(tabName + 'Panel').classList.add('active');
            
            // Update bottom nav
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.querySelector(`.nav-item[data-tab="${tabName}"]`)?.classList.add('active');
            
            // Update header nav
            document.querySelectorAll('.header-nav-btn').forEach(n => n.classList.remove('active'));
            document.querySelector(`.header-nav-btn[data-tab="${tabName}"]`)?.classList.add('active');
            
            // Refresh jobs list if switching to jobs tab
            if (tabName === 'jobs') {
                renderJobList();
            }
        }
        
        function showToast(message, isSuccess = true) {
            const toast = document.getElementById('toast');
            const toastMsg = document.getElementById('toastMessage');
            toastMsg.textContent = message;
            toast.classList.toggle('success', isSuccess);
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2500);
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function openQuoteModal() {
            const quote = generateQuoteText();
            document.getElementById('quotePreview').textContent = quote;
            document.getElementById('quoteModal').classList.add('active');
        }
        
        function generateQuoteText() {
            const customer = document.getElementById('customerName').value || 'Valued Customer';
            const address = document.getElementById('customerAddress').value;
            const { price } = calculatePrice();
            
            const serviceNames = {
                house: 'House Wash (Soft Wash)',
                driveway: 'Driveway Cleaning',
                roof: 'Roof Cleaning (Soft Wash)',
                gutter: 'Gutter Cleaning',
                deck: 'Deck/Patio Cleaning',
                commercial: 'Commercial Pressure Washing'
            };
            
            let quote = `Hi ${customer.split(' ')[0]}!\n\n`;
            quote += `Thanks for reaching out to C&B Pressure Washing! Here's your estimate:\n\n`;
            quote += `Service: ${serviceNames[currentCalc.serviceType]}\n`;
            if (address) quote += `Location: ${address}\n`;
            quote += `Size: ~${currentCalc.sqft.toLocaleString()} sq ft\n`;
            quote += `Condition: ${currentCalc.condition.charAt(0).toUpperCase() + currentCalc.condition.slice(1)}\n\n`;
            quote += `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v12M9 10h6M9 14h6"/></svg> Your Price: $${price}\n\n`;
            quote += `This estimate is valid for 30 days. We use professional-grade equipment and eco-friendly chemicals.\n\n`;
            quote += `Ready to schedule? Call or text me anytime!\n`;
            quote += `<svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg> ${settings.businessPhone}\n\n`;
            quote += `‚Äî ${settings.ownerName}\n`;
            quote += `${settings.businessName}`;
            
            return quote;
        }
        
        async function copyQuote() {
            const quote = generateQuoteText();
            try {
                await navigator.clipboard.writeText(quote);
                showToast('Quote copied! Paste in Messenger or text');
            } catch (e) {
                openQuoteModal();
            }
        }
        
        async function saveCurrentJob() {
            const { price, chemCost } = calculatePrice();
            
            const job = {
                id: 'job-' + Date.now(),
                isDemo: false,
                customer: document.getElementById('customerName').value || 'Unnamed',
                address: document.getElementById('customerAddress').value || '',
                serviceType: currentCalc.serviceType,
                sqft: currentCalc.sqft,
                stories: currentCalc.stories,
                condition: currentCalc.condition,
                price: price,
                chemCost: chemCost,
                createdAt: new Date().toISOString()
            };
            
            await saveJob(job);
            showToast('Job saved!');
            
            // Clear form
            document.getElementById('customerName').value = '';
            document.getElementById('customerAddress').value = '';
        }
        
        async function renderJobList(filter = '') {
            const jobs = await getAllJobs();
            const container = document.getElementById('jobList');
            const emptyState = document.getElementById('jobsEmptyState');
            
            // Filter
            let filtered = jobs;
            if (filter) {
                const term = filter.toLowerCase();
                filtered = jobs.filter(j => 
                    j.customer?.toLowerCase().includes(term) || 
                    j.address?.toLowerCase().includes(term)
                );
            }
            
            // Sort by date descending
            filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            if (filtered.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const serviceNames = {
                house: 'House Wash',
                driveway: 'Driveway',
                roof: 'Roof',
                gutter: 'Gutters',
                deck: 'Deck/Patio',
                commercial: 'Commercial'
            };
            
            container.innerHTML = filtered.map(job => {
                const date = new Date(job.createdAt);
                const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                
                return `
                    <div class="job-card ${job.isDemo ? 'demo' : ''}">
                        <div class="job-header">
                            <div class="job-customer">${escapeHtml(job.customer)}</div>
                            <div class="job-price">$${job.price}</div>
                        </div>
                        <div class="job-details">
                            ${job.address ? escapeHtml(job.address) + ' ‚Ä¢ ' : ''}
                            ${serviceNames[job.serviceType]} ‚Ä¢ ${job.sqft?.toLocaleString() || '?'} sq ft
                        </div>
                        <div class="job-meta">
                            <span class="job-date">${dateStr}</span>
                            ${job.isDemo ? '<span class="job-badge demo">Sample</span>' : ''}
                        </div>
                        <div class="job-actions">
                            <button class="job-action-btn copy" onclick="copyJobQuote('${job.id}')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                Copy Quote
                            </button>
                            <button class="job-action-btn delete" onclick="confirmDeleteJob('${job.id}')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                                Delete
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        async function copyJobQuote(jobId) {
            const jobs = await getAllJobs();
            const job = jobs.find(j => j.id === jobId);
            if (!job) return;
            
            // Temporarily set currentCalc and form values
            currentCalc.serviceType = job.serviceType;
            currentCalc.sqft = job.sqft;
            currentCalc.stories = job.stories || 1;
            currentCalc.condition = job.condition;
            currentCalc.conditionMult = job.condition === 'heavy' ? 1.3 : job.condition === 'medium' ? 1.15 : 1;
            
            document.getElementById('customerName').value = job.customer;
            document.getElementById('customerAddress').value = job.address || '';
            
            await copyQuote();
        }
        
        async function confirmDeleteJob(jobId) {
            if (confirm('Delete this quote?')) {
                await deleteJob(jobId);
                renderJobList(document.getElementById('jobSearch').value);
                showToast('Quote deleted');
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // =====================
        // DATA IMPORT/EXPORT
        // =====================
        
        async function exportJSON() {
            const jobs = await getAllJobs();
            const data = {
                version: 1,
                exported: new Date().toISOString(),
                settings: settings,
                jobs: jobs.filter(j => !j.isDemo)
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cb-pressure-washing-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showToast('Backup downloaded');
        }
        
        async function exportCSV() {
            const jobs = await getAllJobs();
            const realJobs = jobs.filter(j => !j.isDemo);
            
            if (realJobs.length === 0) {
                showToast('No jobs to export', false);
                return;
            }
            
            const headers = ['Date', 'Customer', 'Address', 'Service', 'Sq Ft', 'Condition', 'Price', 'Chemical Cost'];
            const rows = realJobs.map(j => [
                new Date(j.createdAt).toLocaleDateString(),
                `"${j.customer}"`,
                `"${j.address || ''}"`,
                j.serviceType,
                j.sqft,
                j.condition,
                j.price,
                j.chemCost
            ]);
            
            const csv = [headers.join(','), ...rows.map(r => r.join(','))].join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cb-jobs-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            showToast('CSV downloaded');
        }
        
        async function handleImport(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const text = await file.text();
            
            try {
                if (file.name.endsWith('.json')) {
                    const data = JSON.parse(text);
                    if (data.jobs) {
                        for (const job of data.jobs) {
                            job.isDemo = false;
                            await saveJob(job);
                        }
                        showToast(`Imported ${data.jobs.length} jobs`);
                    }
                    if (data.settings) {
                        settings = { ...settings, ...data.settings };
                        saveSettings();
                        loadSettings();
                    }
                } else if (file.name.endsWith('.csv')) {
                    // Simple CSV parsing
                    const lines = text.trim().split('\n');
                    const headers = lines[0].split(',');
                    let imported = 0;
                    
                    for (let i = 1; i < lines.length; i++) {
                        const values = lines[i].split(',');
                        const job = {
                            id: 'import-' + Date.now() + '-' + i,
                            isDemo: false,
                            customer: values[1]?.replace(/"/g, '') || 'Imported',
                            address: values[2]?.replace(/"/g, '') || '',
                            serviceType: values[3] || 'house',
                            sqft: parseInt(values[4]) || 1800,
                            condition: values[5] || 'light',
                            price: parseInt(values[6]) || 0,
                            chemCost: parseInt(values[7]) || 0,
                            createdAt: new Date().toISOString()
                        };
                        await saveJob(job);
                        imported++;
                    }
                    showToast(`Imported ${imported} jobs`);
                }
                
                renderJobList();
            } catch (err) {
                showToast('Import failed: ' + err.message, false);
            }
            
            e.target.value = '';
        }
        
        async function clearAllData() {
            if (confirm('This will delete ALL your saved quotes. Are you sure?')) {
                await clearAllJobs();
                localStorage.removeItem('cb_settings');
                localStorage.removeItem('cb_demo_dismissed');
                location.reload();
            }
        }
        
        // =====================
        // DEMO DATA
        // =====================
        
        async function initDemoData() {
            const dismissed = localStorage.getItem('cb_demo_dismissed');
            const jobs = await getAllJobs();
            
            if (!dismissed && jobs.length === 0) {
                // Add demo data
                for (const job of DEMO_JOBS) {
                    await saveJob(job);
                }
                document.getElementById('demoBanner').classList.remove('hidden');
            } else if (dismissed) {
                document.getElementById('demoBanner').classList.add('hidden');
            } else {
                // Check if only demo jobs remain
                const hasReal = jobs.some(j => !j.isDemo);
                const hasDemo = jobs.some(j => j.isDemo);
                if (hasDemo && !hasReal) {
                    document.getElementById('demoBanner').classList.remove('hidden');
                } else {
                    document.getElementById('demoBanner').classList.add('hidden');
                }
            }
        }
        
        async function clearDemoData() {
            const jobs = await getAllJobs();
            for (const job of jobs) {
                if (job.isDemo) {
                    await deleteJob(job.id);
                }
            }
            localStorage.setItem('cb_demo_dismissed', 'true');
            document.getElementById('demoBanner').classList.add('hidden');
            renderJobList();
            showToast('Demo data cleared');
        }
        
        // =====================
        // EVENT LISTENERS
        // =====================
        
        document.addEventListener('DOMContentLoaded', async () => {
            await initDB();
            loadSettings();
            await initDemoData();
            
            // Navigation
            document.querySelectorAll('.nav-item, .header-nav-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });
            
            document.getElementById('settingsBtn').addEventListener('click', () => switchTab('settings'));
            
            // Service type selection
            document.querySelectorAll('#serviceType .select-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    document.querySelectorAll('#serviceType .select-option').forEach(o => o.classList.remove('selected'));
                    opt.classList.add('selected');
                    currentCalc.serviceType = opt.dataset.value;
                    
                    // Show/hide house options
                    document.getElementById('houseOptions').style.display = 
                        currentCalc.serviceType === 'house' ? 'block' : 'none';
                    
                    // Show soft wash warning
                    const warning = document.getElementById('softWashWarning');
                    warning.style.display = SOFT_WASH_TYPES.includes(currentCalc.serviceType) ? 'flex' : 'none';
                    
                    // Update tips
                    updateTips();
                    calculatePrice();
                });
            });
            
            // Stories selection
            document.querySelectorAll('#stories .select-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    document.querySelectorAll('#stories .select-option').forEach(o => o.classList.remove('selected'));
                    opt.classList.add('selected');
                    currentCalc.stories = parseInt(opt.dataset.value);
                    calculatePrice();
                });
            });
            
            // Size presets
            document.querySelectorAll('.size-preset').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.size-preset').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    const val = parseInt(btn.dataset.value);
                    document.getElementById('sqftInput').value = val;
                    currentCalc.sqft = val;
                    calculatePrice();
                });
            });
            
            // Manual sqft input
            document.getElementById('sqftInput').addEventListener('input', (e) => {
                document.querySelectorAll('.size-preset').forEach(b => b.classList.remove('selected'));
                currentCalc.sqft = parseInt(e.target.value) || 0;
                calculatePrice();
            });
            
            // Condition selection
            document.querySelectorAll('#conditionLevel .condition-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#conditionLevel .condition-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    currentCalc.condition = btn.dataset.value;
                    currentCalc.conditionMult = parseFloat(btn.dataset.mult);
                    calculatePrice();
                });
            });
            
            // Chemical calculator surface type
            document.querySelectorAll('#chemSurfaceType .select-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    document.querySelectorAll('#chemSurfaceType .select-option').forEach(o => o.classList.remove('selected'));
                    opt.classList.add('selected');
                    calculateChemicals();
                });
            });
            
            // Chemical calculator SH strength
            document.querySelectorAll('#shStrength .select-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    document.querySelectorAll('#shStrength .select-option').forEach(o => o.classList.remove('selected'));
                    opt.classList.add('selected');
                    calculateChemicals();
                });
            });
            
            // Chemical gallons input
            document.getElementById('chemGallons').addEventListener('input', calculateChemicals);
            
            // Chemical cost inputs
            document.getElementById('shCostInput').addEventListener('change', () => {
                settings.shCost = parseFloat(document.getElementById('shCostInput').value) || 3.50;
                saveSettings();
                calculateChemicals();
                calculatePrice();
            });
            
            document.getElementById('surfCostInput').addEventListener('change', () => {
                settings.surfCost = parseFloat(document.getElementById('surfCostInput').value) || 0.15;
                saveSettings();
                calculateChemicals();
            });
            
            // Settings inputs
            document.getElementById('businessName').addEventListener('change', saveSettings);
            document.getElementById('businessPhone').addEventListener('change', saveSettings);
            document.getElementById('ownerName').addEventListener('change', saveSettings);
            
            // Quote buttons
            document.getElementById('copyQuoteBtn').addEventListener('click', copyQuote);
            document.getElementById('saveJobBtn').addEventListener('click', saveCurrentJob);
            document.getElementById('modalCopyBtn').addEventListener('click', async () => {
                const quote = document.getElementById('quotePreview').textContent;
                await navigator.clipboard.writeText(quote);
                closeModal('quoteModal');
                showToast('Quote copied!');
            });
            
            // Demo banner
            document.getElementById('clearDemoBtn').addEventListener('click', clearDemoData);
            
            // Job search
            document.getElementById('jobSearch').addEventListener('input', (e) => {
                renderJobList(e.target.value);
            });
            
            // Data management
            document.getElementById('exportJsonBtn').addEventListener('click', exportJSON);
            document.getElementById('exportCsvBtn').addEventListener('click', exportCSV);
            document.getElementById('importBtn').addEventListener('click', () => {
                document.getElementById('importFile').click();
            });
            document.getElementById('importFile').addEventListener('change', handleImport);
            document.getElementById('clearAllBtn').addEventListener('click', clearAllData);
            
            // Modal close on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
            
            // Initial calculations
            calculatePrice();
            calculateChemicals();
            updateTips();
        });
        
        function updateTips() {
            const tips = TIPS[currentCalc.serviceType] || TIPS.house;
            const tipList = document.getElementById('tipList');
            const tipTitle = document.querySelector('.tip-title');
            
            const serviceNames = {
                house: 'House Wash',
                driveway: 'Driveway',
                roof: 'Roof Cleaning',
                gutter: 'Gutters',
                deck: 'Deck/Patio',
                commercial: 'Commercial'
            };
            
            tipTitle.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                Tips for ${serviceNames[currentCalc.serviceType]}
            `;
            
            tipList.innerHTML = tips.map(tip => `<li>${tip}</li>`).join('');
        }
    </script>
</body>
</html>