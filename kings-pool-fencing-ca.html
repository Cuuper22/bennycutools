<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>California Pool Fence Compliance & Liability Calculator - King's Pool Fencing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 950px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .alert {
            background: #fef3c7;
            border-left: 5px solid #f59e0b;
            padding: 20px;
            margin: 30px;
            border-radius: 8px;
        }

        .alert strong {
            color: #92400e;
            display: block;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .alert p {
            color: #78350f;
            margin: 0;
        }

        .content {
            padding: 40px 30px;
        }

        .input-section {
            background: #f0f9ff;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(14, 165, 233, 0.3);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .results {
            display: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results.show {
            display: block;
        }

        .danger-card {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .danger-card h2 {
            font-size: 2.5em;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .danger-card p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .safe-card {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .safe-card h2 {
            font-size: 2.5em;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .safe-card p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .comparison-card {
            background: #f0f9ff;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }

        .comparison-card.danger {
            background: #fef2f2;
            border-color: #fecaca;
        }

        .comparison-card.safe {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }

        .comparison-card h3 {
            color: #0ea5e9;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .comparison-card.danger h3 {
            color: #dc2626;
        }

        .comparison-card.safe h3 {
            color: #10b981;
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-item:last-child {
            border-bottom: none;
        }

        .comparison-item label {
            font-weight: 500;
            color: #666;
        }

        .comparison-item span {
            font-weight: 700;
            color: #333;
        }

        .ca-stats {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .ca-stats h3 {
            color: #92400e;
            margin-bottom: 15px;
        }

        .ca-stats ul {
            list-style: none;
            padding: 0;
        }

        .ca-stats li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #78350f;
        }

        .ca-stats li:before {
            content: "‚ö†Ô∏è";
            position: absolute;
            left: 0;
        }

        .legal-box {
            background: #e0f2fe;
            border-left: 4px solid #0ea5e9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .legal-box h3 {
            color: #075985;
            margin-bottom: 15px;
        }

        .legal-box ul {
            list-style: none;
            padding: 0;
        }

        .legal-box li {
            padding: 6px 0;
            padding-left: 25px;
            position: relative;
        }

        .legal-box li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #0ea5e9;
            font-weight: 700;
        }

        .savings-highlight {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
            text-align: center;
        }

        .savings-highlight h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .savings-highlight .big-number {
            font-size: 3em;
            font-weight: 700;
            margin: 20px 0;
        }

        .footer {
            background: #f0f9ff;
            padding: 30px;
            text-align: center;
            border-top: 2px solid #e0e0e0;
        }

        .footer p {
            color: #666;
            margin-bottom: 10px;
        }

        .footer a {
            color: #0ea5e9;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.6em;
            }

            .input-row, .comparison-grid {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 25px 20px;
            }

            .input-section {
                padding: 20px;
            }
        }

        .info-badge {
            display: inline-block;
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            margin-left: 8px;
        }

        .highlight-red {
            color: #dc2626;
            font-weight: 700;
        }

        .highlight-green {
            color: #10b981;
            font-weight: 700;
        }
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèä California Pool Fence Compliance & Liability Calculator</h1>
            <p>Understand your legal requirements, liability exposure, and cost savings</p>
        </div>

        <div class="alert">
            <strong>‚ö†Ô∏è California Law Required Reading:</strong>
            <p>California Health & Safety Code requires residential pools to have <strong>at least 2 of 7 approved safety features</strong>, including compliant fencing (5-foot minimum height). Non-compliance can result in fines, liability exposure, and denied insurance claims.</p>
        </div>

        <div class="content">
            <div class="input-section">
                <h2 style="margin-bottom: 20px; color: #333;">Your Pool & Property Details</h2>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="homeValue">Home Value <span class="info-badge">Affects liability limits</span></label>
                        <input type="number" id="homeValue" value="650000" min="100000" max="10000000" step="50000">
                    </div>

                    <div class="input-group">
                        <label for="poolPerimeter">Pool Perimeter (Linear Feet)</label>
                        <input type="number" id="poolPerimeter" value="80" min="30" max="300">
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label for="childrenPresent">Children Under Age 5 Access?</label>
                        <select id="childrenPresent">
                            <option value="yes">Yes (your kids or visitors)</option>
                            <option value="no">No</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="currentFence">Current Pool Barrier Status</label>
                        <select id="currentFence">
                            <option value="none">No fence/barrier</option>
                            <option value="noncompliant">Non-compliant fence (&lt;5 ft or climbable)</option>
                            <option value="compliant">CA-compliant fence (5+ ft, self-latching gate)</option>
                        </select>
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-group">
                        <label for="insuranceCoverage">Homeowner's Liability Coverage</label>
                        <select id="insuranceCoverage">
                            <option value="100000">$100,000</option>
                            <option value="300000" selected>$300,000</option>
                            <option value="500000">$500,000</option>
                            <option value="1000000">$1,000,000+</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="fenceType">Fence Solution Interest</label>
                        <select id="fenceType">
                            <option value="mesh">Removable Mesh (King's Pool Fencing)</option>
                            <option value="permanent">Permanent Aluminum/Wood</option>
                        </select>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateLiability()">Calculate Your Risk & Savings</button>
            </div>

            <div class="results" id="results">
                <!-- Dynamically populated -->
            </div>
        </div>

        <div class="footer">
            <p><strong>Built for King's Pool Fencing</strong></p>
            <p>Family-owned ‚Ä¢ Lifetime Warranty ‚Ä¢ Serving Los Angeles, Orange, Ventura & Santa Barbara Counties</p>
            <p><a href="https://www.kingspoolfencing.com/">Visit King's Pool Fencing</a> ‚Ä¢ Call (877) 521-5569</p>
        </div>
    </div>

    <script>
        function calculateLiability() {
            // Get inputs
            const homeValue = parseInt(document.getElementById('homeValue').value);
            const poolPerimeter = parseInt(document.getElementById('poolPerimeter').value);
            const childrenPresent = document.getElementById('childrenPresent').value;
            const currentFence = document.getElementById('currentFence').value;
            const insuranceCoverage = parseInt(document.getElementById('insuranceCoverage').value);
            const fenceType = document.getElementById('fenceType').value;

            // Calculate liability exposure
            let liabilityRisk = 0;
            let riskLevel = "Low";
            let riskColor = "safe";

            if (currentFence === 'none') {
                liabilityRisk = childrenPresent === 'yes' ? 2500000 : 1500000;
                riskLevel = "Critical";
                riskColor = "danger";
            } else if (currentFence === 'noncompliant') {
                liabilityRisk = childrenPresent === 'yes' ? 1500000 : 800000;
                riskLevel = "High";
                riskColor = "danger";
            } else {
                liabilityRisk = 50000;
                riskLevel = "Protected";
                riskColor = "safe";
            }

            const outOfPocketRisk = Math.max(0, liabilityRisk - insuranceCoverage);

            // Calculate fence costs
            let meshFenceCost = 1800 + (poolPerimeter * 18); // $18/ft average
            let permanentFenceCost = poolPerimeter * 85; // $85/ft for aluminum
            let installTime = fenceType === 'mesh' ? '1 day' : '5-10 days';

            // Insurance premium impact
            let premiumIncrease = 0;
            if (currentFence === 'none' || currentFence === 'noncompliant') {
                premiumIncrease = 350; // Annual increase without compliant fence
            }

            // Property value impact
            let propertyImpact = 0;
            if (currentFence === 'none' || currentFence === 'noncompliant') {
                propertyImpact = homeValue * 0.02; // 2% reduction in marketability
            }

            // Generate results HTML
            let resultsHTML = '';

            if (currentFence === 'none' || currentFence === 'noncompliant') {
                resultsHTML += `
                    <div class="danger-card">
                        <h2>$${liabilityRisk.toLocaleString()}</h2>
                        <p>Your Current Liability Exposure (${riskLevel} Risk)</p>
                    </div>

                    <div class="ca-stats">
                        <h3>üö® California Pool Drowning Statistics (2019-2025)</h3>
                        <ul>
                            <li><strong>35+ children drown annually</strong> in California pools</li>
                            <li>Drowning is the <strong>#1 cause of accidental death</strong> for kids under 5 in CA</li>
                            <li>For every child who dies, <strong>5 others require emergency care</strong></li>
                            <li><strong>Non-compliant pools</strong> face 3-5x higher incident rates</li>
                            <li>Average wrongful death settlement: <strong>$1.5M - $3.5M</strong></li>
                            <li>Insurance companies <strong>deny claims</strong> for non-compliant pools</li>
                        </ul>
                    </div>

                    <div class="comparison-grid">
                        <div class="comparison-card danger">
                            <h3>‚õî Without Compliant Fence</h3>
                            <div class="comparison-item">
                                <label>Liability Exposure:</label>
                                <span class="highlight-red">$${liabilityRisk.toLocaleString()}</span>
                            </div>
                            <div class="comparison-item">
                                <label>Out-of-Pocket Risk:</label>
                                <span class="highlight-red">$${outOfPocketRisk.toLocaleString()}</span>
                            </div>
                            <div class="comparison-item">
                                <label>Insurance Premium:</label>
                                <span>+$${premiumIncrease}/year</span>
                            </div>
                            <div class="comparison-item">
                                <label>CA Code Violation:</label>
                                <span>$500-2,500 fine</span>
                            </div>
                            <div class="comparison-item">
                                <label>Property Sale Delay:</label>
                                <span>30-60 days longer</span>
                            </div>
                            <div class="comparison-item">
                                <label>Legal Compliance:</label>
                                <span class="highlight-red">‚ùå Violates CA H&S Code</span>
                            </div>
                        </div>

                        <div class="comparison-card safe">
                            <h3>‚úÖ With Compliant Fence</h3>
                            <div class="comparison-item">
                                <label>Liability Exposure:</label>
                                <span class="highlight-green">$50,000</span>
                            </div>
                            <div class="comparison-item">
                                <label>Out-of-Pocket Risk:</label>
                                <span class="highlight-green">$0</span>
                            </div>
                            <div class="comparison-item">
                                <label>Insurance Premium:</label>
                                <span>Standard rate</span>
                            </div>
                            <div class="comparison-item">
                                <label>CA Code Compliance:</label>
                                <span>‚úì Certified</span>
                            </div>
                            <div class="comparison-item">
                                <label>Property Sale Impact:</label>
                                <span>No delay</span>
                            </div>
                            <div class="comparison-item">
                                <label>Legal Compliance:</label>
                                <span class="highlight-green">‚úÖ Meets CA H&S Code</span>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                resultsHTML += `
                    <div class="safe-card">
                        <h2>‚úÖ Compliant & Protected</h2>
                        <p>Your pool meets California safety requirements</p>
                    </div>
                `;
            }

            // Fence comparison
            resultsHTML += `
                <div class="legal-box">
                    <h3>üìã California Pool Fence Legal Requirements (AB 1020, SB 442)</h3>
                    <ul>
                        <li>Minimum 5-foot fence height (measured from grade)</li>
                        <li>Self-closing, self-latching gate (releases at 54"+ height)</li>
                        <li>Non-climbable surface (no footholds within 45" of top)</li>
                        <li>Maximum 2" gap between vertical bars</li>
                        <li>Gate must swing away from pool</li>
                        <li>Mesh pool fences meet all CA requirements when professionally installed</li>
                    </ul>
                </div>

                <h2 style="margin-top: 40px; margin-bottom: 20px; color: #333;">Fence Installation Cost Comparison</h2>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h3>üõ°Ô∏è Removable Mesh Fence (King's Pool Fencing)</h3>
                        <div class="comparison-item">
                            <label>Installation Cost:</label>
                            <span>$${meshFenceCost.toLocaleString()}</span>
                        </div>
                        <div class="comparison-item">
                            <label>Installation Time:</label>
                            <span>1 day</span>
                        </div>
                        <div class="comparison-item">
                            <label>Warranty:</label>
                            <span class="highlight-green">Lifetime</span>
                        </div>
                        <div class="comparison-item">
                            <label>Visibility:</label>
                            <span>96% (near-transparent)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Removable:</label>
                            <span>Yes (for parties)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Permits Required:</label>
                            <span>None</span>
                        </div>
                        <div class="comparison-item">
                            <label>Annual Maintenance:</label>
                            <span>$0 (covered by warranty)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Aesthetics:</label>
                            <span>Minimal visual impact</span>
                        </div>
                    </div>

                    <div class="comparison-card">
                        <h3>üî® Permanent Aluminum Fence</h3>
                        <div class="comparison-item">
                            <label>Installation Cost:</label>
                            <span>$${permanentFenceCost.toLocaleString()}</span>
                        </div>
                        <div class="comparison-item">
                            <label>Installation Time:</label>
                            <span>5-10 days</span>
                        </div>
                        <div class="comparison-item">
                            <label>Warranty:</label>
                            <span>1-10 years (limited)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Visibility:</label>
                            <span>40-60% (vertical bars)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Removable:</label>
                            <span>No (permanent)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Permits Required:</label>
                            <span>Yes ($300-800)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Annual Maintenance:</label>
                            <span>$150-300 (rust, repairs)</span>
                        </div>
                        <div class="comparison-item">
                            <label>Aesthetics:</label>
                            <span>Blocks views significantly</span>
                        </div>
                    </div>
                </div>
            `;

            // Savings calculation
            if (currentFence === 'none' || currentFence === 'noncompliant') {
                const totalRiskReduction = liabilityRisk - 50000;
                const fiveYearSavings = (premiumIncrease * 5) + (meshFenceCost < permanentFenceCost ? (permanentFenceCost - meshFenceCost) : 0);

                resultsHTML += `
                    <div class="savings-highlight">
                        <h3>üí∞ Your Compliance Investment vs. Risk Reduction</h3>
                        <div class="big-number">$${totalRiskReduction.toLocaleString()}</div>
                        <p style="margin-bottom: 20px;">Liability exposure reduction with compliant mesh fence</p>
                        <p><strong>Installation investment:</strong> $${meshFenceCost.toLocaleString()} (1-day install, lifetime warranty)</p>
                        <p><strong>5-year insurance savings:</strong> $${(premiumIncrease * 5).toLocaleString()}</p>
                        <p><strong>Risk eliminated:</strong> California code violations, denied insurance claims, wrongful death liability</p>
                        <p style="margin-top: 15px; font-size: 1.1em;"><strong>You're spending $${meshFenceCost.toLocaleString()} to eliminate $${totalRiskReduction.toLocaleString()} in liability exposure + gain lifetime warranty protection.</strong></p>
                    </div>
                `;
            }

            // Show results
            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Calculate on page load with defaults
        window.addEventListener('load', () => {
            calculateLiability();
        });
    </script>
</body>
</html>
