<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <title>Paint Project Cost Estimator | Fresh Coat Paint & Stain ‚Äî Kansas City</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 50:'#eff6ff', 100:'#dbeafe', 200:'#bfdbfe', 300:'#93c5fd', 400:'#60a5fa', 500:'#2563eb', 600:'#1d4ed8', 700:'#1e40af', 800:'#1e3a5f', 900:'#172554' },
                        dark: { 700:'#1e293b', 800:'#0f172a', 900:'#020617' },
                        paint: { red:'#ef4444', blue:'#3b82f6', green:'#22c55e', yellow:'#eab308', gray:'#6b7280', white:'#f8fafc' }
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .step-enter{animation:stepIn .35s ease-out}
        @keyframes stepIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
        .pulse-glow{animation:glow 2s ease-in-out infinite alternate}
        @keyframes glow{from{box-shadow:0 0 8px rgba(37,99,235,.3)}to{box-shadow:0 0 20px rgba(37,99,235,.5)}}
        .room-card{transition:all .2s}
        .room-card:hover{transform:translateY(-1px)}
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body class="bg-dark-900 text-white font-sans min-h-screen">

    <header class="bg-dark-800/90 backdrop-blur border-b border-dark-700/50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-brand-500 rounded-lg flex items-center justify-center">
                    <i data-lucide="paintbrush" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-tight">Fresh Coat Paint & Stain</h1>
                    <p class="text-xs text-gray-400">Kansas City Metro ‚Ä¢ (816) 803-5199</p>
                </div>
            </div>
            <span class="text-xs bg-brand-500/20 text-brand-400 px-3 py-1 rounded-full font-medium">Free Estimates</span>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8">
        <div class="text-center mb-10">
            <div class="inline-flex items-center gap-2 bg-dark-800 rounded-full px-4 py-2 mb-4">
                <i data-lucide="calculator" class="w-4 h-4 text-brand-400"></i>
                <span class="text-sm text-gray-400">Instant Project Estimator</span>
            </div>
            <h2 class="text-3xl md:text-4xl font-extrabold mb-3">Paint Project<br><span class="text-brand-400">Cost Calculator</span></h2>
            <p class="text-gray-400 max-w-lg mx-auto">Build your project scope and get a ballpark cost in under 2 minutes. Sherwin-Williams & Benjamin Moore quality.</p>
        </div>

        <!-- Step 1: Project Type -->
        <div id="step1" class="step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6">
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="palette" class="w-5 h-5 text-brand-400"></i> Project Type</h3>
                <p class="text-sm text-gray-400 mb-6">What are you looking to paint?</p>

                <div class="grid grid-cols-2 gap-3" id="projGrid">
                    <button onclick="selProj(this,'interior')" class="proj-btn bg-dark-700/50 border border-dark-700 rounded-xl p-5 text-center hover:border-brand-500/50 transition-all">
                        <div class="text-3xl mb-2">üè†</div>
                        <div class="font-semibold">Interior Painting</div>
                        <div class="text-xs text-gray-400 mt-1">Walls, ceilings, trim</div>
                    </button>
                    <button onclick="selProj(this,'exterior')" class="proj-btn bg-dark-700/50 border border-dark-700 rounded-xl p-5 text-center hover:border-brand-500/50 transition-all">
                        <div class="text-3xl mb-2">üè°</div>
                        <div class="font-semibold">Exterior Painting</div>
                        <div class="text-xs text-gray-400 mt-1">Siding, trim, shutters</div>
                    </button>
                    <button onclick="selProj(this,'deck')" class="proj-btn bg-dark-700/50 border border-dark-700 rounded-xl p-5 text-center hover:border-brand-500/50 transition-all">
                        <div class="text-3xl mb-2">ü™µ</div>
                        <div class="font-semibold">Deck Staining</div>
                        <div class="text-xs text-gray-400 mt-1">Decks, fences, porches</div>
                    </button>
                    <button onclick="selProj(this,'epoxy')" class="proj-btn bg-dark-700/50 border border-dark-700 rounded-xl p-5 text-center hover:border-brand-500/50 transition-all">
                        <div class="text-3xl mb-2">üèóÔ∏è</div>
                        <div class="font-semibold">Epoxy / Garage Floor</div>
                        <div class="text-xs text-gray-400 mt-1">Garage, basement, commercial</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 2: Details (Dynamic) -->
        <div id="step2" class="hidden step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6" id="detailsPanel"></div>
            <div class="flex justify-between">
                <button onclick="goStep(1)" class="text-gray-400 hover:text-white font-medium px-6 py-3 transition-all">‚Üê Back</button>
                <button onclick="calcEstimate()" class="bg-brand-500 hover:bg-brand-400 text-white font-bold px-8 py-3 rounded-xl transition-all pulse-glow">See My Estimate ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: Results -->
        <div id="step3" class="hidden step-enter">
            <div class="bg-dark-800/60 border border-dark-700/50 rounded-2xl p-6 md:p-8 mb-6">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center gap-2 bg-green-500/20 text-green-400 rounded-full px-4 py-2 text-sm font-medium mb-3">
                        <i data-lucide="check-circle" class="w-4 h-4"></i> Estimate Ready
                    </div>
                    <h3 class="text-2xl font-bold" id="resultTitle">Your Painting Estimate</h3>
                </div>

                <div class="bg-dark-900/60 rounded-xl p-6 mb-6 text-center">
                    <div class="text-sm text-gray-400 mb-1">Estimated Project Cost</div>
                    <div class="text-4xl md:text-5xl font-extrabold text-brand-400" id="totalCost">$2,400 ‚Äì $3,800</div>
                    <div class="text-sm text-gray-400 mt-2" id="costSubtext"></div>
                </div>

                <!-- Breakdown -->
                <div class="space-y-2 mb-6" id="breakdownList"></div>

                <!-- Paint Grade Comparison -->
                <div class="bg-dark-700/30 rounded-xl p-5 mb-6">
                    <h4 class="font-semibold text-sm mb-3 flex items-center gap-2"><i data-lucide="star" class="w-4 h-4 text-brand-400"></i> Paint Quality Comparison</h4>
                    <div class="space-y-2" id="gradeCompare"></div>
                </div>

                <!-- Trust -->
                <div class="bg-brand-500/10 border border-brand-500/30 rounded-xl p-4 mb-6">
                    <div class="flex items-start gap-3">
                        <i data-lucide="award" class="w-5 h-5 text-brand-400 flex-shrink-0 mt-0.5"></i>
                        <div>
                            <div class="font-semibold text-brand-400 text-sm">Fresh Coat Quality Promise</div>
                            <p class="text-xs text-gray-300 mt-1">Only Sherwin-Williams and Benjamin Moore paints. 12+ years in the KC Metro. Owner Andy Faron personally oversees every project. No surprises ‚Äî your detailed estimate is confirmed before work begins.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lead Form -->
            <div id="leadForm" class="bg-gradient-to-br from-brand-600/20 to-dark-800/60 border border-brand-500/30 rounded-2xl p-6 md:p-8 mb-6">
                <h3 class="text-xl font-bold mb-2 text-center">Get Your Detailed Estimate from Andy</h3>
                <p class="text-sm text-gray-400 text-center mb-6">Free on-site estimate within 48 hours. No obligation, no pressure.</p>
                <div class="space-y-4 max-w-md mx-auto">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-medium text-gray-300 mb-1">Name *</label>
                            <input type="text" id="leadName" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="Your name">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-300 mb-1">Phone *</label>
                            <input type="tel" id="leadPhone" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="(816) 555-0000">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-300 mb-1">Address</label>
                        <input type="text" id="leadAddr" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white placeholder-gray-500 focus:border-brand-500 focus:outline-none" placeholder="Project address">
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-300 mb-1">When Do You Want This Done?</label>
                        <select id="leadTiming" class="w-full bg-dark-900/60 border border-dark-700 rounded-lg px-4 py-2.5 text-sm text-white focus:border-brand-500 focus:outline-none">
                            <option value="asap">ASAP</option>
                            <option value="month" selected>Within a Month</option>
                            <option value="quarter">1-3 Months</option>
                            <option value="planning">Just Planning</option>
                        </select>
                    </div>
                    <button onclick="submitLead()" id="submitBtn" class="w-full bg-brand-500 hover:bg-brand-400 text-white font-bold py-3 rounded-xl transition-all text-lg">Request Free Estimate</button>
                </div>
            </div>

            <div id="successMsg" class="hidden bg-green-500/20 border border-green-500/40 rounded-2xl p-8 text-center mb-6">
                <div class="text-4xl mb-3">‚úÖ</div>
                <h3 class="text-xl font-bold text-green-400 mb-2">Estimate Request Sent!</h3>
                <p class="text-gray-300">Andy from Fresh Coat Paint & Stain will contact you within 48 hours for a free on-site estimate.</p>
                <p class="text-gray-400 text-sm mt-3">Questions? Call <a href="tel:8168035199" class="text-brand-400 underline">(816) 803-5199</a></p>
            </div>
        </div>
    </main>

    <footer class="border-t border-dark-800 py-6 text-center text-xs text-gray-500">
        <p>Built for Fresh Coat Paint & Stain ‚Ä¢ Independence, MO 64057</p>
        <p class="mt-1">Estimates are approximate. Final pricing confirmed during on-site visit.</p>
    </footer>

    <script>
        let state = { project:null, rooms:[], details:{} };

        function selProj(el, val) {
            state.project = val;
            state.details = {};
            document.querySelectorAll('.proj-btn').forEach(b => { b.classList.remove('border-brand-500','bg-brand-500/10'); b.classList.add('border-dark-700'); });
            el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700');
            setTimeout(() => { buildDetails(val); goStep(2); }, 250);
        }

        function buildDetails(proj) {
            const panel = document.getElementById('detailsPanel');
            let html = '';

            if (proj === 'interior') {
                html = `
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="home" class="w-5 h-5 text-brand-400"></i> Interior Project Details</h3>
                <p class="text-sm text-gray-400 mb-6">Select the rooms you want painted.</p>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-6" id="roomGrid">
                    ${['Living Room|üõãÔ∏è|250','Bedroom|üõèÔ∏è|200','Kitchen|üç≥|200','Bathroom|üöø|150','Dining Room|üçΩÔ∏è|180','Hallway|üö™|120','Office|üíª|180','Basement|üì¶|350','Ceiling (per room)|‚¨ÜÔ∏è|100','Trim & Doors|üö™|80'].map(r => {
                        const [name,icon,sqft] = r.split('|');
                        return `<button onclick="toggleRoom(this,'${name}',${sqft})" class="room-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all room-card">
                            <div class="text-xl mb-1">${icon}</div>
                            <div class="text-xs font-medium">${name}</div>
                        </button>`;
                    }).join('')}
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Paint Grade</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selGrade(this,'good')" class="grade-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                            <div class="text-sm font-bold text-blue-400">Good</div>
                            <div class="text-xs text-gray-400">Standard quality</div>
                        </button>
                        <button onclick="selGrade(this,'better')" class="grade-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all border-brand-500 bg-brand-500/10">
                            <div class="text-sm font-bold text-green-400">Better</div>
                            <div class="text-xs text-gray-400">Sherwin-Williams</div>
                        </button>
                        <button onclick="selGrade(this,'best')" class="grade-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                            <div class="text-sm font-bold text-purple-400">Best</div>
                            <div class="text-xs text-gray-400">Benjamin Moore</div>
                        </button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Wall Condition</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selCond(this,'good')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                            <div class="text-sm font-medium">Good</div>
                            <div class="text-xs text-gray-400">Minor touch-ups</div>
                        </button>
                        <button onclick="selCond(this,'fair')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                            <div class="text-sm font-medium">Fair</div>
                            <div class="text-xs text-gray-400">Some patching</div>
                        </button>
                        <button onclick="selCond(this,'poor')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                            <div class="text-sm font-medium">Needs Work</div>
                            <div class="text-xs text-gray-400">Heavy prep</div>
                        </button>
                    </div>
                </div>`;
                state.details.grade = 'better';
            } else if (proj === 'exterior') {
                html = `
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="home" class="w-5 h-5 text-brand-400"></i> Exterior Project Details</h3>
                <p class="text-sm text-gray-400 mb-6">Tell us about your home's exterior.</p>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Home Size</label>
                    <div class="grid grid-cols-3 gap-3">
                        ${[['small','Under 1,500 sq ft','üè†'],['medium','1,500‚Äì2,500 sq ft','üè°'],['large','2,500+ sq ft','üèòÔ∏è']].map(([v,l,i]) =>
                            `<button onclick="selSize(this,'${v}')" class="size-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                                <div class="text-xl mb-1">${i}</div>
                                <div class="text-xs font-medium">${l}</div>
                            </button>`
                        ).join('')}
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Stories</label>
                    <div class="grid grid-cols-3 gap-3">
                        ${[['1','1 Story'],['2','2 Story'],['3','3+ Story']].map(([v,l]) =>
                            `<button onclick="selStories(this,'${v}')" class="story-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                                <div class="text-sm font-medium">${l}</div>
                            </button>`
                        ).join('')}
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Siding Type</label>
                    <div class="grid grid-cols-2 gap-3">
                        ${[['wood','Wood / Cedar'],['vinyl','Vinyl'],['brick','Brick (trim only)'],['stucco','Stucco / Other']].map(([v,l]) =>
                            `<button onclick="selSiding(this,'${v}')" class="siding-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all">
                                <div class="text-sm font-medium">${l}</div>
                            </button>`
                        ).join('')}
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Current Condition</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selCond(this,'good')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">Good</div><div class="text-xs text-gray-400">Minimal prep</div></button>
                        <button onclick="selCond(this,'fair')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">Fair</div><div class="text-xs text-gray-400">Some scraping/repair</div></button>
                        <button onclick="selCond(this,'poor')" class="cond-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">Poor</div><div class="text-xs text-gray-400">Major prep needed</div></button>
                    </div>
                </div>`;
            } else if (proj === 'deck') {
                html = `
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="fence" class="w-5 h-5 text-brand-400"></i> Deck/Fence Project</h3>
                <p class="text-sm text-gray-400 mb-6">Tell us about your staining project.</p>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">What Are You Staining?</label>
                    <div class="grid grid-cols-3 gap-3">
                        ${[['deck','Deck','ü™µ'],['fence','Fence','üèóÔ∏è'],['porch','Porch/Pergola','üè†']].map(([v,l,i]) =>
                            `<button onclick="selDeckType(this,'${v}')" class="dtype-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-xl mb-1">${i}</div><div class="text-xs font-medium">${l}</div></button>`
                        ).join('')}
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Approximate Size (sq ft)</label>
                    <div class="grid grid-cols-3 gap-3">
                        ${[['small','Under 200','Small'],['medium','200‚Äì500','Medium'],['large','500+','Large']].map(([v,sq,l]) =>
                            `<button onclick="selDeckSize(this,'${v}')" class="dsize-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-bold">${l}</div><div class="text-xs text-gray-400">${sq} sq ft</div></button>`
                        ).join('')}
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Needs Stripping/Sanding?</label>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="selStrip(this,false)" class="strip-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">No ‚Äî Ready to Stain</div></button>
                        <button onclick="selStrip(this,true)" class="strip-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">Yes ‚Äî Needs Prep</div></button>
                    </div>
                </div>`;
            } else {
                html = `
                <h3 class="text-xl font-bold mb-1 flex items-center gap-2"><i data-lucide="layers" class="w-5 h-5 text-brand-400"></i> Epoxy Floor Project</h3>
                <p class="text-sm text-gray-400 mb-6">Tell us about your floor project.</p>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-3">Floor Area</label>
                    <div class="grid grid-cols-3 gap-3">
                        ${[['1car','1-Car Garage (~250 sq ft)'],['2car','2-Car Garage (~500 sq ft)'],['3car','3-Car / Large (~750+ sq ft)']].map(([v,l]) =>
                            `<button onclick="selFloor(this,'${v}')" class="floor-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-xs font-medium">${l}</div></button>`
                        ).join('')}
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-3">Epoxy Type</label>
                    <div class="grid grid-cols-2 gap-3">
                        ${[['solid','Solid Color','$'],['flake','Decorative Flake','$$'],['metallic','Metallic Epoxy','$$$']].map(([v,l,p]) =>
                            `<button onclick="selEpoxy(this,'${v}')" class="epoxy-btn bg-dark-700/50 border border-dark-700 rounded-xl p-3 text-center hover:border-brand-500/50 transition-all"><div class="text-sm font-medium">${l}</div><div class="text-xs text-gray-400">${p}</div></button>`
                        ).join('')}
                    </div>
                </div>`;
            }

            panel.innerHTML = html;
            lucide.createIcons();
        }

        // Selection functions
        state.rooms = [];
        function toggleRoom(el, name, sqft) {
            const idx = state.rooms.findIndex(r => r.name===name);
            if(idx>-1) { state.rooms.splice(idx,1); el.classList.remove('border-brand-500','bg-brand-500/10'); el.classList.add('border-dark-700'); }
            else { state.rooms.push({name,sqft}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        }
        function selGrade(el,v) { state.details.grade=v; document.querySelectorAll('.grade-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selCond(el,v) { state.details.condition=v; document.querySelectorAll('.cond-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selSize(el,v) { state.details.size=v; document.querySelectorAll('.size-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selStories(el,v) { state.details.stories=v; document.querySelectorAll('.story-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selSiding(el,v) { state.details.siding=v; document.querySelectorAll('.siding-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selDeckType(el,v) { state.details.deckType=v; document.querySelectorAll('.dtype-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selDeckSize(el,v) { state.details.deckSize=v; document.querySelectorAll('.dsize-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selStrip(el,v) { state.details.strip=v; document.querySelectorAll('.strip-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selFloor(el,v) { state.details.floorSize=v; document.querySelectorAll('.floor-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }
        function selEpoxy(el,v) { state.details.epoxyType=v; document.querySelectorAll('.epoxy-btn').forEach(b=>{b.classList.remove('border-brand-500','bg-brand-500/10');b.classList.add('border-dark-700');}); el.classList.add('border-brand-500','bg-brand-500/10'); el.classList.remove('border-dark-700'); }

        function goStep(n) {
            [1,2,3].forEach(i => document.getElementById('step'+i).classList.add('hidden'));
            document.getElementById('step'+n).classList.remove('hidden');
            window.scrollTo({top:0,behavior:'smooth'});
        }

        function calcEstimate() {
            const cond = state.details.condition || 'fair';
            const condMult = {good:1,fair:1.15,poor:1.35}[cond];
            const gradeMult = {good:0.85,better:1,best:1.2}[state.details.grade||'better'];
            let low=0, high=0, title='', breakdown=[];

            if (state.project === 'interior') {
                const totalSqft = state.rooms.reduce((s,r) => s+r.sqft, 0) || 400;
                const baseLow = 2.50, baseHigh = 4.50;
                low = Math.round(totalSqft * baseLow * gradeMult * condMult / 50)*50;
                high = Math.round(totalSqft * baseHigh * gradeMult * condMult / 50)*50;
                title = `Interior Painting ‚Äî ${state.rooms.length || 1} room${state.rooms.length!==1?'s':''}`;
                breakdown = state.rooms.map(r => ({label:r.name, value:`~${r.sqft} sq ft`}));
                breakdown.push({label:'Paint Grade', value:(state.details.grade||'better').charAt(0).toUpperCase()+(state.details.grade||'better').slice(1)});
                breakdown.push({label:'Wall Prep', value:cond.charAt(0).toUpperCase()+cond.slice(1)});
            } else if (state.project === 'exterior') {
                const sizeMult = {small:1,medium:1.6,large:2.4}[state.details.size||'medium'];
                const storyMult = {1:1,2:1.3,3:1.6}[state.details.stories||'1'];
                const sidingMult = {wood:1.1,vinyl:0.9,brick:0.7,stucco:1}[state.details.siding||'wood'];
                const base = 2800;
                low = Math.round(base * sizeMult * storyMult * sidingMult * condMult * 0.8 / 100)*100;
                high = Math.round(base * sizeMult * storyMult * sidingMult * condMult * 1.3 / 100)*100;
                title = 'Exterior Painting';
                breakdown = [{label:'Home Size',value:(state.details.size||'medium').charAt(0).toUpperCase()+(state.details.size||'medium').slice(1)},{label:'Stories',value:state.details.stories||'1'},{label:'Siding',value:(state.details.siding||'wood').charAt(0).toUpperCase()+(state.details.siding||'wood').slice(1)},{label:'Condition',value:cond.charAt(0).toUpperCase()+cond.slice(1)}];
            } else if (state.project === 'deck') {
                const deckSizeMult = {small:1,medium:2,large:3.5}[state.details.deckSize||'medium'];
                const stripAdd = state.details.strip ? 1.4 : 1;
                low = Math.round(350 * deckSizeMult * stripAdd * 0.8 / 50)*50;
                high = Math.round(350 * deckSizeMult * stripAdd * 1.3 / 50)*50;
                title = (state.details.deckType||'Deck').charAt(0).toUpperCase()+(state.details.deckType||'deck').slice(1)+' Staining';
                breakdown = [{label:'Type',value:title},{label:'Size',value:(state.details.deckSize||'medium')},{label:'Stripping/Sanding',value:state.details.strip?'Yes':'No'}];
            } else {
                const floorMult = {'1car':1,'2car':1.9,'3car':2.8}[state.details.floorSize||'2car'];
                const epoxyMult = {solid:1,flake:1.3,metallic:1.8}[state.details.epoxyType||'flake'];
                low = Math.round(800 * floorMult * epoxyMult * 0.85 / 100)*100;
                high = Math.round(800 * floorMult * epoxyMult * 1.2 / 100)*100;
                title = 'Epoxy Floor Coating';
                breakdown = [{label:'Floor Size',value:(state.details.floorSize||'2car').replace('car','-Car Garage')},{label:'Epoxy Type',value:(state.details.epoxyType||'flake').charAt(0).toUpperCase()+(state.details.epoxyType||'flake').slice(1)}];
            }

            document.getElementById('resultTitle').textContent = title + ' Estimate';
            document.getElementById('totalCost').textContent = `$${low.toLocaleString()} ‚Äì $${high.toLocaleString()}`;
            document.getElementById('costSubtext').textContent = 'Includes labor, materials, and prep work';

            const bdList = document.getElementById('breakdownList');
            bdList.innerHTML = breakdown.map(b => `<div class="flex justify-between bg-dark-700/30 rounded-lg px-4 py-3"><span class="text-sm text-gray-400">${b.label}</span><span class="text-sm font-medium">${b.value}</span></div>`).join('');

            // Grade comparison
            const gc = document.getElementById('gradeCompare');
            const grades = [
                {name:'Good (Standard)',mult:0.85,brand:'Quality paint',color:'text-blue-400'},
                {name:'Better (Sherwin-Williams)',mult:1,brand:'Duration / Emerald',color:'text-green-400'},
                {name:'Best (Benjamin Moore)',mult:1.2,brand:'Regal / Aura',color:'text-purple-400'}
            ];
            gc.innerHTML = grades.map(g => {
                const gl = Math.round(low * g.mult / (gradeMult||1) / 50)*50;
                const gh = Math.round(high * g.mult / (gradeMult||1) / 50)*50;
                const sel = (g.mult===gradeMult) || (g.name.includes('Better') && !state.details.grade);
                return `<div class="flex items-center justify-between ${sel?'bg-brand-500/10 border border-brand-500/30':'bg-dark-800/40'} rounded-lg px-4 py-3">
                    <div><div class="text-sm font-medium ${g.color}">${g.name} ${sel?'‚úì':''}</div><div class="text-xs text-gray-400">${g.brand}</div></div>
                    <div class="text-sm font-bold ${sel?'text-brand-400':'text-gray-300'}">$${gl.toLocaleString()} ‚Äì $${gh.toLocaleString()}</div>
                </div>`;
            }).join('');

            localStorage.setItem('fc_estimate', JSON.stringify({...state,low,high,ts:new Date().toISOString()}));
            goStep(3);
            lucide.createIcons();
        }

        function submitLead() {
            const name = document.getElementById('leadName').value.trim();
            const phone = document.getElementById('leadPhone').value.trim();
            if(!name||!phone){alert('Please enter your name and phone.');return;}
            const lead={name,phone,address:document.getElementById('leadAddr').value.trim(),timing:document.getElementById('leadTiming').value,estimate:JSON.parse(localStorage.getItem('fc_estimate')||'{}'),submitted:new Date().toISOString()};
            localStorage.setItem('fc_lead',JSON.stringify(lead));
            document.getElementById('leadForm').classList.add('hidden');
            document.getElementById('successMsg').classList.remove('hidden');
        }

        lucide.createIcons();
    </script>

<!-- BennyCuTools Purchase CTA ‚Äî injected by inject-cta.py -->
<style>
#bct-cta-bar {
  position: fixed;
  bottom: 48px;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-top: 2px solid #6366f1;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  z-index: 99998;
  flex-wrap: wrap;
  box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
}
#bct-cta-bar .bct-cta-text {
  color: #e4e4e7;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-size: 14px;
  font-weight: 500;
}
#bct-cta-bar .bct-cta-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 20px;
  background: #6366f1;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: 6px;
  text-decoration: none;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
}
#bct-cta-bar .bct-cta-btn:hover {
  background: #4f46e5;
  transform: translateY(-1px);
}
#bct-cta-bar .bct-cta-btn-secondary {
  background: transparent;
  border: 1px solid #6366f1;
  color: #a5b4fc;
}
#bct-cta-bar .bct-cta-btn-secondary:hover {
  background: rgba(99,102,241,0.15);
}
@media (max-width: 600px) {
  #bct-cta-bar {
    flex-direction: column;
    gap: 8px;
    padding: 8px 12px;
    bottom: 44px;
  }
  #bct-cta-bar .bct-cta-text { font-size: 12px; }
  #bct-cta-bar .bct-cta-btn { font-size: 13px; padding: 7px 16px; width: 100%; justify-content: center; }
}
</style>
<div id="bct-cta-bar" role="banner" aria-label="Purchase this tool">
  <span class="bct-cta-text">Like this tool? Make it yours.</span>
  <a class="bct-cta-btn" id="bct-buy-btn" href="https://bennycutools.com/buy.html">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
    Get It ‚Äî $200 One-Time
  </a>
  <a class="bct-cta-btn bct-cta-btn-secondary" href="mailto:cuuper225@gmail.com?subject=Question%20about%20my%20custom%20tool">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
    Questions? Email Ben
  </a>
</div>
<script>
// Auto-fill the buy link with the current tool's page name
(function(){
  try {
    var pg = location.pathname.replace(/.*\//, '').replace('.html','');
    var buyBtn = document.getElementById('bct-buy-btn');
    if (buyBtn && pg) {
      buyBtn.href = 'https://bennycutools.com/buy.html?tool=' + encodeURIComponent(pg);
    }
  } catch(e){}
})();
</script>
<!-- End BennyCuTools Purchase CTA -->

</body>
</html>
