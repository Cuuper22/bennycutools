<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Gutter System Estimator - The Gutter Specialist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%); }
        .copper-accent { color: #b87333; }
        .copper-bg { background-color: #b87333; }
        .material-card { transition: all 0.3s ease; border: 2px solid transparent; }
        .material-card:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        .material-card.selected { border-color: #b87333; background-color: #fef3e7; }
        .guard-option { transition: all 0.3s ease; }
        .guard-option:hover { background-color: #f1f5f9; }
        .guard-option.selected { background-color: #dbeafe; border-color: #3b82f6; }
        .price-highlight { background: linear-gradient(135deg, #fef3e7 0%, #fff7ed 100%); }
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white py-8 px-4 shadow-lg">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center gap-3 mb-2">
                <i data-lucide="home" class="copper-accent" style="width: 32px; height: 32px;"></i>
                <h1 class="text-3xl md:text-4xl font-bold">The Gutter Specialist</h1>
            </div>
            <p class="text-blue-200 text-sm md:text-base">Connecticut's Best Gutter Company - 3 Years Running</p>
            <p class="text-blue-300 text-xs mt-1">Serving New Haven, Middlesex & New London Counties</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="max-w-4xl mx-auto p-4 md:p-6 my-6">
        
        <!-- Introduction Card -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-blue-800">
            <div class="flex items-start gap-4">
                <i data-lucide="info" class="text-blue-800 mt-1" style="width: 24px; height: 24px;"></i>
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2">Instant Gutter System Cost Estimator</h2>
                    <p class="text-gray-600 mb-2">Get a professional cost estimate for your gutter project in 60 seconds. This tool uses Franklin Mendez's 20+ years of experience to give you accurate pricing for the CT Shoreline.</p>
                    <p class="text-sm text-gray-500 italic">All estimates include labor, materials, and our 3-year workmanship guarantee.</p>
                </div>
            </div>
        </div>

        <!-- Step 1: Home Details -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-blue-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                Tell Us About Your Home
            </h3>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Home Type</label>
                    <select id="homeType" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-800 focus:outline-none">
                        <option value="">Select home type...</option>
                        <option value="ranch">Single Story / Ranch</option>
                        <option value="two-story">Two Story</option>
                        <option value="colonial">Colonial / Three Story</option>
                        <option value="historic">Historic Shoreline Home</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Estimate Linear Footage</label>
                    <input type="number" id="linearFeet" placeholder="e.g., 150" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-800 focus:outline-none" min="50" max="500">
                    <p class="text-xs text-gray-500 mt-1">Don't know? Average single-story = 150 ft, two-story = 200 ft</p>
                </div>
            </div>

            <div class="mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Gutter Profile Style</label>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="material-card border-2 rounded-lg p-4 cursor-pointer" data-profile="k-style">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-gray-800">K-Style (Standard)</h4>
                            <i data-lucide="square" style="width: 20px; height: 20px;"></i>
                        </div>
                        <p class="text-sm text-gray-600">Flat bottom, decorative front. Most common, holds more water.</p>
                    </div>
                    <div class="material-card border-2 rounded-lg p-4 cursor-pointer" data-profile="half-round">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-gray-800">Half-Round</h4>
                            <i data-lucide="circle" style="width: 20px; height: 20px;"></i>
                        </div>
                        <p class="text-sm text-gray-600">Classic curved profile. Perfect for historic coastal homes.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Material Selection -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-blue-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                Choose Your Material
            </h3>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                <p class="text-sm text-blue-800 flex items-start gap-2">
                    <i data-lucide="waves" style="width: 20px; height: 20px;" class="mt-0.5"></i>
                    <span><strong>Coastal CT Homes:</strong> Salt air accelerates corrosion. Franklin recommends copper or premium-coated aluminum for homes within 2 miles of Long Island Sound.</span>
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-4" id="materialOptions">
                <div class="material-card border-2 rounded-lg p-4 cursor-pointer" data-material="aluminum" data-cost="8">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Aluminum</h4>
                        <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Most Popular</span>
                    </div>
                    <p class="text-2xl font-bold copper-accent mb-2">$8-12/ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Lightweight & durable</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Won't rust</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> 20+ year lifespan</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Can dent in storms</li>
                    </ul>
                </div>

                <div class="material-card border-2 rounded-lg p-4 cursor-pointer" data-material="copper" data-cost="25">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Copper</h4>
                        <span class="text-xs copper-bg text-white px-2 py-1 rounded">Premium</span>
                    </div>
                    <p class="text-2xl font-bold copper-accent mb-2">$25-35/ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> 50-100 year lifespan</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Beautiful patina develops</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Perfect for coastal/historic</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Increases home value</li>
                    </ul>
                </div>

                <div class="material-card border-2 rounded-lg p-4 cursor-pointer" data-material="steel" data-cost="9">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Galvanized Steel</h4>
                    </div>
                    <p class="text-2xl font-bold copper-accent mb-2">$9-13/ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Very strong</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Resists damage</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-red-600 mt-0.5"></i> Can rust in salt air</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> 20-year lifespan</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Step 3: Gutter Guards -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="bg-blue-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">3</span>
                Add Gutter Guards? (Optional)
            </h3>

            <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4">
                <p class="text-sm text-amber-800 flex items-start gap-2">
                    <i data-lucide="leaf" style="width: 20px; height: 20px;" class="mt-0.5"></i>
                    <span><strong>CT Shoreline Homes:</strong> Oak, maple, and pine trees mean heavy debris. Guards reduce cleaning from 4x/year to 1x/year. Franklin says they pay for themselves in 3-4 years.</span>
                </p>
            </div>

            <div class="space-y-3">
                <div class="guard-option border-2 rounded-lg p-4 cursor-pointer flex items-start gap-4" data-guard="none" data-guard-cost="0">
                    <input type="radio" name="guard" value="none" class="mt-1">
                    <div class="flex-1">
                        <h4 class="font-semibold text-gray-800">No Guards</h4>
                        <p class="text-sm text-gray-600">I'll clean them myself or hire seasonal cleaning</p>
                        <p class="text-lg font-bold copper-accent mt-1">$0</p>
                    </div>
                </div>

                <div class="guard-option border-2 rounded-lg p-4 cursor-pointer flex items-start gap-4" data-guard="screen" data-guard-cost="3">
                    <input type="radio" name="guard" value="screen">
                    <div class="flex-1">
                        <h4 class="font-semibold text-gray-800">Screen Guards</h4>
                        <p class="text-sm text-gray-600">Basic mesh protection. Blocks large debris, needs occasional cleaning.</p>
                        <p class="text-lg font-bold copper-accent mt-1">+$3-5/ft</p>
                    </div>
                </div>

                <div class="guard-option border-2 rounded-lg p-4 cursor-pointer flex items-start gap-4" data-guard="micro-mesh" data-guard-cost="6">
                    <input type="radio" name="guard" value="micro-mesh">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <h4 class="font-semibold text-gray-800">Micro-Mesh Guards</h4>
                            <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Recommended</span>
                        </div>
                        <p class="text-sm text-gray-600">Hospital-grade stainless steel mesh. Blocks everything including pine needles.</p>
                        <p class="text-lg font-bold copper-accent mt-1">+$6-8/ft</p>
                    </div>
                </div>

                <div class="guard-option border-2 rounded-lg p-4 cursor-pointer flex items-start gap-4" data-guard="reverse-curve" data-guard-cost="8">
                    <input type="radio" name="guard" value="reverse-curve">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <h4 class="font-semibold text-gray-800">Reverse-Curve Guards</h4>
                            <span class="text-xs copper-bg text-white px-2 py-1 rounded">Premium</span>
                        </div>
                        <p class="text-sm text-gray-600">Surface tension pulls water in, debris slides off. Nearly maintenance-free.</p>
                        <p class="text-lg font-bold copper-accent mt-1">+$8-12/ft</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculate Button -->
        <div class="text-center mb-6">
            <button id="calculateBtn" class="gradient-bg text-white px-8 py-4 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                <span class="flex items-center gap-2 justify-center">
                    <i data-lucide="calculator"></i>
                    Calculate My Estimate
                </span>
            </button>
        </div>

        <!-- Results Section (hidden initially) -->
        <div id="resultsSection" class="hidden">
            <!-- Cost Breakdown -->
            <div class="price-highlight rounded-lg shadow-lg p-6 mb-6 border-2 border-amber-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <i data-lucide="receipt" class="copper-accent"></i>
                    Your Estimated Investment
                </h3>

                <div class="space-y-3 mb-4">
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200">
                        <span class="text-gray-700">Base Gutter System (<span id="result-footage"></span> ft)</span>
                        <span class="font-semibold text-gray-800" id="result-base"></span>
                    </div>
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200">
                        <span class="text-gray-700">Material: <span id="result-material-name"></span></span>
                        <span class="text-sm text-gray-600" id="result-material-detail"></span>
                    </div>
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200" id="result-guard-row">
                        <span class="text-gray-700">Gutter Guards: <span id="result-guard-name"></span></span>
                        <span class="font-semibold text-gray-800" id="result-guard-cost"></span>
                    </div>
                </div>

                <div class="bg-blue-800 text-white rounded-lg p-4 mb-4">
                    <div class="flex justify-between items-center">
                        <span class="text-xl font-bold">Total Project Cost:</span>
                        <span class="text-3xl font-bold" id="result-total"></span>
                    </div>
                    <p class="text-sm text-blue-200 mt-2">Includes labor, materials, downspouts, and 3-year workmanship guarantee</p>
                </div>

                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                    <h4 class="font-semibold text-green-800 mb-2 flex items-center gap-2">
                        <i data-lucide="shield-check" style="width: 20px; height: 20px;"></i>
                        What's Included:
                    </h4>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Professional installation by licensed crew</li>
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Hidden hangers every 24 inches (stronger than spikes)</li>
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Sealed mitered corners (no leaks)</li>
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Downspouts with underground extensions (where needed)</li>
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Post-installation site cleanup</li>
                        <li class="flex items-start gap-2"><i data-lucide="check" style="width: 16px; height: 16px;" class="mt-0.5"></i> Franklin's personal quality check</li>
                    </ul>
                </div>
            </div>

            <!-- Material Recommendation -->
            <div id="recommendation" class="bg-white rounded-lg shadow-md p-6 mb-6">
                <!-- Dynamically populated -->
            </div>

            <!-- Next Steps CTA -->
            <div class="gradient-bg text-white rounded-lg shadow-lg p-8 text-center">
                <h3 class="text-2xl font-bold mb-3">Ready to Protect Your Home?</h3>
                <p class="text-blue-200 mb-6">Franklin Mendez personally checks every job. Get your free on-site quote in 24-48 hours.</p>
                
                <div class="bg-white/10 rounded-lg p-4 mb-6 backdrop-blur-sm">
                    <div class="flex items-center justify-center gap-6 flex-wrap">
                        <a href="tel:+18604435488" class="flex items-center gap-2 text-white hover:text-amber-200 transition-colors">
                            <i data-lucide="phone" style="width: 20px; height: 20px;"></i>
                            <span class="font-semibold">(860) 443-5488</span>
                        </a>
                        <a href="mailto:franklin@gutters-ct.com" class="flex items-center gap-2 text-white hover:text-amber-200 transition-colors">
                            <i data-lucide="mail" style="width: 20px; height: 20px;"></i>
                            <span class="font-semibold">franklin@gutters-ct.com</span>
                        </a>
                    </div>
                </div>

                <a href="https://gutters-ct.com" target="_blank" class="inline-block copper-bg text-white px-8 py-3 rounded-lg font-bold text-lg hover:bg-opacity-90 transition-all transform hover:scale-105">
                    Visit Our Website
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-8 mt-12">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h3 class="text-xl font-bold text-white mb-2">The Gutter Specialist</h3>
            <p class="text-sm mb-1">101 Old Horse Hill Road, Westbrook, CT 06498</p>
            <p class="text-sm mb-1">Licensed & Insured | CT Home Improvement License #HIC.0650321</p>
            <p class="text-sm mb-3">Serving New Haven, Middlesex & New London Counties</p>
            <p class="text-xs text-gray-400 italic">"Connecticut's Best Gutter Company - 3 Years Running"</p>
            <p class="text-xs text-gray-500 mt-4">This estimator was built by Ben, an independent developer. Cost estimates are based on industry averages and Franklin's typical pricing. Final quotes may vary based on roof height, accessibility, fascia condition, and specific project details.</p>
        </div>
    </footer>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // State
        let selectedProfile = null;
        let selectedMaterial = null;
        let selectedGuard = 'none';

        // Profile selection
        document.querySelectorAll('[data-profile]').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('[data-profile]').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedProfile = card.dataset.profile;
                checkFormComplete();
            });
        });

        // Material selection
        document.querySelectorAll('[data-material]').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('[data-material]').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedMaterial = {
                    type: card.dataset.material,
                    baseCost: parseInt(card.dataset.cost)
                };
                checkFormComplete();
            });
        });

        // Guard selection
        document.querySelectorAll('[data-guard]').forEach(option => {
            option.addEventListener('click', () => {
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = true;
                document.querySelectorAll('[data-guard]').forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                selectedGuard = {
                    type: option.dataset.guard,
                    cost: parseInt(option.dataset.guardCost)
                };
            });
        });

        // Set default guard to "none"
        document.querySelector('[data-guard="none"]').click();

        // Form validation
        function checkFormComplete() {
            const homeType = document.getElementById('homeType').value;
            const linearFeet = document.getElementById('linearFeet').value;
            const btn = document.getElementById('calculateBtn');
            
            if (homeType && linearFeet && selectedProfile && selectedMaterial) {
                btn.disabled = false;
            } else {
                btn.disabled = true;
            }
        }

        document.getElementById('homeType').addEventListener('change', checkFormComplete);
        document.getElementById('linearFeet').addEventListener('input', checkFormComplete);

        // Calculate
        document.getElementById('calculateBtn').addEventListener('click', () => {
            const linearFeet = parseInt(document.getElementById('linearFeet').value);
            const homeType = document.getElementById('homeType').value;
            
            // Base cost calculation
            const materialCostMin = selectedMaterial.baseCost * linearFeet;
            const materialCostMax = (selectedMaterial.baseCost + 4) * linearFeet;
            
            // Guard cost
            const guardCostMin = selectedGuard.cost * linearFeet;
            const guardCostMax = (selectedGuard.cost + 4) * linearFeet;
            
            const totalMin = materialCostMin + guardCostMin;
            const totalMax = materialCostMax + guardCostMax;

            // Display results
            document.getElementById('result-footage').textContent = linearFeet;
            document.getElementById('result-base').textContent = `$${materialCostMin.toLocaleString()} - $${materialCostMax.toLocaleString()}`;
            
            const materialNames = {
                'aluminum': 'Premium Aluminum',
                'copper': 'Copper',
                'steel': 'Galvanized Steel'
            };
            document.getElementById('result-material-name').textContent = materialNames[selectedMaterial.type];
            document.getElementById('result-material-detail').textContent = `$${selectedMaterial.baseCost}-${selectedMaterial.baseCost + 4}/ft`;

            // Guard display
            if (selectedGuard.type === 'none') {
                document.getElementById('result-guard-row').classList.add('hidden');
            } else {
                document.getElementById('result-guard-row').classList.remove('hidden');
                const guardNames = {
                    'screen': 'Screen Guards',
                    'micro-mesh': 'Micro-Mesh Guards',
                    'reverse-curve': 'Reverse-Curve Guards'
                };
                document.getElementById('result-guard-name').textContent = guardNames[selectedGuard.type];
                document.getElementById('result-guard-cost').textContent = `$${guardCostMin.toLocaleString()} - $${guardCostMax.toLocaleString()}`;
            }

            document.getElementById('result-total').textContent = `$${totalMin.toLocaleString()} - $${totalMax.toLocaleString()}`;

            // Material recommendation
            let recommendation = '';
            if (homeType === 'historic' || selectedMaterial.type === 'copper') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="copper-bg text-white p-3 rounded-lg">
                            <i data-lucide="award" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Excellent Choice for Your Home</h4>
                            <p class="text-gray-700 mb-3">Copper gutters are the gold standard for historic and coastal Connecticut homes. They'll outlast the roof, develop a beautiful patina, and increase property value.</p>
                            <p class="text-sm text-gray-600"><strong>Franklin's note:</strong> "I've installed copper on 50+ shoreline homes. The upfront cost is higher, but you'll never replace them. They're the last gutters your home will need."</p>
                        </div>
                    </div>
                `;
            } else if (selectedMaterial.type === 'aluminum') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-green-600 text-white p-3 rounded-lg">
                            <i data-lucide="thumbs-up" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Smart, Reliable Choice</h4>
                            <p class="text-gray-700 mb-3">Aluminum is our most popular material for good reason. It won't rust in coastal air, costs less than copper, and lasts 20+ years with minimal maintenance.</p>
                            <p class="text-sm text-gray-600"><strong>Franklin's note:</strong> "For most CT homes, quality aluminum with micro-mesh guards is the sweet spot. You get 90% of copper's benefits at 40% of the cost."</p>
                        </div>
                    </div>
                `;
            } else {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-yellow-500 text-white p-3 rounded-lg">
                            <i data-lucide="alert-triangle" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Consider This...</h4>
                            <p class="text-gray-700 mb-3">Steel gutters are strong, but salt air on the CT Shoreline can cause rust within 10-15 years, even with galvanization.</p>
                            <p class="text-sm text-gray-600"><strong>Franklin's recommendation:</strong> "If you're within 2 miles of the Sound, I'd suggest aluminum or copper. Steel works great for inland CT homes but struggles with coastal humidity."</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('recommendation').innerHTML = recommendation;

            // Show results and scroll
            document.getElementById('resultsSection').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);

            // Reinitialize icons in dynamic content
            lucide.createIcons();
        });

        // Save to localStorage
        window.addEventListener('beforeunload', () => {
            const state = {
                homeType: document.getElementById('homeType').value,
                linearFeet: document.getElementById('linearFeet').value,
                profile: selectedProfile,
                material: selectedMaterial,
                guard: selectedGuard,
                timestamp: Date.now()
            };
            localStorage.setItem('gutterEstimate', JSON.stringify(state));
        });

        // Load from localStorage
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('gutterEstimate');
            if (saved) {
                const state = JSON.parse(saved);
                // Only restore if less than 7 days old
                if (Date.now() - state.timestamp < 7 * 24 * 60 * 60 * 1000) {
                    if (state.homeType) document.getElementById('homeType').value = state.homeType;
                    if (state.linearFeet) document.getElementById('linearFeet').value = state.linearFeet;
                    if (state.profile) {
                        const profileCard = document.querySelector(`[data-profile="${state.profile}"]`);
                        if (profileCard) profileCard.click();
                    }
                    if (state.material) {
                        const materialCard = document.querySelector(`[data-material="${state.material.type}"]`);
                        if (materialCard) materialCard.click();
                    }
                    if (state.guard) {
                        const guardOption = document.querySelector(`[data-guard="${state.guard.type}"]`);
                        if (guardOption) guardOption.click();
                    }
                }
            }
        });
    </script>
</body>
</html>
