<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Sprinkler Compliance Calculator | Dalmatian Fire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #C41E3A 0%, #8B0000 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #C41E3A 0%, #8B0000 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .section {
            margin-bottom: 35px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid #C41E3A;
        }
        
        .section h2 {
            color: #C41E3A;
            margin-bottom: 20px;
            font-size: 1.6em;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 1em;
        }
        
        .input-group select,
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .input-group select:focus,
        .input-group input:focus {
            outline: none;
            border-color: #C41E3A;
            box-shadow: 0 0 0 3px rgba(196, 30, 58, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #C41E3A 0%, #8B0000 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            width: 100%;
            font-weight: 600;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(196, 30, 58, 0.4);
        }
        
        .results {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%);
            border-radius: 12px;
            border: 2px solid #C41E3A;
        }
        
        .results.active {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .result-card h3 {
            color: #C41E3A;
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        
        .result-card p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 8px;
        }
        
        .highlight {
            background: #C41E3A;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .warning-box h4 {
            color: #856404;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .cost-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .cost-item .amount {
            font-size: 2em;
            color: #C41E3A;
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
        }
        
        .cost-item .label {
            color: #666;
            font-size: 0.9em;
        }
        
        .timeline {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .timeline-item:last-child {
            border-bottom: none;
        }
        
        .timeline-icon {
            background: #C41E3A;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .timeline-content {
            flex-grow: 1;
        }
        
        .timeline-content strong {
            color: #C41E3A;
        }
        
        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.6em;
            }
            
            .content {
                padding: 25px 20px;
            }
            
            .section {
                padding: 20px;
            }
            
            .cost-breakdown {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö® Fire Sprinkler Compliance Calculator</h1>
            <p>NFPA Inspection Scheduling & Non-Compliance Cost Analysis</p>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>System Information</h2>
                
                <div class="input-group">
                    <label for="systemType">Fire Sprinkler System Type</label>
                    <select id="systemType">
                        <option value="">Select System Type...</option>
                        <option value="wet">Wet Pipe System (Most Common)</option>
                        <option value="dry">Dry Pipe System</option>
                        <option value="preaction">Pre-Action System</option>
                        <option value="deluge">Deluge System</option>
                        <option value="foam">Foam System</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="buildingSize">Building Square Footage</label>
                    <input type="number" id="buildingSize" placeholder="e.g., 50000" min="1000">
                </div>
                
                <div class="input-group">
                    <label for="lastInspection">Last Inspection Date</label>
                    <input type="date" id="lastInspection">
                </div>
                
                <div class="input-group">
                    <label for="buildingType">Building Type</label>
                    <select id="buildingType">
                        <option value="">Select Building Type...</option>
                        <option value="commercial">Commercial Office</option>
                        <option value="warehouse">Warehouse/Distribution</option>
                        <option value="manufacturing">Manufacturing Facility</option>
                        <option value="retail">Retail Store</option>
                        <option value="healthcare">Healthcare Facility</option>
                        <option value="residential">Multi-Family Residential</option>
                        <option value="hospitality">Hotel/Hospitality</option>
                    </select>
                </div>
            </div>
            
            <div class="section">
                <h2>Non-Compliance Risk Assessment</h2>
                
                <div class="input-group">
                    <label for="daysOverdue">Days Since Inspection Due Date (if overdue)</label>
                    <input type="number" id="daysOverdue" placeholder="e.g., 30" min="0" value="0">
                </div>
                
                <div class="input-group">
                    <label for="insuranceType">Insurance Coverage Type</label>
                    <select id="insuranceType">
                        <option value="standard">Standard Commercial</option>
                        <option value="premium">Premium Coverage</option>
                        <option value="high-risk">High-Risk Industry</option>
                    </select>
                </div>
            </div>
            
            <button class="btn" onclick="calculateCompliance()">üìä Calculate Compliance Schedule & Risk</button>
            
            <div class="results" id="results">
                <div class="result-card">
                    <h3>üìÖ NFPA Inspection Schedule</h3>
                    <div class="timeline" id="inspectionSchedule"></div>
                </div>
                
                <div class="result-card">
                    <h3>üí∞ Non-Compliance Cost Analysis</h3>
                    <div class="cost-breakdown" id="costBreakdown"></div>
                    <p style="margin-top: 20px; color: #666; font-style: italic;">
                        * Estimates based on industry averages. Actual costs vary by jurisdiction and specific circumstances.
                    </p>
                </div>
                
                <div class="result-card" id="urgencyCard" style="display: none;">
                    <h3>‚ö†Ô∏è Compliance Status</h3>
                    <div id="urgencyMessage"></div>
                </div>
                
                <div class="warning-box">
                    <h4>üî• Why Timely Inspections Matter</h4>
                    <p><strong>Fire Marshal Penalties:</strong> Most jurisdictions impose daily fines for expired inspections, typically $100-500/day.</p>
                    <p><strong>Insurance Implications:</strong> Lapsed inspections can void coverage or trigger 25-40% premium increases.</p>
                    <p><strong>Liability Exposure:</strong> If a fire occurs with an expired inspection, your business faces significant legal liability.</p>
                    <p><strong>Business Continuity:</strong> Fire marshal can issue occupancy restrictions or closure orders until compliance is restored.</p>
                </div>
                
                <div class="result-card">
                    <h3>üìà Estimated Service Investment</h3>
                    <div id="serviceEstimate"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function calculateCompliance() {
            const systemType = document.getElementById('systemType').value;
            const buildingSize = parseInt(document.getElementById('buildingSize').value);
            const lastInspection = document.getElementById('lastInspection').value;
            const buildingType = document.getElementById('buildingType').value;
            const daysOverdue = parseInt(document.getElementById('daysOverdue').value) || 0;
            const insuranceType = document.getElementById('insuranceType').value;
            
            if (!systemType || !buildingSize || !lastInspection || !buildingType) {
                alert('Please fill in all required fields');
                return;
            }
            
            // NFPA inspection frequencies and requirements
            const inspectionSchedules = {
                wet: {
                    name: 'Wet Pipe System',
                    intervals: [
                        { task: 'Quarterly Visual Inspection', frequency: '3 months', color: '#4CAF50' },
                        { task: 'Annual Full Inspection', frequency: '12 months', color: '#FF9800' },
                        { task: 'Internal Pipe Inspection', frequency: '5 years', color: '#F44336' },
                        { task: 'Hydrostatic Testing', frequency: '25 years', color: '#9C27B0' }
                    ]
                },
                dry: {
                    name: 'Dry Pipe System',
                    intervals: [
                        { task: 'Monthly Air Pressure Check', frequency: '1 month', color: '#2196F3' },
                        { task: 'Annual Full Inspection & Test', frequency: '12 months', color: '#FF9800' },
                        { task: 'Internal Pipe Inspection', frequency: '3 years', color: '#F44336' },
                        { task: 'Trip Test', frequency: '3 years', color: '#E91E63' }
                    ]
                },
                preaction: {
                    name: 'Pre-Action System',
                    intervals: [
                        { task: 'Quarterly Visual Inspection', frequency: '3 months', color: '#4CAF50' },
                        { task: 'Semi-Annual Trip Test', frequency: '6 months', color: '#FFC107' },
                        { task: 'Annual Full Inspection', frequency: '12 months', color: '#FF9800' },
                        { task: 'Detection System Test', frequency: '12 months', color: '#9C27B0' }
                    ]
                },
                deluge: {
                    name: 'Deluge System',
                    intervals: [
                        { task: 'Quarterly Visual Inspection', frequency: '3 months', color: '#4CAF50' },
                        { task: 'Semi-Annual Trip Test', frequency: '6 months', color: '#FFC107' },
                        { task: 'Annual Full Inspection', frequency: '12 months', color: '#FF9800' },
                        { task: 'Valve Maintenance', frequency: '12 months', color: '#795548' }
                    ]
                },
                foam: {
                    name: 'Foam System',
                    intervals: [
                        { task: 'Quarterly Visual Inspection', frequency: '3 months', color: '#4CAF50' },
                        { task: 'Annual Foam Concentrate Test', frequency: '12 months', color: '#FF5722' },
                        { task: 'Annual Full System Test', frequency: '12 months', color: '#FF9800' },
                        { task: 'Foam Tank Cleaning', frequency: '3 years', color: '#607D8B' }
                    ]
                }
            };
            
            // Calculate next inspection dates
            const lastDate = new Date(lastInspection);
            const today = new Date();
            const schedule = inspectionSchedules[systemType];
            
            let scheduleHTML = '';
            schedule.intervals.forEach((interval, index) => {
                scheduleHTML += `
                    <div class="timeline-item">
                        <div class="timeline-icon" style="background: ${interval.color};">${index + 1}</div>
                        <div class="timeline-content">
                            <strong>${interval.task}</strong><br>
                            <span style="color: #666;">Required every ${interval.frequency}</span>
                        </div>
                    </div>
                `;
            });
            document.getElementById('inspectionSchedule').innerHTML = scheduleHTML;
            
            // Calculate non-compliance costs
            const baseFine = 250; // Average daily fine
            const insuranceMultipliers = {
                'standard': 1.0,
                'premium': 1.3,
                'high-risk': 1.8
            };
            
            const dailyFineTotal = baseFine * daysOverdue;
            const estimatedAnnualPremium = buildingSize * 0.15; // $0.15/sqft average
            const insuranceIncrease = estimatedAnnualPremium * 0.35 * insuranceMultipliers[insuranceType];
            const liabilityExposure = buildingSize * 50; // Potential liability per sqft
            const lostRevenue = daysOverdue > 30 ? (buildingSize * 2) : 0; // If marshal issues restrictions
            
            const totalRisk = dailyFineTotal + insuranceIncrease + lostRevenue;
            
            document.getElementById('costBreakdown').innerHTML = `
                <div class="cost-item">
                    <span class="amount">$${dailyFineTotal.toLocaleString()}</span>
                    <span class="label">Fire Marshal Fines</span>
                </div>
                <div class="cost-item">
                    <span class="amount">$${Math.round(insuranceIncrease).toLocaleString()}</span>
                    <span class="label">Insurance Premium Increase</span>
                </div>
                <div class="cost-item">
                    <span class="amount">$${liabilityExposure.toLocaleString()}</span>
                    <span class="label">Potential Liability Exposure</span>
                </div>
                <div class="cost-item">
                    <span class="amount">$${lostRevenue.toLocaleString()}</span>
                    <span class="label">Business Interruption Risk</span>
                </div>
            `;
            
            // Urgency assessment
            if (daysOverdue > 0) {
                const urgencyCard = document.getElementById('urgencyCard');
                urgencyCard.style.display = 'block';
                
                let urgencyLevel = '';
                let urgencyColor = '';
                let urgencyText = '';
                
                if (daysOverdue > 90) {
                    urgencyLevel = 'CRITICAL';
                    urgencyColor = '#d32f2f';
                    urgencyText = 'Your inspection is severely overdue. Fire marshal enforcement action is highly likely. Immediate scheduling recommended.';
                } else if (daysOverdue > 30) {
                    urgencyLevel = 'HIGH PRIORITY';
                    urgencyColor = '#f57c00';
                    urgencyText = 'Your inspection is overdue. Insurance coverage may be at risk. Schedule within 7 days.';
                } else {
                    urgencyLevel = 'ACTION NEEDED';
                    urgencyColor = '#ffa000';
                    urgencyText = 'Your inspection is recently overdue. Schedule soon to avoid escalating penalties.';
                }
                
                document.getElementById('urgencyMessage').innerHTML = `
                    <div style="background: ${urgencyColor}; color: white; padding: 20px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; margin-bottom: 10px;">${urgencyLevel}</div>
                        <p style="font-size: 1.1em; margin: 0;">${urgencyText}</p>
                        <p style="margin-top: 15px; font-size: 1.2em; font-weight: bold;">
                            Total Financial Risk: $${totalRisk.toLocaleString()}
                        </p>
                    </div>
                `;
            }
            
            // Service estimate
            const baseInspectionCost = 300;
            const sqftCost = buildingSize * 0.05;
            const systemComplexityMultiplier = {
                'wet': 1.0,
                'dry': 1.3,
                'preaction': 1.5,
                'deluge': 1.6,
                'foam': 1.7
            };
            
            const estimatedCost = (baseInspectionCost + sqftCost) * systemComplexityMultiplier[systemType];
            const annualMaintenanceCost = estimatedCost * 2; // Assuming 2 visits/year minimum
            
            const roiSavings = totalRisk - estimatedCost;
            
            document.getElementById('serviceEstimate').innerHTML = `
                <p style="font-size: 1.1em; margin-bottom: 15px;">
                    <strong>Single Inspection:</strong> <span class="highlight">$${Math.round(estimatedCost).toLocaleString()}</span>
                </p>
                <p style="font-size: 1.1em; margin-bottom: 15px;">
                    <strong>Annual Maintenance Program:</strong> <span class="highlight">$${Math.round(annualMaintenanceCost).toLocaleString()}</span>
                </p>
                ${daysOverdue > 0 ? `
                <p style="font-size: 1.2em; margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 8px; color: #2e7d32;">
                    <strong>ROI of Immediate Compliance:</strong> Avoid $${roiSavings.toLocaleString()} in potential costs
                </p>
                ` : ''}
                <p style="margin-top: 20px; color: #666; font-size: 0.95em;">
                    Estimate based on ${buildingSize.toLocaleString()} sqft ${schedule.name}. 
                    Actual pricing varies by system complexity and testing requirements.
                </p>
            `;
            
            // Show results
            document.getElementById('results').classList.add('active');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Set default date to 1 year ago
        window.addEventListener('DOMContentLoaded', () => {
            const lastYear = new Date();
            lastYear.setFullYear(lastYear.getFullYear() - 1);
            document.getElementById('lastInspection').value = lastYear.toISOString().split('T')[0];
        });
    </script>
</body>
</html>
