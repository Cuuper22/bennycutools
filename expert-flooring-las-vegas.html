<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Flooring Project Estimator - Expert Flooring Solutions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #8b5a3c 0%, #5d4037 100%); }
        .accent-color { color: #2563eb; }
        .accent-bg { background-color: #2563eb; }
        .room-card { transition: all 0.3s ease; border: 2px solid #e5e7eb; }
        .room-card.selected { border-color: #2563eb; background-color: #eff6ff; }
        .material-card { transition: all 0.3s ease; cursor: pointer; }
        .material-card:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        .material-card.selected { border-color: #2563eb; background-color: #eff6ff; }
        .comparison-table { font-size: 0.875rem; }
    </style>

    <style>
    /* Kimi UI/UX Improvements */
    .fade-in-up { animation: fadeInUp 0.4s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .radio-option, [class*="option"], [class*="choice"] { 
        min-height: 52px; transition: all 0.15s ease !important; 
    }
    .radio-option:active, [class*="option"]:active { transform: scale(0.98); }
    .btn-primary:active, [class*="btn"]:active { transform: translateY(1px); }
    /* Better progress bar */
    [class*="progress"] { height: 6px !important; border-radius: 3px; }
    </style>
    
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white py-8 px-4 shadow-lg">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-center gap-3 mb-2">
                <i data-lucide="home" class="text-amber-300" style="width: 36px; height: 36px;"></i>
                <h1 class="text-3xl md:text-4xl font-bold">Expert Flooring Solutions</h1>
            </div>
            <p class="text-amber-200 text-sm md:text-base">Las Vegas' #1 Rated Flooring Store - 300+ Five-Star Reviews</p>
            <p class="text-amber-100 text-xs mt-1">Serving Las Vegas, Henderson, North Las Vegas & Pahrump</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="max-w-5xl mx-auto p-4 md:p-6 my-6">
        
        <!-- Introduction -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-blue-600">
            <div class="flex items-start gap-4">
                <i data-lucide="calculator" class="text-blue-600 mt-1" style="width: 28px; height: 28px;"></i>
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Flooring Project Cost Estimator</h2>
                    <p class="text-gray-600 mb-2">Get a professional cost estimate for your flooring project in 60 seconds. This tool uses our team's decades of experience to give you accurate Las Vegas pricing for every material.</p>
                    <p class="text-sm text-gray-500 italic">All estimates include professional installation, materials, underlayment, and removal of old flooring.</p>
                </div>
            </div>
        </div>

        <!-- Step 1: Select Rooms -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="accent-bg text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                Select Rooms to Floor
            </h3>
            
            <div class="grid md:grid-cols-3 gap-4 mb-6" id="roomSelection">
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="living" data-default-sqft="350">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Living Room</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~350 sq ft typical</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="kitchen" data-default-sqft="200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Kitchen</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~200 sq ft typical</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="bedroom" data-default-sqft="150">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Bedroom (1)</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~150 sq ft each</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="bedroom2" data-default-sqft="150">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Bedroom (2)</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~150 sq ft each</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="bedroom3" data-default-sqft="150">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Bedroom (3)</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~150 sq ft each</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="bathroom" data-default-sqft="50">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Bathroom</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~50 sq ft typical</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="hallway" data-default-sqft="80">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Hallway</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~80 sq ft typical</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="stairs" data-default-sqft="100">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Stairs</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~100 sq ft typical</p>
                </div>
                <div class="room-card rounded-lg p-4 cursor-pointer" data-room="whole-house" data-default-sqft="1500">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-gray-800">Whole House</h4>
                        <input type="checkbox" class="room-checkbox w-5 h-5 text-blue-600">
                    </div>
                    <p class="text-xs text-gray-500">~1500 sq ft typical</p>
                </div>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Or enter total square footage:</label>
                <input type="number" id="customSqft" placeholder="e.g., 800" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-600 focus:outline-none" min="50" max="10000">
                <p class="text-xs text-gray-500 mt-2">Don't know? Measure room length × width for each room, or we'll calculate from your selections above.</p>
            </div>

            <div class="mt-4 text-center">
                <p class="text-lg font-semibold text-gray-800">Total Area: <span id="totalSqft" class="accent-color">0</span> sq ft</p>
            </div>
        </div>

        <!-- Step 2: Choose Material -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span class="accent-bg text-white w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                Choose Your Flooring Material
            </h3>

            <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4">
                <p class="text-sm text-amber-800 flex items-start gap-2">
                    <i data-lucide="sun" style="width: 20px; height: 20px;" class="mt-0.5"></i>
                    <span><strong>Las Vegas Climate Matters:</strong> 120°F summers, extreme dryness, dust storms, and flash floods. Tom and Keisha recommend LVP or tile for most Vegas homes — they handle heat and moisture swings better than hardwood.</span>
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="materialOptions">
                <div class="material-card border-2 rounded-lg p-4" data-material="lvp" data-cost="7" data-lifespan="20-25">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Luxury Vinyl Plank (LVP)</h4>
                        <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Best for Vegas</span>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$7-11/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> 100% waterproof</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Heat resistant</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Looks like real wood</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Pet & kid friendly</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Low maintenance</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">20-25 year lifespan</p>
                </div>

                <div class="material-card border-2 rounded-lg p-4" data-material="tile" data-cost="8" data-lifespan="50+">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Porcelain/Ceramic Tile</h4>
                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Premium</span>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$8-15/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Lasts 50+ years</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> 100% waterproof</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Stays cool in summer</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Endless design options</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Can feel cold/hard</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">50+ year lifespan</p>
                </div>

                <div class="material-card border-2 rounded-lg p-4" data-material="laminate" data-cost="4" data-lifespan="15-20">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Laminate</h4>
                        <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">Budget</span>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$4-7/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Most affordable</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Easy to install</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Scratch resistant</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-red-600 mt-0.5"></i> NOT waterproof</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Can swell in moisture</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">15-20 year lifespan</p>
                </div>

                <div class="material-card border-2 rounded-lg p-4" data-material="hardwood" data-cost="10" data-lifespan="30-50">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Solid Hardwood</h4>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$10-18/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Timeless beauty</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Can be refinished</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Increases home value</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-red-600 mt-0.5"></i> Not water resistant</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Expands/contracts in Vegas dryness</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">30-50 year lifespan</p>
                </div>

                <div class="material-card border-2 rounded-lg p-4" data-material="engineered" data-cost="8" data-lifespan="25-30">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Engineered Hardwood</h4>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$8-14/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Real wood veneer top</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> More stable than solid wood</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Better for Vegas climate</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Limited refinishing</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Still moisture sensitive</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">25-30 year lifespan</p>
                </div>

                <div class="material-card border-2 rounded-lg p-4" data-material="carpet" data-cost="5" data-lifespan="10-15">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-gray-800">Carpet</h4>
                    </div>
                    <p class="text-2xl font-bold accent-color mb-2">$5-9/sq ft</p>
                    <ul class="text-xs text-gray-600 space-y-1">
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Soft & comfortable</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Warm in winter</li>
                        <li class="flex items-start gap-1"><i data-lucide="check" style="width: 14px; height: 14px;" class="text-green-600 mt-0.5"></i> Sound dampening</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Shows dirt/stains</li>
                        <li class="flex items-start gap-1"><i data-lucide="alert-circle" style="width: 14px; height: 14px;" class="text-yellow-600 mt-0.5"></i> Shorter lifespan</li>
                    </ul>
                    <p class="text-xs text-gray-500 mt-2 italic">10-15 year lifespan</p>
                </div>
            </div>
        </div>

        <!-- Calculate Button -->
        <div class="text-center mb-6">
            <button id="calculateBtn" class="accent-bg text-white px-8 py-4 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                <span class="flex items-center gap-2 justify-center">
                    <i data-lucide="calculator"></i>
                    Calculate My Project Cost
                </span>
            </button>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden">
            <!-- Cost Breakdown -->
            <div class="bg-gradient-to-br from-blue-50 to-amber-50 rounded-lg shadow-lg p-6 mb-6 border-2 border-blue-200">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <i data-lucide="receipt" class="accent-color"></i>
                    Your Estimated Project Cost
                </h3>

                <div class="space-y-3 mb-4">
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200">
                        <span class="text-gray-700">Total Area</span>
                        <span class="font-semibold text-gray-800" id="result-sqft"></span>
                    </div>
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200">
                        <span class="text-gray-700">Material: <span id="result-material-name"></span></span>
                        <span class="text-sm text-gray-600" id="result-material-range"></span>
                    </div>
                    <div class="flex justify-between items-center pb-2 border-b border-gray-200">
                        <span class="text-gray-700">Installation & Labor</span>
                        <span class="text-sm text-gray-600">Included</span>
                    </div>
                </div>

                <div class="gradient-bg text-white rounded-lg p-4 mb-4">
                    <div class="flex justify-between items-center">
                        <span class="text-xl font-bold">Total Project Cost:</span>
                        <span class="text-3xl font-bold" id="result-total"></span>
                    </div>
                    <p class="text-sm text-blue-100 mt-2">Includes materials, professional installation, underlayment, and old flooring removal</p>
                </div>

                <div class="bg-white border border-gray-200 rounded-lg p-4" id="lifetimeCost">
                    <h4 class="font-semibold text-gray-800 mb-2 flex items-center gap-2">
                        <i data-lucide="trending-up" style="width: 20px; height: 20px;"></i>
                        True Cost Per Year:
                    </h4>
                    <p class="text-2xl font-bold accent-color" id="result-per-year"></p>
                    <p class="text-sm text-gray-600 mt-1">Based on <span id="result-lifespan"></span> year expected lifespan in Las Vegas climate</p>
                </div>
            </div>

            <!-- Material Recommendation -->
            <div id="recommendation" class="bg-white rounded-lg shadow-md p-6 mb-6">
                <!-- Dynamically populated -->
            </div>

            <!-- Next Steps CTA -->
            <div class="gradient-bg text-white rounded-lg shadow-lg p-8 text-center">
                <h3 class="text-2xl font-bold mb-3">Ready to Transform Your Home?</h3>
                <p class="text-amber-200 mb-6">Visit our Las Vegas showroom for a free consultation with Tom, Keisha, or Shawn. See hundreds of samples in person.</p>
                
                <div class="bg-white/10 rounded-lg p-4 mb-6 backdrop-blur-sm">
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                        <a href="tel:+17025244940" class="flex items-center gap-2 text-white hover:text-amber-200 transition-colors">
                            <i data-lucide="phone" style="width: 20px; height: 20px;"></i>
                            <span class="font-semibold">(702) 524-4940</span>
                        </a>
                        <div class="text-white/60">|</div>
                        <div class="flex items-center gap-2 text-white">
                            <i data-lucide="map-pin" style="width: 20px; height: 20px;"></i>
                            <span class="font-semibold">6485 S Rainbow Blvd #100</span>
                        </div>
                    </div>
                </div>

                <a href="https://expertflooring.net/" target="_blank" class="inline-block bg-amber-500 text-white px-8 py-3 rounded-lg font-bold text-lg hover:bg-amber-600 transition-all transform hover:scale-105">
                    Visit Our Website & Book Free Consultation
                </a>
                
                <p class="text-xs text-blue-200 mt-4">300+ Five-Star Reviews | Family Owned & Operated | Free In-Home Estimates</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-8 mt-12">
        <div class="max-w-5xl mx-auto px-4 text-center">
            <h3 class="text-xl font-bold text-white mb-2">Expert Flooring Solutions</h3>
            <p class="text-sm mb-1">6485 S Rainbow Blvd Ste 100, Las Vegas, NV 89118</p>
            <p class="text-sm mb-1">Phone: (702) 524-4940</p>
            <p class="text-sm mb-3">Serving Las Vegas Valley: Las Vegas, Henderson, North Las Vegas, Boulder City & Pahrump</p>
            <p class="text-xs text-gray-400 italic mt-4">Proudly owned and operated by Tom Rossi, Shawn Glines, and Keisha Elliott</p>
            <p class="text-xs text-gray-500 mt-4">This estimator was built by Ben, an independent developer. Cost estimates are based on industry averages and Expert Flooring's typical Las Vegas pricing. Final quotes may vary based on material selection, subfloor condition, furniture removal, and project complexity. Visit our showroom for an exact quote.</p>
        </div>
    </footer>

    <script>
        lucide.createIcons();

        let selectedRooms = [];
        let totalSqft = 0;
        let selectedMaterial = null;

        // Room selection
        document.querySelectorAll('.room-card').forEach(card => {
            card.addEventListener('click', (e) => {
                if (e.target.type === 'checkbox') return;
                const checkbox = card.querySelector('.room-checkbox');
                checkbox.checked = !checkbox.checked;
                card.classList.toggle('selected', checkbox.checked);
                updateRoomSelection();
            });
        });

        document.querySelectorAll('.room-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                const card = e.target.closest('.room-card');
                card.classList.toggle('selected', e.target.checked);
                updateRoomSelection();
            });
        });

        function updateRoomSelection() {
            selectedRooms = [];
            let autoSqft = 0;
            document.querySelectorAll('.room-checkbox:checked').forEach(checkbox => {
                const card = checkbox.closest('.room-card');
                const room = card.dataset.room;
                const sqft = parseInt(card.dataset.defaultSqft);
                selectedRooms.push({ room, sqft });
                autoSqft += sqft;
            });

            const customSqft = parseInt(document.getElementById('customSqft').value) || 0;
            totalSqft = customSqft > 0 ? customSqft : autoSqft;
            document.getElementById('totalSqft').textContent = totalSqft;
            checkFormComplete();
        }

        document.getElementById('customSqft').addEventListener('input', updateRoomSelection);

        // Material selection
        document.querySelectorAll('.material-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.material-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                selectedMaterial = {
                    type: card.dataset.material,
                    baseCost: parseInt(card.dataset.cost),
                    lifespan: card.dataset.lifespan
                };
                checkFormComplete();
            });
        });

        function checkFormComplete() {
            const btn = document.getElementById('calculateBtn');
            btn.disabled = !(totalSqft > 0 && selectedMaterial);
        }

        // Calculate
        document.getElementById('calculateBtn').addEventListener('click', () => {
            const costMin = selectedMaterial.baseCost * totalSqft;
            const costMax = (selectedMaterial.baseCost + 4) * totalSqft;

            document.getElementById('result-sqft').textContent = `${totalSqft} sq ft`;
            
            const materialNames = {
                'lvp': 'Luxury Vinyl Plank',
                'tile': 'Porcelain/Ceramic Tile',
                'laminate': 'Laminate',
                'hardwood': 'Solid Hardwood',
                'engineered': 'Engineered Hardwood',
                'carpet': 'Carpet'
            };
            document.getElementById('result-material-name').textContent = materialNames[selectedMaterial.type];
            document.getElementById('result-material-range').textContent = `$${selectedMaterial.baseCost}-${selectedMaterial.baseCost + 4}/sq ft`;
            document.getElementById('result-total').textContent = `$${costMin.toLocaleString()} - $${costMax.toLocaleString()}`;

            // Lifetime cost
            const lifespanNum = parseInt(selectedMaterial.lifespan.split('-')[0]);
            const perYearMin = Math.round(costMin / lifespanNum);
            const perYearMax = Math.round(costMax / lifespanNum);
            document.getElementById('result-per-year').textContent = `$${perYearMin} - $${perYearMax}/year`;
            document.getElementById('result-lifespan').textContent = selectedMaterial.lifespan;

            // Recommendation
            let recommendation = '';
            if (selectedMaterial.type === 'lvp') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-green-600 text-white p-3 rounded-lg">
                            <i data-lucide="award" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Perfect Choice for Las Vegas Homes</h4>
                            <p class="text-gray-700 mb-3">Luxury vinyl plank is Tom and Keisha's #1 recommendation for Vegas. It handles extreme heat, zero humidity, dust, and flash floods without warping or fading. Plus, it looks like real hardwood at half the price.</p>
                            <p class="text-sm text-gray-600"><strong>Popular with our customers:</strong> Families with pools, pet owners, and anyone tired of carpet in the desert. Roger (our lead installer) says LVP creates seamless room-to-room flow in Vegas homes.</p>
                        </div>
                    </div>
                `;
            } else if (selectedMaterial.type === 'tile') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-blue-600 text-white p-3 rounded-lg">
                            <i data-lucide="star" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Premium & Long-Lasting</h4>
                            <p class="text-gray-700 mb-3">Tile is the ultimate Vegas flooring. It stays cool in summer, lasts 50+ years, and handles any moisture from pools or monsoon floods. The upfront cost is higher, but you'll never replace it.</p>
                            <p class="text-sm text-gray-600"><strong>Tom's note:</strong> "We install a lot of porcelain tile in Henderson and Summerlin. Homeowners love the endless design options and the fact that it increases resale value."</p>
                        </div>
                    </div>
                `;
            } else if (selectedMaterial.type === 'hardwood') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-yellow-500 text-white p-3 rounded-lg">
                            <i data-lucide="alert-triangle" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Beautiful, But Consider the Climate</h4>
                            <p class="text-gray-700 mb-3">Hardwood is stunning, but Vegas's extreme dryness causes expansion and contraction. Without careful humidity control, you'll see gaps and cupping. Most of our customers go with engineered hardwood or LVP instead.</p>
                            <p class="text-sm text-gray-600"><strong>Keisha's recommendation:</strong> "If you love the hardwood look, consider engineered wood or high-end LVP that mimics it. You'll get the beauty without the maintenance headaches."</p>
                        </div>
                    </div>
                `;
            } else if (selectedMaterial.type === 'engineered') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-purple-600 text-white p-3 rounded-lg">
                            <i data-lucide="thumbs-up" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Smart Compromise</h4>
                            <p class="text-gray-700 mb-3">Engineered hardwood gives you real wood on top with a stable core that handles Vegas climate better than solid hardwood. It's the middle ground between LVP and traditional hardwood.</p>
                            <p class="text-sm text-gray-600"><strong>Tom's take:</strong> "This is great for homes with good HVAC and humidity control. Still need to be careful with water, but it's way more stable than solid wood in the desert."</p>
                        </div>
                    </div>
                `;
            } else if (selectedMaterial.type === 'laminate') {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-orange-500 text-white p-3 rounded-lg">
                            <i data-lucide="info" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Budget-Friendly, But Not Waterproof</h4>
                            <p class="text-gray-700 mb-3">Laminate is the most affordable option, but it's not waterproof. If you have kids, pets, or a pool, we'd strongly recommend spending a little more for LVP. The waterproof protection is worth it in Vegas.</p>
                            <p class="text-sm text-gray-600"><strong>Our advice:</strong> Laminate works for bedrooms or low-traffic areas, but avoid kitchens, bathrooms, and entryways where moisture is common.</p>
                        </div>
                    </div>
                `;
            } else {
                recommendation = `
                    <div class="flex items-start gap-4">
                        <div class="bg-indigo-600 text-white p-3 rounded-lg">
                            <i data-lucide="home" style="width: 28px; height: 28px;"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-800 mb-2">Cozy & Comfortable</h4>
                            <p class="text-gray-700 mb-3">Carpet is soft underfoot and great for bedrooms, but it shows dirt quickly in Vegas dust. We recommend stain-resistant nylon or polyester blends with regular professional cleaning.</p>
                            <p class="text-sm text-gray-600"><strong>Popular choice:</strong> Master bedrooms and upstairs hallways. Many Vegas homeowners do tile/LVP downstairs and carpet upstairs for comfort.</p>
                        </div>
                    </div>
                `;
            }

            document.getElementById('recommendation').innerHTML = recommendation;

            document.getElementById('resultsSection').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);

            lucide.createIcons();
        });

        // Save/load state
        window.addEventListener('beforeunload', () => {
            const state = {
                rooms: selectedRooms,
                totalSqft,
                customSqft: document.getElementById('customSqft').value,
                material: selectedMaterial,
                timestamp: Date.now()
            };
            localStorage.setItem('flooringEstimate', JSON.stringify(state));
        });

        window.addEventListener('load', () => {
            const saved = localStorage.getItem('flooringEstimate');
            if (saved) {
                const state = JSON.parse(saved);
                if (Date.now() - state.timestamp < 7 * 24 * 60 * 60 * 1000) {
                    if (state.customSqft) document.getElementById('customSqft').value = state.customSqft;
                    if (state.material) {
                        const materialCard = document.querySelector(`[data-material="${state.material.type}"]`);
                        if (materialCard) materialCard.click();
                    }
                }
            }
        });
    </script>
</body>
</html>
