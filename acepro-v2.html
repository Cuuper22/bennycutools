<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
<title>AcePro Command Center â€” Ace Plumbing Heating & Air</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0a0e1a;--surface:#111827;--surface2:#1a2235;--surface3:#222d44;
--border:#2a3550;--border-light:#354160;
--text:#e8ecf4;--text-secondary:#8b95a8;--text-muted:#5a657a;
--accent:#3b82f6;--accent-glow:rgba(59,130,246,.15);
--green:#10b981;--green-glow:rgba(16,185,129,.15);
--red:#ef4444;--red-glow:rgba(239,68,68,.15);
--amber:#f59e0b;--amber-glow:rgba(245,158,11,.15);
--purple:#8b5cf6;--purple-glow:rgba(139,92,246,.15);
--cyan:#06b6d4;--cyan-glow:rgba(6,182,212,.15);
--orange:#f97316;--orange-glow:rgba(249,115,22,.15);
--sidebar-w:260px;--header-h:64px;
--radius:12px;--radius-sm:8px;--radius-xs:6px;
}
html,body{height:100%;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);overflow:hidden}
a{color:var(--accent);text-decoration:none}

/* === ACCESS GATE === */
#gate{position:fixed;inset:0;background:var(--bg);z-index:9999;display:flex;align-items:center;justify-content:center}
.gate-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:48px;text-align:center;max-width:420px;width:90%}
.gate-card .logo{font-size:32px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,var(--accent),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.gate-card .subtitle{color:var(--text-secondary);font-size:14px;margin-bottom:32px}
.gate-input{width:100%;padding:14px 18px;background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--text);font-size:15px;font-family:inherit;outline:none;transition:border .2s}
.gate-input:focus{border-color:var(--accent)}
.gate-input::placeholder{color:var(--text-muted)}
.gate-btn{width:100%;padding:14px;margin-top:16px;background:linear-gradient(135deg,var(--accent),#2563eb);border:none;border-radius:var(--radius-sm);color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:transform .15s,box-shadow .15s}
.gate-btn:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(59,130,246,.3)}
.gate-error{color:var(--red);font-size:13px;margin-top:12px;display:none}

/* === LAYOUT === */
#app{display:none;height:100vh;overflow:hidden}
.sidebar{position:fixed;left:0;top:0;bottom:0;width:var(--sidebar-w);background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;z-index:100;transition:transform .3s}
.sidebar-header{padding:20px 24px;border-bottom:1px solid var(--border)}
.sidebar-brand{font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sidebar-company{font-size:12px;color:var(--text-secondary);margin-top:2px}
.sidebar-nav{flex:1;overflow-y:auto;padding:12px}
.nav-section{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);padding:16px 12px 8px;font-weight:600}
.nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:var(--radius-sm);cursor:pointer;color:var(--text-secondary);font-size:13px;font-weight:500;transition:all .15s;margin-bottom:2px}
.nav-item:hover{background:var(--surface2);color:var(--text)}
.nav-item.active{background:var(--accent-glow);color:var(--accent);font-weight:600}
.nav-item svg{width:18px;height:18px;flex-shrink:0}
.sidebar-footer{padding:16px 24px;border-top:1px solid var(--border);font-size:11px;color:var(--text-muted)}

/* === MAIN CONTENT === */
.main{margin-left:var(--sidebar-w);height:100vh;display:flex;flex-direction:column}
.header{height:var(--header-h);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 28px;background:var(--surface);flex-shrink:0}
.header-title{font-size:16px;font-weight:600}
.header-right{display:flex;align-items:center;gap:16px}
.header-badge{padding:5px 12px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}
.badge-live{background:var(--green-glow);color:var(--green);border:1px solid rgba(16,185,129,.3)}
.header-time{font-size:13px;color:var(--text-secondary);font-variant-numeric:tabular-nums}
.content{flex:1;overflow-y:auto;padding:24px 28px;scroll-behavior:smooth}

/* === CARDS / GRID === */
.section-title{font-size:18px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px}
.section-title .icon{width:28px;height:28px;border-radius:var(--radius-xs);display:flex;align-items:center;justify-content:center;font-size:14px}
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin-bottom:28px}
.kpi-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;position:relative;overflow:hidden;transition:border-color .2s,transform .15s}
.kpi-card:hover{border-color:var(--border-light);transform:translateY(-2px)}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:var(--radius) var(--radius) 0 0}
.kpi-card.blue::before{background:var(--accent)}
.kpi-card.green::before{background:var(--green)}
.kpi-card.amber::before{background:var(--amber)}
.kpi-card.red::before{background:var(--red)}
.kpi-card.purple::before{background:var(--purple)}
.kpi-card.cyan::before{background:var(--cyan)}
.kpi-card.orange::before{background:var(--orange)}
.kpi-label{font-size:12px;color:var(--text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}
.kpi-value{font-size:28px;font-weight:800;line-height:1;margin-bottom:4px;font-variant-numeric:tabular-nums}
.kpi-sub{font-size:12px;color:var(--text-secondary);display:flex;align-items:center;gap:4px}
.kpi-sub .up{color:var(--green)}
.kpi-sub .down{color:var(--red)}

.chart-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(440px,1fr));gap:16px;margin-bottom:28px}
.chart-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px}
.chart-card h3{font-size:14px;font-weight:600;margin-bottom:16px;color:var(--text-secondary)}
.chart-wrap{position:relative;height:280px}
.chart-card.tall .chart-wrap{height:340px}

/* === TABLES === */
.table-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:28px}
.table-header{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.table-header h3{font-size:14px;font-weight:600}
.table-wrap{overflow-x:auto}
table{width:100%;border-collapse:collapse}
thead th{text-align:left;padding:12px 16px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-muted);border-bottom:1px solid var(--border);background:var(--surface2)}
tbody td{padding:12px 16px;font-size:13px;border-bottom:1px solid var(--border)}
tbody tr:hover{background:var(--surface2)}
tbody tr:last-child td{border-bottom:none}

/* === STATUS BADGES === */
.status{padding:3px 10px;border-radius:20px;font-size:11px;font-weight:600;display:inline-flex;align-items:center;gap:4px}
.status.active{background:var(--green-glow);color:var(--green)}
.status.pending{background:var(--amber-glow);color:var(--amber)}
.status.urgent{background:var(--red-glow);color:var(--red)}
.status.scheduled{background:var(--accent-glow);color:var(--accent)}
.status.completed{background:var(--green-glow);color:var(--green)}
.status.in-progress{background:var(--cyan-glow);color:var(--cyan)}
.status.on-hold{background:var(--purple-glow);color:var(--purple)}

/* === PROGRESS BARS === */
.progress-bar{height:6px;background:var(--surface3);border-radius:3px;overflow:hidden;margin-top:4px}
.progress-fill{height:100%;border-radius:3px;transition:width .8s ease}

/* === RATING STARS === */
.stars{color:var(--amber);font-size:14px;letter-spacing:1px}

/* === PAGE SECTIONS (show/hide) === */
.page-section{display:none}
.page-section.active{display:block}

/* === WEATHER WIDGET === */
.weather-strip{display:flex;gap:12px;margin-bottom:28px;overflow-x:auto;padding-bottom:4px}
.weather-day{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px;min-width:120px;text-align:center;flex-shrink:0}
.weather-day .day{font-size:11px;color:var(--text-secondary);font-weight:600;text-transform:uppercase}
.weather-day .temp{font-size:24px;font-weight:700;margin:8px 0 4px}
.weather-day .icon{font-size:28px;margin:8px 0}
.weather-day .desc{font-size:11px;color:var(--text-muted)}

/* === SCROLLBAR === */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--border-light)}

/* === RESPONSIVE === */
@media(max-width:1024px){
  .sidebar{transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .main{margin-left:0}
  .kpi-grid{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
  .chart-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- ========== ACCESS GATE ========== -->
<div id="gate">
  <div class="gate-card">
    <div class="logo">AcePro</div>
    <div class="subtitle">Command Center â€” Ace Plumbing Heating & Air</div>
    <input type="password" id="keyInput" class="gate-input" placeholder="Enter access key" autofocus>
    <button class="gate-btn" onclick="checkKey()">Unlock Dashboard</button>
    <div class="gate-error" id="keyError">Invalid access key. Contact your administrator.</div>
  </div>
</div>

<!-- ========== MAIN APP ========== -->
<div id="app">
  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-brand">âš¡ AcePro</div>
      <div class="sidebar-company">Ace Plumbing Heating & Air</div>
    </div>
    <div class="sidebar-nav">
      <div class="nav-section">Operations</div>
      <div class="nav-item active" data-page="overview">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
        Dashboard
      </div>
      <div class="nav-item" data-page="dispatch">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        Dispatch & Crews
      </div>
      <div class="nav-item" data-page="jobs">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
        Job Pipeline
      </div>
      <div class="nav-item" data-page="fleet">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
        Fleet Tracker
      </div>
      <div class="nav-section">Revenue</div>
      <div class="nav-item" data-page="revenue">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        Revenue & P/L
      </div>
      <div class="nav-item" data-page="estimates">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Estimates & Quotes
      </div>
      <div class="nav-section">Customer</div>
      <div class="nav-item" data-page="reviews">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        Reviews & Reputation
      </div>
      <div class="nav-item" data-page="customers">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Customer Database
      </div>
      <div class="nav-section">Inventory</div>
      <div class="nav-item" data-page="inventory">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
        Parts & Inventory
      </div>
      <div class="nav-section">Insights</div>
      <div class="nav-item" data-page="weather">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>
        Weather & Demand
      </div>
      <div class="nav-item" data-page="performance">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        Performance Analytics
      </div>
    </div>
    <div class="sidebar-footer">
      Ace Plumbing Heating & Air â€” License #313506<br>
      Sacramento, CA Â· Est. 1974 Â· 50+ Years
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main">
    <header class="header">
      <div style="display:flex;align-items:center;gap:12px">
        <button onclick="document.getElementById('sidebar').classList.toggle('open')" style="display:none;background:none;border:none;color:var(--text);cursor:pointer;font-size:20px" class="mobile-menu">â˜°</button>
        <span class="header-title" id="pageTitle">Operations Dashboard</span>
      </div>
      <div class="header-right">
        <span class="header-badge badge-live">â— Live Data</span>
        <span class="header-time" id="headerTime"></span>
      </div>
    </header>

    <div class="content" id="content">
      <!-- =============== OVERVIEW PAGE =============== -->
      <div class="page-section active" id="page-overview">
        <div class="section-title"><div class="icon" style="background:var(--accent-glow);color:var(--accent)">ğŸ“Š</div> Key Metrics â€” Today</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Active Jobs Today</div>
            <div class="kpi-value">24</div>
            <div class="kpi-sub"><span class="up">â†‘ 12%</span> vs last week</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Revenue (MTD)</div>
            <div class="kpi-value">$387K</div>
            <div class="kpi-sub"><span class="up">â†‘ 8.3%</span> vs last month</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Avg Response Time</div>
            <div class="kpi-value">47m</div>
            <div class="kpi-sub"><span class="up">â†‘ 5m</span> improvement</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Customer Rating</div>
            <div class="kpi-value">4.82</div>
            <div class="kpi-sub"><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">Technicians Active</div>
            <div class="kpi-value">18</div>
            <div class="kpi-sub">of 28 total staff</div>
          </div>
          <div class="kpi-card orange">
            <div class="kpi-label">Pending Estimates</div>
            <div class="kpi-value">31</div>
            <div class="kpi-sub">$142K pipeline value</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Emergency Calls</div>
            <div class="kpi-value">3</div>
            <div class="kpi-sub"><span class="down">2 assigned</span>, 1 queued</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Completion Rate</div>
            <div class="kpi-value">94%</div>
            <div class="kpi-sub"><span class="up">â†‘ 2%</span> vs Q3</div>
          </div>
        </div>

        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“ˆ Monthly Revenue Trend (12 Months)</h3>
            <div class="chart-wrap"><canvas id="revenueChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ”§ Service Mix Breakdown</h3>
            <div class="chart-wrap"><canvas id="serviceChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ“… Daily Job Volume (Last 30 Days)</h3>
            <div class="chart-wrap"><canvas id="dailyJobsChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸŒ¡ï¸ Sacramento Temperature vs HVAC Calls</h3>
            <div class="chart-wrap"><canvas id="tempVsCallsChart"></canvas></div>
          </div>
        </div>

        <!-- Recent Jobs Table -->
        <div class="table-card">
          <div class="table-header">
            <h3>ğŸ”§ Recent Service Calls</h3>
            <span style="font-size:12px;color:var(--text-secondary)">Updated live</span>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Job #</th><th>Customer</th><th>Service</th><th>Technician</th><th>Area</th><th>Status</th><th>Amount</th></tr>
              </thead>
              <tbody>
                <tr><td>ACE-7841</td><td>M. Henderson</td><td>AC Repair</td><td>Curtis R.</td><td>Elk Grove</td><td><span class="status active">â— Completed</span></td><td>$485</td></tr>
                <tr><td>ACE-7840</td><td>J. Nakamura</td><td>Water Heater Install</td><td>Ivan S.</td><td>Folsom</td><td><span class="status in-progress">â— In Progress</span></td><td>$2,840</td></tr>
                <tr><td>ACE-7839</td><td>S. Patel</td><td>Drain Clearing</td><td>Joe M.</td><td>Sacramento</td><td><span class="status active">â— Completed</span></td><td>$195</td></tr>
                <tr><td>ACE-7838</td><td>R. Gomez</td><td>Furnace Install</td><td>Mike T. + Tim</td><td>Rancho Cordova</td><td><span class="status in-progress">â— In Progress</span></td><td>$4,250</td></tr>
                <tr><td>ACE-7837</td><td>K. Johnson</td><td>Gas Line Repair</td><td>Jeffrey K.</td><td>Citrus Heights</td><td><span class="status urgent">â— Emergency</span></td><td>$680</td></tr>
                <tr><td>ACE-7836</td><td>D. Williams</td><td>Hydro-Jetting</td><td>Jorge A.</td><td>Roseville</td><td><span class="status scheduled">â— Scheduled</span></td><td>$425</td></tr>
                <tr><td>ACE-7835</td><td>A. Chen</td><td>HVAC Tune-Up</td><td>Curtis R.</td><td>Davis</td><td><span class="status active">â— Completed</span></td><td>$149</td></tr>
                <tr><td>ACE-7834</td><td>L. Foster</td><td>Toilet Replacement</td><td>Ivan S.</td><td>Sacramento</td><td><span class="status active">â— Completed</span></td><td>$380</td></tr>
                <tr><td>ACE-7833</td><td>T. Morgan</td><td>Ductless AC Install</td><td>Mike T. + Jorge</td><td>Granite Bay</td><td><span class="status pending">â— Pending Parts</span></td><td>$5,100</td></tr>
                <tr><td>ACE-7832</td><td>N. Rodriguez</td><td>Slab Leak Detection</td><td>Joe M.</td><td>Woodland</td><td><span class="status scheduled">â— Scheduled</span></td><td>$350</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- =============== DISPATCH PAGE =============== -->
      <div class="page-section" id="page-dispatch">
        <div class="section-title"><div class="icon" style="background:var(--cyan-glow);color:var(--cyan)">ğŸ‘·</div> Dispatch & Crew Management</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Plumbing Crew</div>
            <div class="kpi-value">8</div>
            <div class="kpi-sub">6 active, 2 available</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">HVAC Crew</div>
            <div class="kpi-value">7</div>
            <div class="kpi-sub">5 active, 2 available</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Install Teams</div>
            <div class="kpi-value">3</div>
            <div class="kpi-sub">2 on jobs, 1 returning</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Avg Jobs/Tech/Day</div>
            <div class="kpi-value">4.2</div>
            <div class="kpi-sub"><span class="up">â†‘ 0.3</span> vs last month</div>
          </div>
        </div>

        <div class="table-card">
          <div class="table-header">
            <h3>ğŸ‘¨â€ğŸ”§ Technician Status Board</h3>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Technician</th><th>Department</th><th>Status</th><th>Current Job</th><th>Location</th><th>Jobs Today</th><th>Rating</th></tr>
              </thead>
              <tbody>
                <tr><td><strong>Curtis R.</strong></td><td>HVAC Lead</td><td><span class="status active">â— Active</span></td><td>ACE-7841 - AC Repair</td><td>Elk Grove</td><td>5</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.95</td></tr>
                <tr><td><strong>Ivan S.</strong></td><td>Plumbing</td><td><span class="status active">â— Active</span></td><td>ACE-7840 - WH Install</td><td>Folsom</td><td>3</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.88</td></tr>
                <tr><td><strong>Joe M.</strong></td><td>Plumbing Lead</td><td><span class="status active">â— Active</span></td><td>ACE-7839 - Drain Clear</td><td>Sacramento</td><td>4</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.92</td></tr>
                <tr><td><strong>Mike T.</strong></td><td>Install Lead</td><td><span class="status in-progress">â— Installing</span></td><td>ACE-7838 - Furnace</td><td>Rancho Cordova</td><td>2</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.85</td></tr>
                <tr><td><strong>Tim W.</strong></td><td>Install</td><td><span class="status in-progress">â— Installing</span></td><td>ACE-7838 - Furnace</td><td>Rancho Cordova</td><td>2</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜†</span> 4.78</td></tr>
                <tr><td><strong>Jeffrey K.</strong></td><td>Gas/Plumbing</td><td><span class="status urgent">â— Emergency</span></td><td>ACE-7837 - Gas Leak</td><td>Citrus Heights</td><td>3</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.90</td></tr>
                <tr><td><strong>Jorge A.</strong></td><td>Install/Plumbing</td><td><span class="status scheduled">â— En Route</span></td><td>ACE-7836 - Hydro-Jet</td><td>â†’ Roseville</td><td>3</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.82</td></tr>
                <tr><td><strong>Daniel F.</strong></td><td>HVAC</td><td><span class="status completed">â— Available</span></td><td>â€”</td><td>HQ</td><td>4</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜†</span> 4.72</td></tr>
                <tr><td><strong>Marcus L.</strong></td><td>Plumbing</td><td><span class="status completed">â— Available</span></td><td>â€”</td><td>HQ</td><td>3</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜†</span> 4.68</td></tr>
                <tr><td><strong>Ryan P.</strong></td><td>HVAC/Install</td><td><span class="status on-hold">â— Break</span></td><td>â€”</td><td>Carmichael</td><td>3</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 4.80</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“Š Jobs by Technician (This Week)</h3>
            <div class="chart-wrap"><canvas id="techJobsChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>â±ï¸ Average Job Duration by Type (Hours)</h3>
            <div class="chart-wrap"><canvas id="durationChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== JOB PIPELINE PAGE =============== -->
      <div class="page-section" id="page-jobs">
        <div class="section-title"><div class="icon" style="background:var(--green-glow);color:var(--green)">ğŸ“‹</div> Job Pipeline</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Scheduled</div>
            <div class="kpi-value">42</div>
            <div class="kpi-sub">Next 7 days</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">In Progress</div>
            <div class="kpi-value">12</div>
            <div class="kpi-sub">6 plumbing, 4 HVAC, 2 install</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Completed (Week)</div>
            <div class="kpi-value">87</div>
            <div class="kpi-sub"><span class="up">â†‘ 9%</span> vs prev week</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Avg Ticket</div>
            <div class="kpi-value">$624</div>
            <div class="kpi-sub"><span class="up">â†‘ $38</span> vs Q3</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Callbacks</div>
            <div class="kpi-value">3</div>
            <div class="kpi-sub">1.8% callback rate</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Same-Day Service</div>
            <div class="kpi-value">72%</div>
            <div class="kpi-sub">of emergency calls</div>
          </div>
        </div>

        <div class="chart-grid">
          <div class="chart-card tall">
            <h3>ğŸ“Š Weekly Job Pipeline Funnel</h3>
            <div class="chart-wrap"><canvas id="pipelineChart"></canvas></div>
          </div>
          <div class="chart-card tall">
            <h3>ğŸ—ºï¸ Jobs by Service Area</h3>
            <div class="chart-wrap"><canvas id="areaChart"></canvas></div>
          </div>
        </div>

        <div class="table-card">
          <div class="table-header">
            <h3>ğŸ“… Upcoming Scheduled Jobs</h3>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Date</th><th>Time</th><th>Customer</th><th>Service</th><th>Assigned</th><th>Est. Value</th><th>Priority</th></tr>
              </thead>
              <tbody>
                <tr><td>Feb 6</td><td>8:00 AM</td><td>B. Thompson</td><td>Whole-House Repipe</td><td>Joe M. + Marcus</td><td>$8,500</td><td><span class="status urgent">â— High</span></td></tr>
                <tr><td>Feb 6</td><td>9:30 AM</td><td>L. Nguyen</td><td>AC Installation</td><td>Curtis R. + Ryan</td><td>$6,200</td><td><span class="status scheduled">â— Normal</span></td></tr>
                <tr><td>Feb 6</td><td>10:00 AM</td><td>P. Sharma</td><td>Tankless WH Install</td><td>Ivan S.</td><td>$3,400</td><td><span class="status scheduled">â— Normal</span></td></tr>
                <tr><td>Feb 6</td><td>1:00 PM</td><td>C. Davis</td><td>Backflow Test</td><td>Jeffrey K.</td><td>$175</td><td><span class="status completed">â— Routine</span></td></tr>
                <tr><td>Feb 7</td><td>8:00 AM</td><td>M. Wilson</td><td>Heat Pump Install</td><td>Mike T. + Tim</td><td>$7,800</td><td><span class="status urgent">â— High</span></td></tr>
                <tr><td>Feb 7</td><td>9:00 AM</td><td>S. Clark</td><td>Duct Cleaning</td><td>Daniel F.</td><td>$450</td><td><span class="status scheduled">â— Normal</span></td></tr>
                <tr><td>Feb 7</td><td>11:00 AM</td><td>J. Martinez</td><td>Sewer Video Inspect</td><td>Jorge A.</td><td>$275</td><td><span class="status scheduled">â— Normal</span></td></tr>
                <tr><td>Feb 8</td><td>8:00 AM</td><td>R. Kim</td><td>Boiler Repair</td><td>Curtis R.</td><td>$850</td><td><span class="status pending">â— Parts Check</span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- =============== FLEET PAGE =============== -->
      <div class="page-section" id="page-fleet">
        <div class="section-title"><div class="icon" style="background:var(--orange-glow);color:var(--orange)">ğŸš›</div> Fleet Tracker</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Total Vehicles</div>
            <div class="kpi-value">14</div>
            <div class="kpi-sub">8 vans, 4 trucks, 2 service</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">On Road</div>
            <div class="kpi-value">11</div>
            <div class="kpi-sub">79% utilization</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Maintenance Due</div>
            <div class="kpi-value">2</div>
            <div class="kpi-sub">V-07 oil change, V-12 tires</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Fuel Cost (MTD)</div>
            <div class="kpi-value">$4.2K</div>
            <div class="kpi-sub"><span class="down">â†“ 6%</span> route optimization</div>
          </div>
        </div>
        <div class="table-card">
          <div class="table-header"><h3>ğŸš Vehicle Status</h3></div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Vehicle</th><th>Type</th><th>Assigned To</th><th>Status</th><th>Mileage</th><th>Last Service</th><th>Next Service</th></tr>
              </thead>
              <tbody>
                <tr><td>V-01</td><td>Service Van</td><td>Curtis R.</td><td><span class="status active">â— Active</span></td><td>87,420</td><td>Jan 15</td><td>Apr 15</td></tr>
                <tr><td>V-02</td><td>Service Van</td><td>Ivan S.</td><td><span class="status active">â— Active</span></td><td>62,180</td><td>Dec 28</td><td>Mar 28</td></tr>
                <tr><td>V-03</td><td>Service Van</td><td>Joe M.</td><td><span class="status active">â— Active</span></td><td>94,350</td><td>Jan 22</td><td>Apr 22</td></tr>
                <tr><td>V-04</td><td>Install Truck</td><td>Mike T.</td><td><span class="status active">â— Active</span></td><td>45,200</td><td>Jan 10</td><td>Apr 10</td></tr>
                <tr><td>V-05</td><td>Service Van</td><td>Jeffrey K.</td><td><span class="status urgent">â— Emergency</span></td><td>78,900</td><td>Feb 1</td><td>May 1</td></tr>
                <tr><td>V-06</td><td>Install Truck</td><td>Jorge A.</td><td><span class="status active">â— Active</span></td><td>52,300</td><td>Jan 18</td><td>Apr 18</td></tr>
                <tr><td>V-07</td><td>Service Van</td><td>Daniel F.</td><td><span class="status pending">â— Maint Due</span></td><td>103,500</td><td>Oct 20</td><td><strong>OVERDUE</strong></td></tr>
                <tr><td>V-08</td><td>Service Van</td><td>Marcus L.</td><td><span class="status completed">â— At HQ</span></td><td>71,800</td><td>Jan 5</td><td>Apr 5</td></tr>
                <tr><td>V-09</td><td>Install Truck</td><td>Tim W.</td><td><span class="status active">â— Active</span></td><td>38,600</td><td>Dec 15</td><td>Mar 15</td></tr>
                <tr><td>V-10</td><td>Service Van</td><td>Ryan P.</td><td><span class="status on-hold">â— Parked</span></td><td>89,200</td><td>Jan 28</td><td>Apr 28</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>â›½ Monthly Fuel Costs</h3>
            <div class="chart-wrap"><canvas id="fuelChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ“ Miles per Vehicle (MTD)</h3>
            <div class="chart-wrap"><canvas id="milesChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== REVENUE PAGE =============== -->
      <div class="page-section" id="page-revenue">
        <div class="section-title"><div class="icon" style="background:var(--green-glow);color:var(--green)">ğŸ’°</div> Revenue & Profit/Loss</div>
        <div class="kpi-grid">
          <div class="kpi-card green">
            <div class="kpi-label">Annual Revenue (Proj.)</div>
            <div class="kpi-value">$4.8M</div>
            <div class="kpi-sub"><span class="up">â†‘ 11%</span> vs last year</div>
          </div>
          <div class="kpi-card blue">
            <div class="kpi-label">Gross Margin</div>
            <div class="kpi-value">42.3%</div>
            <div class="kpi-sub"><span class="up">â†‘ 1.8%</span> improvement</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Avg Revenue/Tech</div>
            <div class="kpi-value">$22.4K</div>
            <div class="kpi-sub">per month</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">HVAC % of Revenue</div>
            <div class="kpi-value">58%</div>
            <div class="kpi-sub">Plumbing 32%, Other 10%</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">Install vs Service</div>
            <div class="kpi-value">45/55</div>
            <div class="kpi-sub">Install growing +14% YoY</div>
          </div>
          <div class="kpi-card orange">
            <div class="kpi-label">Outstanding AR</div>
            <div class="kpi-value">$67K</div>
            <div class="kpi-sub">avg 18 days to collect</div>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card tall">
            <h3>ğŸ’µ Revenue vs Expenses (Monthly)</h3>
            <div class="chart-wrap"><canvas id="revExpChart"></canvas></div>
          </div>
          <div class="chart-card tall">
            <h3>ğŸ“Š Revenue by Department</h3>
            <div class="chart-wrap"><canvas id="deptRevChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== ESTIMATES PAGE =============== -->
      <div class="page-section" id="page-estimates">
        <div class="section-title"><div class="icon" style="background:var(--amber-glow);color:var(--amber)">ğŸ“</div> Estimates & Quote Pipeline</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Open Estimates</div>
            <div class="kpi-value">31</div>
            <div class="kpi-sub">$142K total pipeline</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Win Rate</div>
            <div class="kpi-value">68%</div>
            <div class="kpi-sub"><span class="up">â†‘ 3%</span> vs Q3</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Avg Quote Value</div>
            <div class="kpi-value">$4,580</div>
            <div class="kpi-sub">Installations avg $6,200</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Avg Days to Close</div>
            <div class="kpi-value">4.2</div>
            <div class="kpi-sub"><span class="up">â†‘ 0.8 days</span> faster</div>
          </div>
        </div>
        <div class="table-card">
          <div class="table-header"><h3>ğŸ’¼ Active Estimates</h3></div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Est #</th><th>Customer</th><th>Service</th><th>Amount</th><th>Sent</th><th>Status</th><th>Follow-up</th></tr>
              </thead>
              <tbody>
                <tr><td>EST-2891</td><td>B. Thompson</td><td>Whole-House Repipe</td><td>$8,500</td><td>Feb 2</td><td><span class="status active">â— Accepted</span></td><td>Scheduled Feb 6</td></tr>
                <tr><td>EST-2890</td><td>L. Nguyen</td><td>Central AC + Ductwork</td><td>$12,400</td><td>Feb 1</td><td><span class="status active">â— Accepted</span></td><td>Deposit received</td></tr>
                <tr><td>EST-2889</td><td>M. Wilson</td><td>Heat Pump System</td><td>$7,800</td><td>Jan 31</td><td><span class="status pending">â— Pending</span></td><td>Call Feb 7</td></tr>
                <tr><td>EST-2888</td><td>A. Jackson</td><td>Water Heater + Repipe</td><td>$5,200</td><td>Jan 30</td><td><span class="status pending">â— Pending</span></td><td>Email sent</td></tr>
                <tr><td>EST-2887</td><td>K. O'Brien</td><td>Tankless Conversion</td><td>$3,800</td><td>Jan 29</td><td><span class="status pending">â— Reviewing</span></td><td>Follow-up Feb 6</td></tr>
                <tr><td>EST-2886</td><td>F. Santos</td><td>Sewer Line Replace</td><td>$6,900</td><td>Jan 28</td><td><span class="status on-hold">â— On Hold</span></td><td>Financing check</td></tr>
                <tr><td>EST-2885</td><td>C. Brooks</td><td>Ductless Mini-Split</td><td>$5,100</td><td>Jan 27</td><td><span class="status pending">â— Pending</span></td><td>2nd opinion</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“ˆ Quote Win Rate Trend</h3>
            <div class="chart-wrap"><canvas id="winRateChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ’° Quote Value Distribution</h3>
            <div class="chart-wrap"><canvas id="quoteDistChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== REVIEWS PAGE =============== -->
      <div class="page-section" id="page-reviews">
        <div class="section-title"><div class="icon" style="background:var(--amber-glow);color:var(--amber)">â­</div> Reviews & Reputation Management</div>
        <div class="kpi-grid">
          <div class="kpi-card amber">
            <div class="kpi-label">Google Rating</div>
            <div class="kpi-value">4.82</div>
            <div class="kpi-sub"><span class="stars">â˜…â˜…â˜…â˜…â˜…</span> 474 reviews</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Yelp Rating</div>
            <div class="kpi-value">4.0</div>
            <div class="kpi-sub"><span class="stars">â˜…â˜…â˜…â˜…â˜†</span> 409 reviews</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">BBB Grade</div>
            <div class="kpi-value">A+</div>
            <div class="kpi-sub">Accredited since 2011</div>
          </div>
          <div class="kpi-card blue">
            <div class="kpi-label">New Reviews (30d)</div>
            <div class="kpi-value">18</div>
            <div class="kpi-sub">avg 4.89 rating</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Response Rate</div>
            <div class="kpi-value">94%</div>
            <div class="kpi-sub">avg 4.2hr reply time</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">NPS Score</div>
            <div class="kpi-value">76</div>
            <div class="kpi-sub">Excellent</div>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>â­ Rating Distribution (All Platforms)</h3>
            <div class="chart-wrap"><canvas id="ratingDistChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ“ˆ Monthly Review Volume</h3>
            <div class="chart-wrap"><canvas id="reviewVolumeChart"></canvas></div>
          </div>
        </div>
        <div class="table-card">
          <div class="table-header"><h3>ğŸ’¬ Recent Reviews</h3></div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Date</th><th>Platform</th><th>Customer</th><th>Rating</th><th>Excerpt</th><th>Responded</th></tr>
              </thead>
              <tbody>
                <tr><td>Feb 5</td><td>Google</td><td>Jennifer M.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></td><td>"Mike, Tim, Jeffrey and Jorge were skilled, fast, and professional..."</td><td><span class="status active">âœ“ Yes</span></td></tr>
                <tr><td>Feb 4</td><td>Yelp</td><td>David R.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></td><td>"Called at noon, they came at 2:30 PM same day! Incredible service."</td><td><span class="status active">âœ“ Yes</span></td></tr>
                <tr><td>Feb 3</td><td>Google</td><td>Shaziana K.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></td><td>"Ivan S. did an excellent job replacing all 3 toilets..."</td><td><span class="status active">âœ“ Yes</span></td></tr>
                <tr><td>Feb 2</td><td>Angi</td><td>Robert T.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></td><td>"Joe is an exceptional technician and an all around nice guy."</td><td><span class="status active">âœ“ Yes</span></td></tr>
                <tr><td>Feb 1</td><td>Nextdoor</td><td>K.C.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜…</span></td><td>"Using Ace since 2007 â€” honored warranty from another company!"</td><td><span class="status pending">â—‹ Pending</span></td></tr>
                <tr><td>Jan 30</td><td>Google</td><td>Maria S.</td><td><span class="stars">â˜…â˜…â˜…â˜…â˜†</span></td><td>"Great work, just a bit pricey for the water heater install."</td><td><span class="status active">âœ“ Yes</span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- =============== CUSTOMERS PAGE =============== -->
      <div class="page-section" id="page-customers">
        <div class="section-title"><div class="icon" style="background:var(--purple-glow);color:var(--purple)">ğŸ‘¥</div> Customer Database</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Total Customers</div>
            <div class="kpi-value">8,420</div>
            <div class="kpi-sub">50+ years of relationships</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Active (12mo)</div>
            <div class="kpi-value">2,180</div>
            <div class="kpi-sub">26% of total base</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Repeat Rate</div>
            <div class="kpi-value">64%</div>
            <div class="kpi-sub"><span class="up">â†‘ 3%</span> growing loyalty</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Lifetime Value</div>
            <div class="kpi-value">$3,840</div>
            <div class="kpi-sub">avg across all customers</div>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“Š Customer Acquisition by Channel</h3>
            <div class="chart-wrap"><canvas id="acquisitionChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ—ºï¸ Customer Distribution by Area</h3>
            <div class="chart-wrap"><canvas id="custAreaChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== INVENTORY PAGE =============== -->
      <div class="page-section" id="page-inventory">
        <div class="section-title"><div class="icon" style="background:var(--orange-glow);color:var(--orange)">ğŸ“¦</div> Parts & Inventory</div>
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">SKUs in Stock</div>
            <div class="kpi-value">842</div>
            <div class="kpi-sub">plumbing + HVAC + WH</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Inventory Value</div>
            <div class="kpi-value">$128K</div>
            <div class="kpi-sub">warehouse + van stock</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Low Stock Alerts</div>
            <div class="kpi-value">7</div>
            <div class="kpi-sub">3 critical, 4 warning</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">On Order</div>
            <div class="kpi-value">$18K</div>
            <div class="kpi-sub">12 POs pending delivery</div>
          </div>
        </div>
        <div class="table-card">
          <div class="table-header"><h3>ğŸ”´ Low Stock Alerts</h3></div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Part</th><th>Category</th><th>In Stock</th><th>Min Level</th><th>Status</th><th>On Order</th><th>ETA</th></tr>
              </thead>
              <tbody>
                <tr><td>Rheem 50gal Gas WH</td><td>Water Heater</td><td>1</td><td>3</td><td><span class="status urgent">â— Critical</span></td><td>4</td><td>Feb 8</td></tr>
                <tr><td>3/4" Copper Pipe (100ft)</td><td>Plumbing</td><td>2</td><td>5</td><td><span class="status urgent">â— Critical</span></td><td>10</td><td>Feb 7</td></tr>
                <tr><td>Carrier 3-Ton Condenser</td><td>HVAC</td><td>0</td><td>2</td><td><span class="status urgent">â— Out of Stock</span></td><td>3</td><td>Feb 10</td></tr>
                <tr><td>PEX 1/2" (500ft roll)</td><td>Plumbing</td><td>3</td><td>6</td><td><span class="status pending">â— Low</span></td><td>8</td><td>Feb 7</td></tr>
                <tr><td>Honeywell Thermostat T6</td><td>HVAC</td><td>4</td><td>8</td><td><span class="status pending">â— Low</span></td><td>12</td><td>Feb 9</td></tr>
                <tr><td>4" ABS Pipe (10ft)</td><td>Drain</td><td>5</td><td>10</td><td><span class="status pending">â— Low</span></td><td>15</td><td>Feb 7</td></tr>
                <tr><td>R-410A Refrigerant (25lb)</td><td>HVAC</td><td>2</td><td>4</td><td><span class="status pending">â— Low</span></td><td>6</td><td>Feb 11</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“Š Inventory Value by Category</h3>
            <div class="chart-wrap"><canvas id="invCatChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ“ˆ Monthly Parts Spend</h3>
            <div class="chart-wrap"><canvas id="partsSpendChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== WEATHER PAGE =============== -->
      <div class="page-section" id="page-weather">
        <div class="section-title"><div class="icon" style="background:var(--cyan-glow);color:var(--cyan)">ğŸŒ¡ï¸</div> Weather & Demand Forecast â€” Sacramento</div>
        <div class="weather-strip">
          <div class="weather-day"><div class="day">Today</div><div class="icon">â˜€ï¸</div><div class="temp">58Â°F</div><div class="desc">Sunny</div></div>
          <div class="weather-day"><div class="day">Fri</div><div class="icon">â›…</div><div class="temp">62Â°F</div><div class="desc">Partly Cloudy</div></div>
          <div class="weather-day"><div class="day">Sat</div><div class="icon">ğŸŒ§ï¸</div><div class="temp">54Â°F</div><div class="desc">Rain</div></div>
          <div class="weather-day"><div class="day">Sun</div><div class="icon">ğŸŒ§ï¸</div><div class="temp">52Â°F</div><div class="desc">Showers</div></div>
          <div class="weather-day"><div class="day">Mon</div><div class="icon">â›…</div><div class="temp">56Â°F</div><div class="desc">Clearing</div></div>
          <div class="weather-day"><div class="day">Tue</div><div class="icon">â˜€ï¸</div><div class="temp">61Â°F</div><div class="desc">Sunny</div></div>
          <div class="weather-day"><div class="day">Wed</div><div class="icon">â˜€ï¸</div><div class="temp">64Â°F</div><div class="desc">Clear</div></div>
        </div>
        <div class="kpi-grid">
          <div class="kpi-card cyan">
            <div class="kpi-label">HVAC Demand Level</div>
            <div class="kpi-value">LOW</div>
            <div class="kpi-sub">Mild temps â€” focus on installs</div>
          </div>
          <div class="kpi-card blue">
            <div class="kpi-label">Plumbing Demand</div>
            <div class="kpi-value">MED</div>
            <div class="kpi-sub">Rain = drain issues expected</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Next Heat Wave</div>
            <div class="kpi-value">~May</div>
            <div class="kpi-sub">Prep AC inventory now</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Seasonal Revenue Impact</div>
            <div class="kpi-value">+22%</div>
            <div class="kpi-sub">June-Sept AC surge</div>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card tall">
            <h3>ğŸ“Š Seasonal Demand Pattern (12 Months)</h3>
            <div class="chart-wrap"><canvas id="seasonalChart"></canvas></div>
          </div>
          <div class="chart-card tall">
            <h3>ğŸŒ¡ï¸ Temperature vs Service Call Volume</h3>
            <div class="chart-wrap"><canvas id="weatherCorrelChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- =============== PERFORMANCE PAGE =============== -->
      <div class="page-section" id="page-performance">
        <div class="section-title"><div class="icon" style="background:var(--purple-glow);color:var(--purple)">ğŸ“ˆ</div> Performance Analytics</div>
        <div class="kpi-grid">
          <div class="kpi-card green">
            <div class="kpi-label">First-Call Fix Rate</div>
            <div class="kpi-value">89%</div>
            <div class="kpi-sub"><span class="up">â†‘ 4%</span> from training</div>
          </div>
          <div class="kpi-card blue">
            <div class="kpi-label">Revenue/Truck Roll</div>
            <div class="kpi-value">$487</div>
            <div class="kpi-sub"><span class="up">â†‘ $32</span> upselling</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Avg Job Duration</div>
            <div class="kpi-value">2.4h</div>
            <div class="kpi-sub">Service calls avg 1.8h</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Employee Retention</div>
            <div class="kpi-value">82%</div>
            <div class="kpi-sub">Above industry avg (68%)</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">Marketing ROI</div>
            <div class="kpi-value">4.2x</div>
            <div class="kpi-sub">$1 spent â†’ $4.20 revenue</div>
          </div>
          <div class="kpi-card orange">
            <div class="kpi-label">YoY Growth</div>
            <div class="kpi-value">+11%</div>
            <div class="kpi-sub">3 consecutive years of growth</div>
          </div>
        </div>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>ğŸ“Š Key Metrics Trend (6 Months)</h3>
            <div class="chart-wrap"><canvas id="metricsTrendChart"></canvas></div>
          </div>
          <div class="chart-card">
            <h3>ğŸ¯ Department Efficiency Scores</h3>
            <div class="chart-wrap"><canvas id="efficiencyChart"></canvas></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ========== ANTI-SCRAPE PROTECTION ==========
(function(){
  if(navigator.webdriver||window.__nightmare||window.callPhantom||window._phantom){
    document.body.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100vh;color:#666;font-family:sans-serif">Access Denied</div>';return;
  }
  const k=['s','e','l','e','c','t'];
  document.addEventListener(k.join('')+'start',function(e){
    if(!e.target.closest('input'))e.preventDefault();
  });
  document.addEventListener('contextmenu',function(e){e.preventDefault()});
  document.addEventListener('keydown',function(e){
    if((e.ctrlKey||e.metaKey)&&['s','u','p','c'].includes(e.key.toLowerCase()))e.preventDefault();
    if(e.key==='F12')e.preventDefault();
  });
  const s=document.createElement('style');
  s.textContent='body{-webkit-user-select:none;-moz-user-select:none;user-select:none}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}';
  document.head.appendChild(s);
  setInterval(function(){
    const t=performance.now();debugger;
    if(performance.now()-t>50)document.body.innerHTML='';
  },3000);
})();

// ========== ACCESS KEY CHECK ==========
const VALID_KEY='ACE2026X9F';
function checkKey(){
  const input=document.getElementById('keyInput').value.trim();
  if(input===VALID_KEY){
    document.getElementById('gate').style.display='none';
    document.getElementById('app').style.display='flex';
    initDashboard();
  } else {
    document.getElementById('keyError').style.display='block';
    document.getElementById('keyInput').style.borderColor='var(--red)';
  }
}
document.getElementById('keyInput').addEventListener('keypress',e=>{if(e.key==='Enter')checkKey()});

// Auto-check URL key param
(function(){
  const p=new URLSearchParams(window.location.search);
  const k=p.get('key');
  if(k===VALID_KEY){
    document.getElementById('gate').style.display='none';
    document.getElementById('app').style.display='flex';
    setTimeout(initDashboard,100);
  }
})();

// ========== NAVIGATION ==========
document.querySelectorAll('.nav-item').forEach(item=>{
  item.addEventListener('click',()=>{
    document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));
    item.classList.add('active');
    const page=item.dataset.page;
    document.querySelectorAll('.page-section').forEach(s=>s.classList.remove('active'));
    const target=document.getElementById('page-'+page);
    if(target)target.classList.add('active');
    const titles={
      overview:'Operations Dashboard',dispatch:'Dispatch & Crews',jobs:'Job Pipeline',
      fleet:'Fleet Tracker',revenue:'Revenue & P/L',estimates:'Estimates & Quotes',
      reviews:'Reviews & Reputation',customers:'Customer Database',inventory:'Parts & Inventory',
      weather:'Weather & Demand',performance:'Performance Analytics'
    };
    document.getElementById('pageTitle').textContent=titles[page]||'Dashboard';
    document.getElementById('sidebar').classList.remove('open');
  });
});

// ========== CLOCK ==========
function updateClock(){
  const now=new Date();
  document.getElementById('headerTime').textContent=now.toLocaleString('en-US',{
    weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'
  });
}
setInterval(updateClock,1000);
updateClock();

// ========== CHART DEFAULTS ==========
Chart.defaults.color='#8b95a8';
Chart.defaults.borderColor='#2a3550';
Chart.defaults.font.family='Inter';
Chart.defaults.font.size=11;
Chart.defaults.plugins.legend.labels.usePointStyle=true;
Chart.defaults.plugins.legend.labels.pointStyleWidth=8;

const COLORS={
  blue:'#3b82f6',green:'#10b981',amber:'#f59e0b',red:'#ef4444',
  purple:'#8b5cf6',cyan:'#06b6d4',orange:'#f97316',pink:'#ec4899'
};

function gradient(ctx,c1,c2){
  const g=ctx.createLinearGradient(0,0,0,ctx.canvas.height);
  g.addColorStop(0,c1);g.addColorStop(1,c2);return g;
}

function initDashboard(){
  // === OVERVIEW: Revenue Trend ===
  const rc=document.getElementById('revenueChart');
  if(rc){
    const ctx=rc.getContext('2d');
    new Chart(ctx,{type:'line',data:{
      labels:['Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Revenue',data:[320,340,380,480,520,540,510,420,380,350,360,387],
        borderColor:COLORS.blue,backgroundColor:gradient(ctx,'rgba(59,130,246,.2)','rgba(59,130,246,0)'),
        fill:true,tension:.4,pointRadius:4,pointHoverRadius:6,borderWidth:2.5
      },{
        label:'Expenses',data:[220,235,260,310,330,340,320,280,260,240,245,258],
        borderColor:COLORS.red,backgroundColor:'transparent',
        borderDash:[5,5],tension:.4,pointRadius:3,borderWidth:2
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true,ticks:{callback:v=>'$'+v+'K'}}},
      plugins:{tooltip:{callbacks:{label:c=>c.dataset.label+': $'+c.raw+'K'}}}
    }});
  }

  // === OVERVIEW: Service Mix ===
  const sc=document.getElementById('serviceChart');
  if(sc){
    new Chart(sc,{type:'doughnut',data:{
      labels:['HVAC Repair','HVAC Install','Plumbing Repair','Plumbing Install','Drain/Sewer','Water Heater','Air Quality'],
      datasets:[{
        data:[28,18,16,8,12,10,8],
        backgroundColor:[COLORS.blue,COLORS.cyan,COLORS.green,COLORS.purple,COLORS.amber,COLORS.orange,COLORS.pink],
        borderWidth:0,hoverOffset:8
      }]
    },options:{responsive:true,maintainAspectRatio:false,cutout:'65%',
      plugins:{legend:{position:'right',labels:{padding:12}}}
    }});
  }

  // === OVERVIEW: Daily Jobs ===
  const djc=document.getElementById('dailyJobsChart');
  if(djc){
    const ctx=djc.getContext('2d');
    const days=Array.from({length:30},(_,i)=>'Day '+(i+1));
    const vals=[18,22,20,24,21,8,6,19,23,25,22,20,9,7,21,24,26,23,22,10,8,20,22,24,27,23,9,7,22,24];
    new Chart(ctx,{type:'bar',data:{
      labels:days,datasets:[{
        label:'Jobs',data:vals,
        backgroundColor:vals.map(v=>v<10?COLORS.amber:COLORS.blue),
        borderRadius:4,barPercentage:.7
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{x:{ticks:{maxTicksLimit:15}},y:{beginAtZero:true}},
      plugins:{legend:{display:false}}
    }});
  }

  // === OVERVIEW: Temp vs HVAC Calls ===
  const tcc=document.getElementById('tempVsCallsChart');
  if(tcc){
    new Chart(tcc,{type:'line',data:{
      labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
      datasets:[{
        label:'Avg Temp (Â°F)',data:[46,52,58,64,73,82,95,93,86,72,56,46],
        borderColor:COLORS.orange,yAxisID:'y1',tension:.4,pointRadius:4,borderWidth:2
      },{
        label:'HVAC Calls/Day',data:[8,7,9,12,18,28,38,36,24,14,10,9],
        borderColor:COLORS.cyan,yAxisID:'y2',tension:.4,pointRadius:4,borderWidth:2
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{
        y1:{position:'left',title:{display:true,text:'Temperature Â°F'},beginAtZero:false},
        y2:{position:'right',title:{display:true,text:'Calls/Day'},grid:{drawOnChartArea:false}}
      }
    }});
  }

  // === DISPATCH: Tech Jobs Chart ===
  const tjc=document.getElementById('techJobsChart');
  if(tjc){
    new Chart(tjc,{type:'bar',data:{
      labels:['Curtis R.','Joe M.','Ivan S.','Jeffrey K.','Mike T.','Jorge A.','Daniel F.','Tim W.','Marcus L.','Ryan P.'],
      datasets:[{
        label:'Completed',data:[22,19,17,18,14,16,18,12,15,16],backgroundColor:COLORS.green,borderRadius:4
      },{
        label:'In Progress',data:[3,2,3,1,2,2,1,2,1,1],backgroundColor:COLORS.blue,borderRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,indexAxis:'y',
      scales:{x:{stacked:true},y:{stacked:true}},
      plugins:{legend:{position:'top'}}
    }});
  }

  // === DISPATCH: Duration by Type ===
  const duc=document.getElementById('durationChart');
  if(duc){
    new Chart(duc,{type:'bar',data:{
      labels:['AC Repair','Furnace Install','Drain Clean','WH Install','Repipe','Heat Pump','Duct Clean','Gas Line','Tune-Up'],
      datasets:[{
        label:'Avg Hours',data:[2.1,6.5,1.2,3.8,8.0,7.2,2.5,1.8,1.0],
        backgroundColor:[COLORS.blue,COLORS.cyan,COLORS.green,COLORS.orange,COLORS.purple,COLORS.amber,COLORS.pink,COLORS.red,COLORS.green],
        borderRadius:6
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true,title:{display:true,text:'Hours'}}},
      plugins:{legend:{display:false}}
    }});
  }

  // === JOBS: Pipeline Funnel ===
  const plc=document.getElementById('pipelineChart');
  if(plc){
    new Chart(plc,{type:'bar',data:{
      labels:['Leads','Estimates Sent','Estimates Approved','Scheduled','In Progress','Completed'],
      datasets:[{
        label:'Jobs',data:[85,62,42,38,12,87],
        backgroundColor:[COLORS.purple,COLORS.blue,COLORS.cyan,COLORS.amber,COLORS.orange,COLORS.green],
        borderRadius:6,barPercentage:.6
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true}},
      plugins:{legend:{display:false}}
    }});
  }

  // === JOBS: Area Chart ===
  const arc=document.getElementById('areaChart');
  if(arc){
    new Chart(arc,{type:'pie',data:{
      labels:['Sacramento','Elk Grove','Folsom','Roseville','Citrus Heights','Rancho Cordova','Davis','Granite Bay','Woodland','Other'],
      datasets:[{
        data:[32,14,11,10,8,7,5,4,3,6],
        backgroundColor:[COLORS.blue,COLORS.green,COLORS.amber,COLORS.purple,COLORS.cyan,COLORS.orange,COLORS.pink,COLORS.red,'#64748b','#475569'],
        borderWidth:0
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'right',labels:{padding:8,font:{size:11}}}}
    }});
  }

  // === FLEET: Fuel Costs ===
  const flc=document.getElementById('fuelChart');
  if(flc){
    const ctx=flc.getContext('2d');
    new Chart(ctx,{type:'line',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Fuel Cost',data:[4800,4600,4400,4100,4350,4200],
        borderColor:COLORS.orange,backgroundColor:gradient(ctx,'rgba(249,115,22,.15)','rgba(249,115,22,0)'),
        fill:true,tension:.4,borderWidth:2.5,pointRadius:5
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{ticks:{callback:v=>'$'+v.toLocaleString()}}},
      plugins:{legend:{display:false}}
    }});
  }

  // === FLEET: Miles per Vehicle ===
  const mlc=document.getElementById('milesChart');
  if(mlc){
    new Chart(mlc,{type:'bar',data:{
      labels:['V-01','V-02','V-03','V-04','V-05','V-06','V-07','V-08','V-09','V-10'],
      datasets:[{
        label:'Miles MTD',data:[1420,1180,1540,890,1350,1020,620,780,870,540],
        backgroundColor:COLORS.blue,borderRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}
    }});
  }

  // === REVENUE: Rev vs Expenses ===
  const rec=document.getElementById('revExpChart');
  if(rec){
    const ctx=rec.getContext('2d');
    new Chart(ctx,{type:'bar',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Revenue',data:[510,420,380,350,360,387],backgroundColor:COLORS.green,borderRadius:4
      },{
        label:'COGS',data:[200,170,155,142,148,158],backgroundColor:COLORS.amber,borderRadius:4
      },{
        label:'Operating Exp',data:[120,110,105,98,97,100],backgroundColor:COLORS.red,borderRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{x:{stacked:false},y:{ticks:{callback:v=>'$'+v+'K'}}},
      plugins:{tooltip:{callbacks:{label:c=>c.dataset.label+': $'+c.raw+'K'}}}
    }});
  }

  // === REVENUE: Department Revenue ===
  const drc=document.getElementById('deptRevChart');
  if(drc){
    new Chart(drc,{type:'doughnut',data:{
      labels:['HVAC Service','HVAC Install','Plumbing Service','Plumbing Install','Drain/Sewer','Water Heaters','Air Quality','Other'],
      datasets:[{
        data:[32,26,18,8,7,5,3,1],
        backgroundColor:[COLORS.blue,COLORS.cyan,COLORS.green,COLORS.purple,COLORS.amber,COLORS.orange,COLORS.pink,'#64748b'],
        borderWidth:0
      }]
    },options:{responsive:true,maintainAspectRatio:false,cutout:'60%',
      plugins:{legend:{position:'right'}}
    }});
  }

  // === ESTIMATES: Win Rate ===
  const wrc=document.getElementById('winRateChart');
  if(wrc){
    const ctx=wrc.getContext('2d');
    new Chart(ctx,{type:'line',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Win Rate %',data:[62,64,63,66,67,68],
        borderColor:COLORS.green,backgroundColor:gradient(ctx,'rgba(16,185,129,.15)','rgba(16,185,129,0)'),
        fill:true,tension:.4,borderWidth:2.5,pointRadius:5
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{min:50,max:80,ticks:{callback:v=>v+'%'}}},
      plugins:{legend:{display:false}}
    }});
  }

  // === ESTIMATES: Quote Distribution ===
  const qdc=document.getElementById('quoteDistChart');
  if(qdc){
    new Chart(qdc,{type:'bar',data:{
      labels:['<$500','$500-1K','$1K-3K','$3K-5K','$5K-10K','$10K+'],
      datasets:[{
        label:'Quotes',data:[45,32,28,22,18,8],
        backgroundColor:[COLORS.green,COLORS.cyan,COLORS.blue,COLORS.purple,COLORS.amber,COLORS.orange],
        borderRadius:6
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}
    }});
  }

  // === REVIEWS: Rating Distribution ===
  const rdc=document.getElementById('ratingDistChart');
  if(rdc){
    new Chart(rdc,{type:'bar',data:{
      labels:['5 Stars','4 Stars','3 Stars','2 Stars','1 Star'],
      datasets:[{
        label:'Reviews',data:[620,180,42,18,23],
        backgroundColor:[COLORS.green,COLORS.cyan,COLORS.amber,COLORS.orange,COLORS.red],
        borderRadius:6,barPercentage:.5
      }]
    },options:{responsive:true,maintainAspectRatio:false,indexAxis:'y',
      scales:{x:{beginAtZero:true}},plugins:{legend:{display:false}}
    }});
  }

  // === REVIEWS: Volume ===
  const rvc=document.getElementById('reviewVolumeChart');
  if(rvc){
    new Chart(rvc,{type:'bar',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Google',data:[12,14,11,13,15,14],backgroundColor:COLORS.blue,borderRadius:4
      },{
        label:'Yelp',data:[5,4,6,3,5,4],backgroundColor:COLORS.red,borderRadius:4
      },{
        label:'Other',data:[3,2,4,2,3,2],backgroundColor:COLORS.green,borderRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{x:{stacked:true},y:{stacked:true,beginAtZero:true}},
    }});
  }

  // === CUSTOMERS: Acquisition ===
  const aqc=document.getElementById('acquisitionChart');
  if(aqc){
    new Chart(aqc,{type:'doughnut',data:{
      labels:['Google/SEO','Referral','Repeat Customer','Nextdoor','Yelp','Angi','Facebook','Other'],
      datasets:[{
        data:[28,24,22,8,7,5,3,3],
        backgroundColor:[COLORS.blue,COLORS.green,COLORS.purple,COLORS.cyan,COLORS.red,COLORS.amber,COLORS.pink,COLORS.orange],
        borderWidth:0
      }]
    },options:{responsive:true,maintainAspectRatio:false,cutout:'60%',
      plugins:{legend:{position:'right'}}
    }});
  }

  // === CUSTOMERS: Area Distribution ===
  const cac=document.getElementById('custAreaChart');
  if(cac){
    new Chart(cac,{type:'bar',data:{
      labels:['Sacramento','Elk Grove','Folsom','Roseville','Citrus Heights','Rancho Cordova','Davis','Rocklin','Woodland','Other'],
      datasets:[{
        label:'Customers',data:[2840,1180,920,780,640,520,380,320,280,560],
        backgroundColor:COLORS.blue,borderRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}
    }});
  }

  // === INVENTORY: Category Value ===
  const icc=document.getElementById('invCatChart');
  if(icc){
    new Chart(icc,{type:'doughnut',data:{
      labels:['HVAC Equipment','Plumbing Parts','Water Heaters','Drain/Sewer','Fittings/Connectors','Refrigerant','Other'],
      datasets:[{
        data:[42,28,18,12,10,8,10],
        backgroundColor:[COLORS.blue,COLORS.green,COLORS.orange,COLORS.amber,COLORS.purple,COLORS.cyan,COLORS.pink],
        borderWidth:0
      }]
    },options:{responsive:true,maintainAspectRatio:false,cutout:'60%',
      plugins:{legend:{position:'right'}}
    }});
  }

  // === INVENTORY: Parts Spend ===
  const psc=document.getElementById('partsSpendChart');
  if(psc){
    const ctx=psc.getContext('2d');
    new Chart(ctx,{type:'line',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'Parts Spend',data:[18200,15800,14500,12800,14200,16400],
        borderColor:COLORS.orange,backgroundColor:gradient(ctx,'rgba(249,115,22,.15)','rgba(249,115,22,0)'),
        fill:true,tension:.4,borderWidth:2.5,pointRadius:5
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{ticks:{callback:v=>'$'+v.toLocaleString()}}},
      plugins:{legend:{display:false}}
    }});
  }

  // === WEATHER: Seasonal Demand ===
  const ssc=document.getElementById('seasonalChart');
  if(ssc){
    const ctx=ssc.getContext('2d');
    new Chart(ctx,{type:'line',data:{
      labels:['Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'HVAC Calls',data:[180,220,350,520,680,640,420,280,200,180,170,165],
        borderColor:COLORS.red,backgroundColor:gradient(ctx,'rgba(239,68,68,.1)','rgba(239,68,68,0)'),
        fill:true,tension:.4,borderWidth:2.5
      },{
        label:'Plumbing Calls',data:[240,230,220,200,180,175,190,210,250,280,290,260],
        borderColor:COLORS.blue,backgroundColor:gradient(ctx,'rgba(59,130,246,.1)','rgba(59,130,246,0)'),
        fill:true,tension:.4,borderWidth:2.5
      },{
        label:'Water Heater',data:[110,90,70,50,40,35,45,60,90,120,130,115],
        borderColor:COLORS.amber,tension:.4,borderWidth:2,borderDash:[5,5]
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{beginAtZero:true,title:{display:true,text:'Service Calls/Month'}}},
    }});
  }

  // === WEATHER: Correlation ===
  const wcc=document.getElementById('weatherCorrelChart');
  if(wcc){
    new Chart(wcc,{type:'scatter',data:{
      datasets:[{
        label:'HVAC Calls vs Temp',
        data:[{x:46,y:170},{x:52,y:165},{x:58,y:180},{x:64,y:220},{x:73,y:350},
              {x:82,y:520},{x:95,y:680},{x:93,y:640},{x:86,y:420},{x:72,y:280},
              {x:56,y:200},{x:46,y:180}],
        backgroundColor:COLORS.red,pointRadius:8,pointHoverRadius:10
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{
        x:{title:{display:true,text:'Avg Temperature (Â°F)'},min:40,max:100},
        y:{title:{display:true,text:'HVAC Calls/Month'},beginAtZero:true}
      },
      plugins:{legend:{display:false}}
    }});
  }

  // === PERFORMANCE: Metrics Trend ===
  const mtc=document.getElementById('metricsTrendChart');
  if(mtc){
    new Chart(mtc,{type:'line',data:{
      labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
      datasets:[{
        label:'First-Call Fix %',data:[85,86,87,88,88,89],
        borderColor:COLORS.green,tension:.4,borderWidth:2.5,pointRadius:4
      },{
        label:'Customer Sat %',data:[91,92,91,93,94,94],
        borderColor:COLORS.blue,tension:.4,borderWidth:2.5,pointRadius:4
      },{
        label:'On-Time %',data:[88,89,90,91,92,92],
        borderColor:COLORS.purple,tension:.4,borderWidth:2.5,pointRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{y:{min:75,max:100,ticks:{callback:v=>v+'%'}}},
    }});
  }

  // === PERFORMANCE: Efficiency Radar ===
  const efc=document.getElementById('efficiencyChart');
  if(efc){
    new Chart(efc,{type:'radar',data:{
      labels:['First-Call Fix','Response Time','Customer Sat','Revenue/Job','Utilization','Callback Rate'],
      datasets:[{
        label:'HVAC',data:[92,88,94,85,90,95],
        borderColor:COLORS.blue,backgroundColor:'rgba(59,130,246,.15)',borderWidth:2,pointRadius:4
      },{
        label:'Plumbing',data:[88,92,91,78,85,90],
        borderColor:COLORS.green,backgroundColor:'rgba(16,185,129,.15)',borderWidth:2,pointRadius:4
      },{
        label:'Install',data:[95,75,96,92,70,98],
        borderColor:COLORS.purple,backgroundColor:'rgba(139,92,246,.15)',borderWidth:2,pointRadius:4
      }]
    },options:{responsive:true,maintainAspectRatio:false,
      scales:{r:{min:60,max:100,ticks:{stepSize:10},grid:{color:'#2a3550'},angleLines:{color:'#2a3550'}}},
    }});
  }
}
</script>
</body>
</html>
